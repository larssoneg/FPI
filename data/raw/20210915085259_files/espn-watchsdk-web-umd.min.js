var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).WatchSDK={})}(this,(function(t){"use strict";
/** @preserve ESPN WatchSDK 4.1.24 */function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=p(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function v(t,e,n,i){return(v="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var a,o=p(t,e);if(o){if((a=Object.getOwnPropertyDescriptor(o,e)).set)return a.set.call(i,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(i,e)){if(!a.writable)return!1;a.value=n,Object.defineProperty(i,e,a)}else r(i,e,n);return!0})(t,e,n,i)}function y(t,e,n,i,r){if(!v(t,e,n,i||t)&&r)throw new Error("failed to set property");return n}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t,e){return t(e={exports:{}},e.exports),e.exports}var P=w((function(t){var e,n;e=b,n=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&e?r:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):t)}function o(e,i){for(var r=0;r<n.length;r++){var a=n[r];this[a]=r<e?t:this.methodFactory(a,e,i)}this.log=this.debug}function s(t,e,n){return function(){"undefined"!=typeof console&&(o.call(this,e,n),this[t].apply(this,arguments))}}function u(t,e,n){return a(t)||s.apply(this,arguments)}function c(t,e,i){var r,a=this,s="loglevel";function c(){var t;if("undefined"!=typeof window&&s){try{t=window.localStorage[s]}catch(t){}if(void 0===t)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(s)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?s+=":"+t:"symbol"==typeof t&&(s=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||u,a.getLevel=function(){return r},a.setLevel=function(e,i){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==i&&function(t){var e=(n[t]||"silent").toUpperCase();if("undefined"!=typeof window&&s){try{return void(window.localStorage[s]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+e+";"}catch(t){}}}(e),o.call(a,e,t),"undefined"==typeof console&&e<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){c()||a.setLevel(t,!1)},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var d=c();null==d&&(d=null==e?"WARN":e),a.setLevel(d,!1)}var d=new c,l={};d.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new c(t,d.getLevel(),d.methodFactory)),e};var h="undefined"!=typeof window?window.log:void 0;return d.noConflict=function(){return"undefined"!=typeof window&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return l},d.default=d,d},t.exports?t.exports=n():e.log=n()})),I=Object.freeze({__proto__:null,default:P,__moduleExports:P}),A=w((function(t,e){
/*!
   * @overview es6-promise - a tiny implementation of Promises/A+.
   * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
   * @license   Licensed under MIT license
   *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
   * @version   v4.2.8+1e68dce6
   */
t.exports=function(){function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,i=void 0,r=void 0,a=function(t,e){h[n]=t,h[n+1]=e,2===(n+=2)&&(r?r(p):m())},o="undefined"!=typeof window?window:void 0,s=o||{},u=s.MutationObserver||s.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<n;t+=2)(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0;n=0}var f,v,y,g,m=void 0;function w(t,e){var n=this,i=new this.constructor(A);void 0===i[I]&&N(i);var r=n._state;if(r){var o=arguments[r-1];a((function(){return M(r,i,o,n._result)}))}else C(n,i,t,e);return i}function P(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return T(e,t),e}c?m=function(){return process.nextTick(p)}:u?(v=0,y=new u(p),g=document.createTextNode(""),y.observe(g,{characterData:!0}),m=function(){g.data=v=++v%2}):d?((f=new MessageChannel).port1.onmessage=p,m=function(){return f.port2.postMessage(0)}):m=void 0===o?function(){try{var t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(p)}:l()}catch(t){return l()}}():l();var I=Math.random().toString(36).substring(2);function A(){}function _(e,n,i){n.constructor===e.constructor&&i===w&&n.constructor.resolve===P?function(t,e){1===e._state?k(t,e._result):2===e._state?E(t,e._result):C(e,void 0,(function(e){return T(t,e)}),(function(e){return E(t,e)}))}(e,n):void 0===i?k(e,n):t(i)?function(t,e,n){a((function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,(function(n){i||(i=!0,e!==n?T(t,n):k(t,n))}),(function(e){i||(i=!0,E(t,e))}),t._label);!i&&r&&(i=!0,E(t,r))}),t)}(e,n,i):k(e,n)}function T(t,e){if(t===e)E(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!==r&&"function"!==r)k(t,e);else{var n=void 0;try{n=e.then}catch(e){return void E(t,e)}_(t,e,n)}var i,r}function S(t){t._onerror&&t._onerror(t._result),O(t)}function k(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(O,t))}function E(t,e){void 0===t._state&&(t._state=2,t._result=e,a(S,t))}function C(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=n,r[o+2]=i,0===o&&t._state&&a(O,t)}function O(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,a=t._result,o=0;o<e.length;o+=3)i=e[o],r=e[o+n],i?M(n,i,r,a):r(a);t._subscribers.length=0}}function M(e,n,i,r){var a=t(i),o=void 0,s=void 0,u=!0;if(a){try{o=i(r)}catch(t){u=!1,s=t}if(n===o)return void E(n,new TypeError("A promises callback cannot return that same promise."))}else o=r;void 0!==n._state||(a&&u?T(n,o):!1===u?E(n,s):1===e?k(n,o):2===e&&E(n,o))}var D=0;function N(t){t[I]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(A),this.promise[I]||N(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&k(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===P){var r=void 0,a=void 0,o=!1;try{r=t.then}catch(t){o=!0,a=t}if(r===w&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===j){var s=new n(A);o?E(s,a):_(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;void 0===i._state&&(this._remaining--,2===t?E(i,n):this._result[e]=n),0===this._remaining&&k(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),j=function(){function e(t){this[I]=D++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){T(t,e)}),(function(e){E(t,e)}))}catch(e){E(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return j.prototype.then=w,j.all=function(t){return new U(this,t).promise},j.race=function(t){var n=this;return e(t)?new n((function(e,i){for(var r=t.length,a=0;a<r;a++)n.resolve(t[a]).then(e,i)})):new n((function(t,e){return e(new TypeError("You must pass an array to race."))}))},j.resolve=P,j.reject=function(t){var e=new this(A);return E(e,t),e},j._setScheduler=function(t){r=t},j._setAsap=function(t){a=t},j._asap=a,j.polyfill=function(){var t=void 0;if(void 0!==b)t=b;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=j},j.Promise=j,j}()}));function _(t,e){return e=e||{},new A((function(n,i){var r=new XMLHttpRequest;for(var a in r.open(e.method||"get",t,!0),e.headers)r.setRequestHeader(a,e.headers[a]);function o(){var t,e=[],n=[],i={};return r.getAllResponseHeaders().replace(/^(.*?):\s*?([\s\S]*?)$/gm,(function(r,a,o){e.push(a=a.toLowerCase()),n.push([a,o]),t=i[a],i[a]=t?"".concat(t,",").concat(o):o})),{ok:2==(r.status/100|0),status:r.status,statusText:r.statusText,url:r.responseURL,clone:o,text:function(){return A.resolve(r.responseText)},json:function(){return A.resolve(r.responseText).then((function(t){try{return JSON.parse(t)}catch(t){return{}}}))},blob:function(){return A.resolve(new Blob([r.response]))},headers:{keys:function(){return e},entries:function(){return n},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}}r.withCredentials="include"===e.credentials,r.onload=function(){n(o())},r.onreadystatechange=function(){try{4===r.readyState&&(200===(t=r).status||201===t.status||202===t.status||204===t.status||0===t.status&&t.responseText&&""!==t.responseText?n(o()):i(o()))}catch(t){r.abort()}var t},r.onerror=i,r.send(e.body)}))}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function S(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var k=function(){return(k=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function E(t,e,n,i){return new(n||(n=A))((function(r,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((i=i.apply(t,e||[])).next())}))}function C(t,e){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function O(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function M(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(O(arguments[e]));return t}var D,N=w((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},a=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[i+a>>>2]|=o<<24-(i+a)%4*8}else for(a=0;a<r;a+=4)e[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){e=e;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},a=0;a<e;a+=4){var s=r(4294967296*(n||t.random()));n=987654071*s(),i.push(4294967296*s()|0)}return new o.init(i,e)}}),s=i.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,c=t.min(4*u,r);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(i,d);var l=i.splice(0,u);n.sigBytes-=c}return new o.init(l,c)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})),U=w((function(t,e){var n,i,r;t.exports=(i=(n=r=N).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)r.push(i.charAt(o>>>6*(3-s)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],a=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,u=n[t.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(s|u)<<24-a%4*8,a++}return i.create(r,a)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)})),j=w((function(t,e){t.exports=N.enc.Utf8})),L="applicationId",x="applicationPlatform",R="deviceModel",B="mobileDevice",H="programmerName",z=function(t){var e=t+":";return{Authorization:"Basic "+U.stringify(j.parse(e)),Accept:"application/json"}},F=function(){function t(t,e,n,i,r){e&&n&&i&&(this.programmer=t,this.applicationId=e,this.identityProvider=encodeURIComponent(n),this.subject=encodeURIComponent(i),this.metadata=r||{},this.serviceUrl="https://web.archive.org/web/20210915144012/https://streams.adobeprimetime.com/v2",this.requestHeaders=z(e),this.heartbeatIntervalId=null,this.messages={})}return t.fetchMetadataKeys=function(t,e){return E(this,void 0,void 0,(function(){var n,i,r,a;return C(this,(function(o){switch(o.label){case 0:n=e+"/metadata",i=z(t),r={method:"GET",headers:i},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,_(n,r)];case 2:return[4,o.sent().json()];case 3:return function(t,e){var n="AdobeCM.metadata."+e;localStorage.setItem(n,JSON.stringify(t))}(o.sent(),t),[2,!0];case 4:return a=o.sent(),console.error("fetchMetadataKeys error: "+a),[2,!1];case 5:return[2]}}))}))},Object.defineProperty(t.prototype,"metadataKeys",{get:function(){return function(t){var e="AdobeCM.metadata."+t,n=[];try{n=JSON.parse(localStorage.getItem(e))||[]}catch(t){}return n}(this.applicationId)},enumerable:!0,configurable:!0}),t.prototype.start=function(){return E(this,void 0,void 0,(function(){var t;return C(this,(function(e){switch(e.label){case 0:return[4,this.createSession()];case 1:return(t=e.sent())?(this.scheduleHeartbeat(),[2,t]):[2,null]}}))}))},t.prototype.startWithSession=function(t){this.sessionId=t,this.scheduleHeartbeat()},t.prototype.stop=function(){this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=null),this.terminateSession()},t.prototype.createSession=function(t){return void 0===t&&(t=[]),E(this,void 0,void 0,(function(){var e,n,i,r,a,o,s,u,c;return C(this,(function(d){switch(d.label){case 0:P.debug("AdobeConcurrencyMonitorV2.createSession"),e=this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject,n=k({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},this.requestHeaders),t.length>0&&(n["X-Terminate"]=t.join(",")),i=this.getMetadata(),r=Object.keys(i).map((function(t){return t+"="+encodeURIComponent(i[t])})).join("&"),a={method:"POST",headers:n,body:r},d.label=1;case 1:return d.trys.push([1,3,,5]),[4,_(e,a)];case 2:if(o=d.sent(),!((s=o.status)>=200&&s<300))throw o;return u=o.headers.get("location").trim(),this.sessionId=u,P.debug("AdobeConcurrencyMonitorV2.createSession sessionId:",u),[2,u];case 3:return c=d.sent(),P.error("AdobeConcurrencyMonitorV2.createSession error: "+c),[4,this.handleError(c,null)];case 4:return[2,d.sent()];case 5:return[2]}}))}))},t.prototype.scheduleHeartbeat=function(){var t=this;P.debug("AdobeConcurrencyMonitorV2.scheduleHeartbeat"),this.heartbeatIntervalId=window.setTimeout((function(){t.heartbeat()}),45e3)},t.prototype.heartbeat=function(){var t=this,e=this.sessionId;e&&(P.debug("AdobeConcurrencyMonitorV2.heartbeat",e),_(this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject+"/"+e,{method:"POST",headers:this.requestHeaders}).then((function(e){var n=e.status;if(!(n>=200&&n<300))throw e;t.scheduleHeartbeat()})).catch((function(e){return t.handleError(e,t.onError)})))},t.prototype.terminateSession=function(){var t=this.sessionId;t&&_(this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject+"/"+t,{method:"DELETE",headers:this.requestHeaders}).then((function(t){var e=t.status;if(!(e>=200&&e<300))throw t}))},t.prototype.handleError=function(e,n){var i=this;switch(P.debug("AdobeConcurrencyMonitorV2.handleError",e),e.status){case 400:return e.json().then((function(e){if(!!(e.obligations||[]).find((function(t){return"logout"===t.action||"refresh"===t.action})))return t.fetchMetadataKeys(i.applicationId,i.serviceUrl).then((function(){var t=i.metadata;if(Object.keys(t).length>=i.metadataKeys.length)return i.start()}))}));case 409:return e.json().then((function(t){var r=(t.associatedAdvice||[]).find((function(t){return"rule-violation"===t.type}));if(r){var a=r.message,o=i.messages[a]||a,s=new Error(o),u=!!(t.obligations||[]).find((function(t){return"logout"===t.action}));if(P.debug("AdobeConcurrencyMonitorV2.handleError",e.status,s,u),!n)throw s;n(s,u)}}));case 410:return e.json().then((function(t){if(!t)return i.start();var r=(t.associatedAdvice||[]).find((function(t){return"remote-termination"===t.type}));if(r){var a=r.message,o=i.messages[a]||a,s=new Error(o),u=!!t.obligations.find((function(t){return"logout"===t.action}));if(P.debug("AdobeConcurrencyMonitorV2.handleError",e.status,s,u),!n)throw s;n(s,u)}}))}},t.prototype.getMetadata=function(){var t=this;return this.metadataKeys.reduce((function(e,n){return e[n]=t.metadata[n],e}),{})},t.prototype.onError=function(t,e){P.debug("AdobeConcurrencyMonitor.onError"),P.debug("error: "+t),P.debug("shouldLogout: "+e)},t}();function V(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,V)}function K(){}!function(t){t.abc="abc",t.abcNews="abcnews",t.abcNewsLive="abcnewslive",t.abcOtv="abcotv",t.disney="dch",t.disneyJr="djr",t.disneyXD="dxd",t.disneyNow="dnow",t.espn="espn",t.espnFantasy="espnFantasy",t.oscar="oscar",t.freeform="ff",t.foxLatam="foxlatam",t.fxNow="fxnow",t.fx="fx",t.fxm="fxm",t.fxx="fxx",t.natGeoTV="natgeotv",t.natGeo="natgeo",t.natGeoWild="natgeowild",t.natgeoBrasil="natgeobrasil",t.unknown="000"}(D||(D={})),K.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var a=0,o=i.length;a<o;a++)i[a].fn!==e&&i[a].fn._!==e&&r.push(i[a]);return r.length?n[t]=r:delete n[t],this}};var G=K,J=K;G.TinyEmitter=J;var q=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"getConfiguration",value:function(t,e){return{}}}]),r}(G),Y=!1;try{Y="caches"in self}catch(t){}var W="UPDATED",Q=function(t){u(a,t);var n=h(a);function a(){var t;if(e(this,a),(t=n.call(this))._bootstrap=null,t._cache=null,Y)caches.open("watchsdk-cache").then((function(e){t._cache=e,e&&e.match("bootstrap").then((function(t){return t&&t.json()})).then((function(e){e&&null===t._bootstrap&&(t._bootstrap=e)}))}));else{var i=localStorage.getItem("BootstrapManager.bootstrap");try{var r=JSON.parse(j.stringify(U.parse(i)));t._bootstrap=r}catch(e){try{var o=JSON.parse(i);t._bootstrap=o}catch(t){}}}return t}return i(a,[{key:"bootstrap",get:function(){return this._bootstrap}},{key:"update",value:function(t){var e=this;return _(t).then((function(t){return t.json()})).then((function(t){if(P.debug("BootstrapManager.update() ".concat(JSON.stringify(t,null,2))),e._bootstrap=t,e._cache&&e._cache.put("bootstrap",new Response(JSON.stringify(t),{headers:{"Content-Type":"application/json"}})),!Y){var n=U.stringify(j.parse(JSON.stringify(t)));localStorage.setItem("BootstrapManager.bootstrap",n)}e.emit(W,e._bootstrap)}))}},{key:"getConfiguration",value:function(t,e){var n=this.bootstrap,i=n&&n[t]||{};if(e){var a=Object.keys(i).filter((function(t){return-1!==Object.keys(e).indexOf(t)})).reduce((function(t,e){return s(s({},t),{},r({},e,i[e]))}),{});i=s(s({},e),a)}return i}}]),a}(q);Q.shared=new Q;var X,Z=new function t(n,i,r,a){e(this,t),this.enabled=n,this.serviceUrl=i,this.applicationId=null,this.applications=r,this.messages=a}(!0,"https://web.archive.org/web/20210915144012/https://streams.adobeprimetime.com/v2",{chromecast:{applicationId:"4c6fd925-7d06-4dbd-9edb-720962619882"},appletv:{applicationId:"eebe77ee-3064-4b4a-b89b-fef248a474be"},samsungtv:{applicationId:"0e3d9128-cdf7-4464-9952-55434ead1e8e"},web:{applicationId:"3bfbbbdf-be8e-40be-9540-97a73469ada2"},ps4:{applicationId:"41e7539c-d38f-4c20-856a-8db2de060287"},comcastflex:{applicationId:"8c1ffe19-f278-4ace-8fc4-833d0ce5c638"}},{}),$="https://web.archive.org/web/20210915144012/https://a.espncdn.com/connected-devices/app-configurations/espn-js-sdk-2.0.config.json",tt={appletv:"dniqxcl2cnjuzgl04vuek1mm",chromecast:"1q86jvqka85r41w7daunp5ipgb",ps4:"kbjoe0y9awb41guc2nzey04ji",samsungtv:"csrf56z30hke1aozrm00ad50g",web:"uiqlbgzdwuru14v627vdusswb",comcastflex:"flex-web-gk2lbqnmoddq1cjz4c7idqeka",comcastx1:"x1-web_ek3rjw4nlqxm1fo1a76xlwivr"},et=function(t){var e=Q.shared.getConfiguration("adobeCM",Z);if(!1!==e.enabled){var n=e.applications&&e.applications[t],i=e.applicationId||n&&n.applicationId,r=e.serviceUrl;F.fetchMetadataKeys(i,r)}},nt=function(){function t(){e(this,t)}return i(t,null,[{key:"init",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.partner=e,t.platform=n,t.version=i,t.deviceId=t.deviceId||V(),P.debug(this.toString());var a=r&&r.bootstrapUrl||$;Q.shared.update(a).finally((function(){et(t.platform)}))}},{key:"partner",get:function(){return localStorage.getItem("ESPNWatchSDK.Client.partner")},set:function(t){localStorage.setItem("ESPNWatchSDK.Client.partner",t)}},{key:"platform",get:function(){return localStorage.getItem("ESPNWatchSDK.Client.platform")},set:function(t){localStorage.setItem("ESPNWatchSDK.Client.platform",t)}},{key:"version",get:function(){return localStorage.getItem("ESPNWatchSDK.Client.version")},set:function(t){localStorage.setItem("ESPNWatchSDK.Client.version",t)}},{key:"deviceId",get:function(){return localStorage.getItem("ESPNWatchSDK.Client.deviceId")},set:function(t){localStorage.setItem("ESPNWatchSDK.Client.deviceId",t)}},{key:"toString",value:function(){return"<WatchSDK.Client partner:".concat(t.partner,", platform:").concat(t.platform,", deviceId:").concat(t.deviceId,">")}},{key:"apiKey",get:function(){return Q.shared.getConfiguration("shield",{apiKeys:tt}).apiKeys[t.platform]||"mbmhfdgflphg14wss50rny3ct"}}]),t}();!function(t){t[t.all=0]="all",t[t.linearPlayback=1]="linearPlayback"}(X||(X={}));var it,rt=X;!function(t){t.linear="linear",t.event="event"}(it||(it={}));var at,ot=it;!function(t){t.stitchedPreroll="stitchedPreroll"}(at||(at={}));var st,ut=at;!function(t){t.live="live",t.onDemand="onDemand"}(st||(st={}));var ct,dt=st;!function(t){t.nielsen="nielsen",t.comscore="comscore",t.conviva="conviva",t.heartbeats="heartbeats"}(ct||(ct={}));var lt,ht=ct;!function(t){t.shortform="shortform",t.longform="longform"}(lt||(lt={}));var pt,ft=lt;!function(t){t.audio="audio",t.video="video"}(pt||(pt={}));var vt,yt=pt;!function(t){t.pluto="pluto",t.graphQL="graphQL",t.cfa="cfa"}(vt||(vt={}));var gt,mt=vt;!function(t){t.open="OPEN",t.direct="DIRECT",t.mvpd="MVPD",t.isp="ISP",t.none="NONE"}(gt||(gt={}));var bt,wt=gt;!function(t){t.none="none",t.startSession="startSession",t.bam="bam",t.shield="shield",t.entitlement="entitlement"}(bt||(bt={}));var Pt=bt,It=function(){function t(t,e,n,i,r,a,o,s){this.url=t,this.type=e,this.hasEspnId3Heartbeats=n,this.hasNielsenWatermarks=i,this.hasPassThroughAds=r,this.commercialReplacement=a,this.startSessionUrl=o,this.variant=s}return t.fromObject=function(e){if(!e)return null;var n=e.url,i=e.type,r=e.hasEspnId3Heartbeats,a=e.hasNielsenWatermarks,o=e.hasPassThroughAds,s=e.commercialReplacement,u=e.startSessionUrl,c=e.variant;return new t(n,Pt[i],r,a,o,s,u,c)},t}(),At=function(){function t(t,e,n,i){this.id=t,this.type=e,this.name=n,this.resource=i}return t.fromObject=function(e){if(!e)return null;var n=ot[e.type];return new t(e.id,n,e.name,e.resource)},t}(),_t=function(){function t(t){this.url=t}return t.fromObject=function(e){return e&&e.url?new t(e.url):null},t}(),Tt=function(){function t(t){this.name=t}return Object.defineProperty(t.prototype,"logoUrl",{get:function(){return"https://secure.espncdn.com/watchespn/images/espnplus/packages/"+this.name+".png"},enumerable:!1,configurable:!0}),t.fromObject=function(e){return e?new t(e.name):null},t}(),St=function(){function t(t,e,n,i,r){this.id=t,this.title=e,this.duration=n,this.language=i||"en",this.source=r,this.description=null,this.authenticationTypes=[],this.mrss=null,this.seekInSeconds=null,this.tracking={},this.references={},this.network=null,this.streamType=null,this.supportedMediaCommands=rt.all,this.images=[],this.type=yt.video,this.packages=[],this.tier=null,this.entityType=null,this.isSyndicatable=null,this.brand=null,this.apiSource=null,this.adUnitId=null,this.cues=null,this.adTarget=null,this.show=null}return Object.defineProperty(t.prototype,"isLinear",{get:function(){return!!this.network&&this.network.type===ot.linear},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLive",{get:function(){return this.streamType===dt.live},enumerable:!1,configurable:!0}),t.fromObject=function(e){var n=It.fromObject(e.source),i=new t(e.id,e.title,e.duration,e.language,n);return i.authenticationTypes=e.authenticationTypes,i.description=e.description,i.images=(e.images||[]).map((function(t){return _t.fromObject(t)})),i.mrss=e.mrss,i.network=At.fromObject(e.network),i.seekInSeconds=e.seekInSeconds,i.streamType=dt[e.streamType],i.supportedMediaCommands=e.supportedMediaCommands,i.tracking=e.tracking,i.references=e.references,i.packages=(e.packages||[]).map((function(t){return Tt.fromObject(t)})),i.type=yt[e.type],i.entityType=ft[e.entityType],i.isSyndicatable=e.isSyndicatable,i.brand=e.brand,i.adUnitId=e.adUnitId,i.cues=e.cues,i.show=e.show,i.adTarget=e.adTarget,i},t.prototype.toString=function(){return"<MediaItem id:"+this.id+", title:"+this.title+", streamType:"+this.streamType+">"},t}();var kt,Et=function(){function t(t){var e=function(t){var e=t.split("?")[1],n={};if(e)for(var i=e.split("&"),r=0;r<i.length;r+=1){var a=i[r].split("=");n[a[0]]=a[1]}return n}(t);if(this.original=t,this.id=e.videoID||e.playID||e.clip||e.externalId,t.match("sportscenter")){this.gameId=e.playGameID,this.channel=e.playChannel,this.simulcastAiringId=e.simulcastAiringId;var n=parseInt(e.resumeTime,10);isNaN(n)||(this.resumeTime=n),this.eventId=e.eventId}this.source=e["x-source"],e.videoID?this.entityType=ft.shortform:this.entityType=ft.longform,this.type=yt.video}return t.prototype.toString=function(t){return t==mt.graphQL?"<MediaItemIdentifier id:"+this.id+", gameId:"+this.gameId+", channel:"+this.channel+", source:"+this.source+">":"<MediaItemIdentifier id:"+this.id+", source:"+this.source+">"},t.identifierStringForNetwork=function(t,e){return(e||mt.graphQL)==mt.graphQL?"sportscenter://x-callback-url/showWatchStream?playChannel="+t:"natgeo://playVideo?videoID="+t},t}();function Ct(t,e,n,i){if(!e)return{};var r,a,o,s=null;t===kt.natGeo?s=function(t){if(!t)return{};var e={},n=t.id,i=t.title,r=t.duration;return e.c_video_id_code=n,e.c_a_media_airdate="unknown",e.c_a_media_daypart="daytime",e.c_a_media_digitaldate="unknown",e.c_a_media_episode="none",e.c_a_media_feed="natgeo live",e.c_a_media_format="vod",e.c_a_media_genre="none",e.c_a_media_network="natgeo",e.c_a_media_originator="natgeo",e.c_a_media_pass_auth="none",e.c_a_media_pass_mvpd="none",e.c_a_media_rating="none",e.c_a_media_season="none",e.c_a_media_show=i,e.c_a_media_streamtype=pt.video,e.c_a_media_length=r,e}(e):(r=function(t,e,n){if(!t)return{};var i=t.duration,r=t.id,a=t.league,o=t.name,s=t.network,u=t.program,c=t.sport,d=t.startDateTime,l=t.tracking,h="1";n&&!0===n.hasEspnId3Heartbeats&&!1===n.hasPassThroughAds&&"SHARED INV"!==n.commercialReplacement&&(h="2");var p={type:"content"};if(p.assetid=l&&l.trackingId||r,p.program=o,p.title=o,p.clientid="us-600140",e===ft.longform){if(p.length=""+i,p.segB=a&&a.name||"No League",p.segC=""+(u&&u.code||"")+(c&&c.code||""),d){var f=new Date(d);p.airdate=f.getUTCFullYear().toString()+("0"+f.getUTCMonth()).slice(-2)+("0"+f.getUTCDate()).slice(-2)+" "+("0"+f.getUTCHours()).slice(-2)+":"+("0"+f.getUTCMinutes()).slice(-2)+":"+("0"+f.getUTCSeconds()).slice(-2)}p.isfullepisode="y",p.crossId1=l&&l.nielsenCrossId1||"",p.crossId2=s&&s.name||"",p.adloadtype=h,p.hasAds="1",p.progen="SE",p.vcid="b01"}return e===ft.shortform&&(p.accmethod="1",p.length=""+i,p.segA=o,p.segB="No League",p.segC="VOD",p.isfullepisode="n",p.crossId1="",p.adloadtype="1",p.vcid="c17",p.adloadtype="2"),p}(e,n,i),a=function(t,e){if(!t)return{};var n=t.id,i=t.duration,r=t.name,a=t.league,o=t.startDateTime,s=t.network,u=t.sport,c=t.status,d=t.tracking,l={};if(e===ft.longform)l.ns_st_cl=0,l.ns_st_ct="vc",!c||"live"!==c.toLowerCase()&&"over"!==c.toLowerCase()?(l.ns_st_cl=i,l.ns_st_ct="vc12",l.ns_st_pr="VOD",l.ns_st_ep=r):(l.ns_st_cl=0,l.ns_st_ct="vc13",l.ns_st_pr=r,l.ns_st_ep="*null"),l.c3="WATCHESPNLIVE",l.c6=a&&a.name?a||"No league":u&&u.code||"No Sport";else{l.ns_st_cl=i,l.ns_st_ct="vc11",l.ns_st_pr="VOD",l.ns_st_ep=r;var h=d||{},p=h.sportName,f=h.leagueName;l.c3="vod",l.c6=""+(f&&"no league"!==f.toLowerCase()?f:p||"No Sport")}if(l.ns_st_ti="*null",l.ns_st_ia="*null",l.ns_st_ce="*null",l.ns_st_ci=n,o){var v=new Date(o);l.ns_st_ddt=v.toDateString(),l.ns_st_tdt=v.toDateString()}return l.ns_st_st=s?s.id:"*null",l.ns_st_en="*null",l.ns_st_cn="1",l.ns_st_pn="1",l.ns_st_tp="1",l.ns_st_pu="ESPN",l.ns_st_cu="none",l.ns_st_ad="0",l.ns_st_ge="Sports",l}(e,n),o=function(t,e,n){if(!t)return{};var i=t.name,r=t.id,a=t.airingId,o=t.eventId,s=t.duration,u=t.network,c=t.status,d=t.sport,l=t.league,h={};h.contentId=r,a&&(h.airingId=a),o&&(h.eventId=""+o,h.eventName=i),u&&(h.network=u.id),e===ft.shortform?h.assetType="clip":!c||"live"!==c.toLowerCase()&&"over"!==c.toLowerCase()?h.assetType="vod":h.assetType="live";var p=i+" - "+r;return u&&u.type===ot.linear&&"live"===h.assetType&&(p=u.id),h.sport=d&&d.name||"Not Applicable",h.league=l&&l.name||"Not Applicable",h.appBrand=kt.espn,{assetName:p,duration:s,streamUrl:n&&n.url,custom:h}}(e,n,i),s=function(t,e){if(!t)return{};var n=t.duration,i=t.airingId,r=t.network,a=t.status,o=t.sport,s=t.league,u=t.name,c=t.program,d=t.startDateTime,l=t.tracking,h=t.originalPublishDate,p=t.expirationDate,f=t.lastModifiedDate,v=t.ad,y=t.coverageType,g=t.brands,m={};if(m.ContentDuration=n,e===ft.longform){if(m.CMSID=l&&l.name||u,m.isFullEpisode="y",i&&(m.AiringID=i),r&&(m.NetworkName=r.id,m.Channel=r.id),a&&(m.VideoType="REPLAY"===a?"replay":"live"),m.Sport=o&&o.name||"Not Applicable",m.SportCode=o&&o.code||"Not Applicable",m.League=s&&s.name||"Not Applicable",c&&c.code&&c.categoryCode?m.ProgramCode=c.categoryCode+c.code:m.ProgramCode="Not Applicable",m.IsStudio=c&&c.isStudio||"Not Applicable",d){var b=new Date(d);m.AirDate=b.toDateString(),m.AirTime=b.toTimeString()}if(Array.isArray(g)&&g.length){var w=g[0],P=w.id,I=w.name,A=w.type;m["a.media.asset"]=P,m["a.media.show"]=I,m["a.media.genre"]=A}}else if(e===ft.shortform){if(m.isFullEpisode="n",m.VideoType="vod",m.Sport=l&&l.sportName||"Not Applicable",m.League=l&&l.leagueName||"Not Applicable",m.ShowCode=v&&v.bundle||"Not Applicable",l&&l.name&&(m.CMSID=l.name),h){b=new Date(h);m.PublishDate=b.toISOString().substring(0,10),m.PublishTime=b.toISOString().substring(11)}if(p){b=new Date(p);m.ExpirationDate=b.toISOString()}if(f){b=new Date(f);m.DateLastModified=b.toISOString()}y&&(m.VideoTypeDetail=y)}return m}(e,n));var u={};return u[ht.nielsen]=r,u[ht.comscore]=a,u[ht.conviva]=o,u[ht.heartbeats]=s,u}function Ot(t,e,n){return t.sort((function(t,e){var n="PRIMARY"===t.tier?0:"SECONDARY"===t.tier?1:2,i="PRIMARY"===e.tier?0:"SECONDARY"===e.tier?1:2;return n<i?-1:n>i?1:0})).sort((function(t,n){var i=t.network&&t.network.id.toLowerCase()||"unknown",r=n.network&&n.network.id.toLowerCase()||"unknown",a=e.indexOf(i),o=e.indexOf(r);return-1===a&&(a=999),-1===o&&(o=999),a<o?-1:a>o?1:0})).sort((function(t,e){var i=t.language===n?0:1,r=e.language===n?0:1;return i<r?-1:i<r?1:0}))}!function(t){t.abc="abc",t.abcNews="abcnews",t.abcNewsLive="abcnewslive",t.abcOtv="abcotv",t.disney="dch",t.disneyJr="djr",t.disneyXD="dxd",t.disneyNow="dnow",t.espn="espn",t.espnFantasy="espnFantasy",t.oscar="oscar",t.freeform="ff",t.foxLatam="foxlatam",t.fxNow="fxnow",t.fx="fx",t.fxm="fxm",t.fxx="fxx",t.natGeoTV="natgeotv",t.natGeo="natgeo",t.natGeoWild="natgeowild",t.natgeoBrasil="natgeobrasil",t.unknown="000"}(kt||(kt={}));var Mt=["espn_ppv","espn_dtc","espn1","espn2","espn3","espnu","sec","espnews","espndeportes","longhorn","goalline","buzzerbeater","secplus","acc","accextra","espn_free","bam_dtc"],Dt=function(t,e,n,i){t==mt.graphQL?(this.serviceUrl=e||"https://web.archive.org/web/20210915144012/https://watch.graph.api.espn.com/api",this.apiKey=n||"d15c5790-7cb0-4fe1-8782-25f4698d0739",this.networkSortOrder=i||Mt):t==mt.cfa&&(this.serviceUrl=e||"https://web.archive.org/web/20210915144012/https://natgeo.entertainment.client.dtci.technology/v1/playback/video/id/mock")},Nt=function(){function t(){this.configuration_=t.defaultConfiguration}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(e,n){return E(this,void 0,void 0,(function(){return C(this,(function(i){switch(i.label){case 0:return[4,t.fetchMediaItems(e,n,this.configuration)];case 1:return[2,i.sent()]}}))}))},t.fetchMediaItems=function(e,n,i){return E(this,void 0,void 0,(function(){var r,a,o,s,u,c;return C(this,(function(d){switch(d.label){case 0:return r=e.map((function(t){return new Et(t)})),a=i.serviceUrl,o=i.apiKey,s=i.networkSortOrder,[4,A.all(r.map((function(e){return t.getPromiseMediaItems(e,a,o,n)})))];case 1:return u=d.sent(),(c=u.filter((function(t){return!(t instanceof Error)&&t instanceof St}))).length?[2,Ot(c,s,navigator.language)]:[2,null]}}))}))},t.getPromiseMediaItems=function(e,n,i,r){return E(this,void 0,void 0,(function(){var a,o,s,u,c,d,l,h,p,f,v,y;return C(this,(function(g){switch(g.label){case 0:a=function(t,e,n,i){var r="",a="",o="",s=i||"US";return t.entityType===ft.shortform?(r="VOD",o="{id name description authTypes language duration originalPublishDate expirationDate requiresLinearPlayback lastModifiedDate source { url authorizationType } image { url } tracking { name sportName leagueName } coverageType prerollSource:source(variant:PREROLL) { url authorizationType }ad { sport bundle } links { web } cerebroId syndicatable}",a='id:"'+t.id+'"'):(r="airing",o="{ id name description mrss:adobeRSS authTypes requiresLinearPlayback status:type startDateTime endDateTime duration source(authorization: SHIELD) { url authorizationType hasEspnId3Heartbeats hasNielsenWatermarks hasPassThroughAds commercialReplacement startSessionUrl } network { id type name adobeResource } image { url } sport { name code uid } league { name uid } program { code categoryCode isStudio } seekInSeconds simulcastAiringId airingId tracking { nielsenCrossId1 trackingId } eventId packages { name } language tier feedName brands { id name type } }",t.id?a='id:"'+t.id+'"':t.channel?(r="airings",a='networks:["'+t.channel+'"],type:LIVE'):t.gameId&&(r="airings",a='eventId:"'+(t.eventId||t.gameId)+'"')),e+"?apiKey="+n+"&query="+encodeURIComponent("{ "+r+"("+a+',countryCode:"'+s+'",deviceType:SETTOP,tz:"Z") '+o+" }")}(e,n,i,r.countryCode),g.label=1;case 1:return g.trys.push([1,4,,5]),[4,_(a)];case 2:return[4,g.sent().json()];case 3:if(o=g.sent(),s=o.data.airing,(u=o.data.airings)&&(c=e.simulcastAiringId?function(t){return t.simulcastAiringId===e.simulcastAiringId}:function(){return!0},s=u.filter(c)[0]),d=o.data.VOD,!(l=s||d))throw new Error("No results found.");if(h=function(t,e,n){var i=t.id,r=t.name,a=t.description,o=t.duration,s=t.image,u=t.eventId,c=t.requiresLinearPlayback,d=t.authTypes,l=t.source,h=t.prerollSource,p=t.packages,f=t.language,v=t.mrss,y=t.seekInSeconds,g=t.tracking,m=t.simulcastAiringId,b=t.network,w=t.status,P=t.cerebroId,I=t.syndicatable,A=w&&("LIVE"===w.toUpperCase()||"OVER"===w.toUpperCase())?dt.live:dt.onDemand,_=function(t){switch(t){case"NONE":return Pt.none;case"START_SESSION":return Pt.startSession;case"BAM":return Pt.bam;case"SHIELD":return Pt.shield}}(l.authorizationType),T=new It(l.url,_,l.hasEspnId3Heartbeats,l.hasNielsenWatermarks,l.hasPassThroughAds,l.commercialReplacement,l.startSessionUrl);n&&n.sourceVariant===ut.stitchedPreroll&&h&&((T=new It(h.url,Pt.none)).variant=ut.stitchedPreroll);var S=c?rt.linearPlayback:rt.all,k=g&&g.trackingId||i,E=new St(i,r,o,f,T);if(E.authenticationTypes=d.map((function(t){switch(t){case"DIRECT":return wt.direct;case"OPEN":return wt.open;case"MVPD":return wt.mvpd;case"ISP":return wt.isp;default:return wt.none}})),E.description=a,E.isSyndicatable=I,s&&s.url&&E.images.push(new _t(s.url)),E.mrss=v,b){var C="linear"===b.type?ot.linear:ot.event;E.network=new At(b.id,C,b.name,b.adobeResource)}return E.seekInSeconds=y,E.streamType=A,E.supportedMediaCommands=S,E.brand=E.brand?E.brand:"espn",E.tracking=Ct(E.brand,t,e,T),E.references={eventId:u,simulcastAiringId:m,trackingId:k,cerebroId:P},E.type=yt.video,E.entityType=e,E.apiSource=mt.graphQL,E.packages=(p||[]).map((function(t){return new Tt(t.name)})),E}(l,e.entityType,r),e.resumeTime&&(h.seekInSeconds=e.resumeTime),!h.source.url){if(p="OVER"===l.status.toUpperCase(),f=l.network&&l.network.type===ot.linear,v=l.network&&l.network.id,p&&f&&v)return[2,t.retryGetMediaItems(v,n,i,r)];throw new Error("No playable url")}return[2,h];case 4:return y=g.sent(),P.warn("Failed to retrieve MediaItem from GraphQL: "+y),[2,null];case 5:return[2]}}))}))},t.retryGetMediaItems=function(e,n,i,r){return E(this,void 0,void 0,(function(){var a,o,s,u;return C(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),a=Et.identifierStringForNetwork(e,mt.graphQL),o=new Et(a),[4,t.getPromiseMediaItems(o,n,i,r)];case 1:if((s=c.sent())&&s instanceof St==!0)return[2,s];throw new Error("Retry fetchMediaItems failed with "+e);case 2:return u=c.sent(),P.warn("MediaItem is over and retry failed: "+u),[2,null];case 3:return[2]}}))}))},t.defaultConfiguration=new Dt(mt.graphQL),t}();var Ut,jt=function(){function t(){this.configuration_=t.defaultConfiguration}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(e,n){return E(this,void 0,void 0,(function(){return C(this,(function(i){switch(i.label){case 0:return[4,t.fetchMediaItems(e,n,this.configuration)];case 1:return[2,i.sent()]}}))}))},t.fetchMediaItems=function(e,n,i){return E(this,void 0,void 0,(function(){var n,r;return C(this,(function(a){switch(a.label){case 0:return n=e.map((function(t){return new Et(t)})),r=i.serviceUrl,[4,A.all(n.map((function(e){return t.getPromiseMediaItem(e,r)})))];case 1:return[2,a.sent().filter((function(t){return!(t instanceof Error)&&t instanceof St}))]}}))}))},t.getPromiseMediaItem=function(t,e){return E(this,void 0,void 0,(function(){var n,i,r;return C(this,(function(a){switch(a.label){case 0:n=e.replace("videoID",t.id),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,_(n)];case 2:return[4,a.sent().json()];case 3:return i=a.sent(),[2,function(t){var e=t.id,n=t.title,i=t.description,r=t.duration,a=t.source,o=t.type,s=t.entityType,u=t.streamType,c=t.authenticationTypes,d=t.language,l=t.network,h=t.brand,p=t.images,f=s,v=a.type,y=new It(a.url,v),g=new St(e,n,r,d,y);return g.authenticationTypes=c.map((function(t){switch(t){case"DIRECT":return wt.direct;case"OPEN":return wt.open;case"MVPD":return wt.mvpd;case"ISP":return wt.isp;default:return wt.none}})),g.description=i,l&&(g.network=new At(l.id,l.type,l.name,l.resource)),g.streamType=u,g.brand=h,g.tracking=Ct(g.brand,t,f,y),g.images=p,g.type=o,g.entityType=f,g.apiSource=mt.cfa,g}(i)];case 4:return r=a.sent(),P.warn("Failed to retrieve MediaItem from CFA: "+r),[2,null];case 5:return[2]}}))}))},t.defaultConfiguration=new Dt(mt.cfa),t}(),Lt=function(){function t(){}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(t,e){return E(this,void 0,void 0,(function(){var n,i;return C(this,(function(r){switch(r.label){case 0:return n=e||{sourceVariant:null},t[0].match("natgeo")?((i=new jt).configuration=this.configuration||i.configuration,[4,i.getMediaItems(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return(i=new Nt).configuration=this.configuration||i.configuration,[4,i.getMediaItems(t,n)];case 3:return[2,r.sent()]}}))}))},t}(),xt=new function t(n){e(this,t),this.intervals=n}({intervals:{DEFAULT:2,ESPN_PLUS:0,ESPN_PLUS_MLB:0,ESPN_PLUS_NHL:0}}),Rt=function(){function t(){e(this,t),this.configuration=xt}return i(t,[{key:"configuration",get:function(){return this._configuration},set:function(t){this._configuration=t}},{key:"shouldPreroll",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.configuration.intervals.DEFAULT||0,r=(n||[]).filter((function(t){return t in e.configuration.intervals})).map((function(t){return e.configuration.intervals[t]}));0===r.length&&r.push(i);var a=Math.min.apply(Math,g(r));return a>0&&t.prerollCount>=a-1}}],[{key:"prerollCount",get:function(){var t=localStorage.getItem("PrerollManager.prerollCount");try{return JSON.parse(t)||0}catch(t){return 0}},set:function(t){localStorage.setItem("PrerollManager.prerollCount",JSON.stringify(t))}}]),t}(),Bt=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"configuration",get:function(){var t=Q.shared.getConfiguration("preRoll",xt);return P.debug("PrerollManager.getConfiguration ".concat(JSON.stringify(t))),t},set:function(t){y(c(r.prototype),"configuration",t,this,!0)}}],[{key:"prerollCount",get:function(){return Rt.prerollCount},set:function(t){Rt.prerollCount=t}}]),r}(Rt),Ht=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"name",get:function(){return this.title}},{key:"eventId",get:function(){return this.references.eventId}},{key:"trackingId",get:function(){return this.references.trackingId}},{key:"simulcastAiringId",get:function(){return this.references.simulcastAiringId}},{key:"airingId",get:function(){return this.id}},{key:"requiresLinearPlayback",get:function(){return this.supportedMediaCommands===rt.linearPlayback}},{key:"convivaContentMetadata",get:function(){return this.tracking&&this.tracking[ht.conviva]}},{key:"trackingInfo",get:function(){return this.tracking&&this.tracking[ht.heartbeats]}},{key:"nielsenMetadata",get:function(){return this.tracking&&this.tracking[ht.nielsen]}}],[{key:"fromObject",value:function(t){var e=new r(t.id,t.title,t.duration,t.language,t.source);if(a(e,St.fromObject(t)),e.source){var n=function(t){switch(t){case Pt.bam:return"BAM";case Pt.none:return"NONE";case Pt.shield:return"SHIELD";case Pt.startSession:return"START_SESSION";default:return null}}(e.source.type);e.source.authorizationType=n}return e}}]),r}(St),zt=function(t){u(r,t);var n=h(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt.graphQL;return e(this,r),(t=n.call(this)).prerollManager=new Bt,t.apiSource=i,t.configurationKey=i===mt.graphQL?"graphqlapi":null,t.configuration=new Dt(i),t}return i(r,[{key:"configuration",get:function(){var t=Q.shared.getConfiguration(this.configurationKey,r.defaultConfiguration);return P.debug("MediaItemAPI.getConfiguration ".concat(JSON.stringify(t))),t},set:function(t){y(c(r.prototype),"configuration",t,this,!0)}},{key:"getMediaItems",value:function(t,e){var n=e||{},i=n.entitlements||[];return this.prerollManager.shouldPreroll(i)&&(n.sourceVariant=ut.stitchedPreroll),f(c(r.prototype),"getMediaItems",this).call(this,t,n).then((function(t){var e=t||[],n=e.filter((function(t){return t.source.variant===ut.stitchedPreroll})).length;return n>0?Bt.prerollCount=0:Bt.prerollCount+=e.length-n,e.map((function(t){return Ht.fromObject(t)}))}))}}]),r}(Lt),Ft={device:{advertisingId:"0000-0000-0000-0000-0000",devType:"web"}};!function(t){t.localStorage="LOCAL_STORAGE",t.sessionStorage="SESSION_STORAGE"}(Ut||(Ut={}));var Vt,Kt=Ut,Gt=function(){function t(t,e,n,i){this.id=t,this.name=e,this.logoUrl=n,this.websiteUrl=i}return t.prototype.toString=function(){return"<AuthenticatedProvider id:"+this.id+", name:"+this.name+", logoUrl:"+this.logoUrl+", websiteUrl:"+this.websiteUrl+">"},t.fromObject=function(e){return new t(e.id,e.name,e.logoUrl,e.websiteUrl)},t}();!function(t){t.token="token",t.tokenType="tokenType",t.resource="resource",t.requestor="requestor",t.fullToken="fullToken"}(Vt||(Vt={}));var Jt,qt,Yt=function(){function t(t,e,n,i){void 0===i&&(i={}),this.authenticationType=t,this.authenticatedProvider=e,this.authenticatedIdentity=n,this.customData=i}return t.CustomDataKey=Vt,t}(),Wt=function(t,e){this.success=t,this.payload=e};(Jt=t.AdProvider||(t.AdProvider={})).standard="default",Jt.googleAdManager="gam",(qt=t.AdEnvironment||(t.AdEnvironment={})).standard="default",qt.prod="prod",qt.development="dev";function Qt(t,e){void 0===e&&(e=4e3);var n="undefined"!=typeof window&&window,i=n&&n.document,r=i&&i.getElementsByTagName&&i.getElementsByTagName("head")[0],a=i&&i.body,o=r||a;return o&&t?new A((function(n,i){var r=document.createElement("script"),a=[],s=null,u=function(){a.forEach((function(t){return t()})),a=null,clearTimeout(s),s=null},c=function(t){u(),n(t)},d=function(t){u(),i(t)};r.type="text/javascript",r.src=t,r.addEventListener("load",c),a.push((function(){return r.removeEventListener("load",c)})),r.addEventListener("error",d),a.push((function(){return r.removeEventListener("error",d)})),s=setTimeout((function(){return d(new Error("Timeout ("+e+") while fetching "+t))}),4e3),o.appendChild(r)})):A.reject()}var Xt,Zt,$t,te=Object.freeze({}),ee=Object.freeze(""),ne="undefined"!=typeof window&&window,ie=function(t){ne&&ne.console&&ne.console.error(t)},re=function(){return E(this,void 0,void 0,(function(){var t,e,n;return C(this,(function(i){switch(i.label){case 0:if(t=Xt||ne.goog&&ne.goog.pal,e=ne&&ne.bc,t)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Qt("https://web.archive.org/web/20210915144012/https://imasdk.googleapis.com/pal/sdkloader/pal.js")];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),ie(n),[3,4];case 4:(t=ne.goog&&ne.goog.pal)&&(Xt=t),!e&&ne.bc&&(ne.bc=null),i.label=5;case 5:return[2,t||te]}}))}))};function ae(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),void 0===i&&(i=re),E(this,void 0,void 0,(function(){var r,a,o,s,u,c,d,l;return C(this,(function(h){switch(h.label){case 0:if(r=n&&$t)return[3,10];a=void 0,o=void 0,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,i()];case 2:return(s=h.sent())&&(a=s.NonceLoader,o=s.NonceRequest),[3,4];case 3:return u=h.sent(),ie(u),[3,4];case 4:if(n&&$t||!a||!o)return[3,10];c=void 0,h.label=5;case 5:return h.trys.push([5,7,,8]),Zt=!Zt||e?new a:Zt,d=Object.assign(new o,function(t){var e=t||new ce,n=O(String(e.videoPlayerSize||"640x480").split("x"),2),i=n[0],r=n[1];return{adWillAutoPlay:e.isAutoplay,adWillPlayMuted:e.isMute,continuousPlayback:"vod"===e.videoDeliveryMethod,descriptionUrl:e.descriptionUrl||ee,iconsSupported:e.vastIconsSupported,playerType:e.videoPlayerType||ee,playerVersion:e.videoPlayerVersion||ee,ppid:e.ppid||e.swid||ee,videoHeight:parseInt(r,10),videoWidth:parseInt(i,10)}}(t)),[4,Zt.loadNonceManager(d)];case 6:return c=h.sent(),[3,8];case 7:return l=h.sent(),ie(l),[3,8];case 8:return c?[4,c.getNonce()]:[3,10];case 9:(r=h.sent())&&($t=r),h.label=10;case 10:return[2,r]}}))}))}var oe,se=function(t){return null===t?null:t?"1":"0"},ue=function(t,e){return null!=t?t:e},ce=function(){function e(e,n,i,r,a,o,s,u,c,d,l,h,p,f,v,y,g,m,b,w,P,I,A,_,T,S,k,E,C,O,M,D,N,U,j,L,x,R,B,H,z,F,V,K,G,J,q,Y,W,Q,X,Z,$,tt,et,nt,it,rt,at,ot,st,ut,ct,dt,lt,ht,pt,ft,vt){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a="espn"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===d&&(d=null),void 0===l&&(l=null),void 0===h&&(h=null),void 0===p&&(p=null),void 0===f&&(f=null),void 0===v&&(v=null),void 0===y&&(y=null),void 0===g&&(g=!1),void 0===m&&(m=null),void 0===b&&(b=null),void 0===w&&(w=!1),void 0===P&&(P=!1),void 0===I&&(I=null),void 0===A&&(A=null),void 0===_&&(_=null),void 0===T&&(T=null),void 0===S&&(S=null),void 0===k&&(k=null),void 0===E&&(E=null),void 0===C&&(C=null),void 0===O&&(O=!1),void 0===M&&(M=null),void 0===D&&(D=null),void 0===N&&(N=null),void 0===U&&(U=null),void 0===j&&(j=null),void 0===L&&(L=null),void 0===x&&(x=null),void 0===R&&(R=null),void 0===B&&(B=null),void 0===H&&(H=null),void 0===z&&(z=null),void 0===F&&(F=null),void 0===V&&(V=null),void 0===K&&(K=null),void 0===G&&(G=null),void 0===J&&(J=null),void 0===q&&(q=null),void 0===Y&&(Y=null),void 0===W&&(W=null),void 0===Q&&(Q=null),void 0===X&&(X=null),void 0===Z&&(Z=null),void 0===$&&($=null),void 0===tt&&(tt=null),void 0===et&&(et=!1),void 0===nt&&(nt=null),void 0===it&&(it=null),void 0===rt&&(rt=null),void 0===at&&(at=null),void 0===ot&&(ot={}),void 0===st&&(st=null),void 0===ut&&(ut=null),void 0===ct&&(ct=null),void 0===dt&&(dt=null),void 0===lt&&(lt=t.AdEnvironment.standard),void 0===ht&&(ht=t.AdProvider.standard),void 0===pt&&(pt=null),void 0===ft&&(ft=null),void 0===vt&&(vt=null),this.aff=e,this.alt=n,this.accessLevel=i,this.adRule=r,this.an=a,this.beacType=o,this.collection=s,this.cbp=u,this.descriptionUrl=c,this.edition=d,this.fcap=l,this.hashedIp=h,this.hl=p,this.isAuth=f,this.idType=v,this.impl=y,this.isLat=g,this.iu=m,this.msid=b,this.npa=w,this.ltd=P,this.nlsnPlat=I,this.output=A,this.palNonce=_,this.playlist=T,this.ppid=S,this.rdid=k,this.tags=E,this.transId=C,this.tfcd=O,this.url=M,this.varResolution=D,this.vpa=N,this.vpi=U,this.vadFormat=j,this.vpmute=L,this.authenticationProvider=x,this.bundleId=R,this.deviceOS=B,this.deviceType=H,this.isAutoplay=z,this.isMute=F,this.language=V,this.nielsenAppId=K,this.nielsenDeviceGroup=G,this.noAds=J,this.objectId=q,this.pageType=Y,this.platform=W,this.stitchingProvider=Q,this.swid=X,this.testAdTargeting=Z,this.tag=$,this.unid=tt,this.vastIconsSupported=et,this.videoDeliveryMethod=nt,this.videoPlayerSize=it,this.videoPlayerType=rt,this.videoPlayerVersion=at,this.userInfo=ot,this.isDoNotTrackEnabled=st,this.pp=ut,this.cmsid=ct,this.vid=dt,this.adEnvironment=lt,this.adProvider=ht,this.usPrivacy=pt,this.additionalConsent=ft,this.rdp=vt}return e.prototype.merge=function(e){return e?(this.adRule=e.adRule||this.adRule,this.an=e.an||this.an,this.descriptionUrl=e.descriptionUrl||this.descriptionUrl,this.fcap=e.fcap||this.fcap,this.hashedIp=e.hashedIp||this.hashedIp,this.hl=e.hl||this.hl,this.idType=e.idType||this.idType,this.isLat=ue(e.isLat,this.isLat),this.iu=e.iu||this.iu,this.msid=e.msid||this.msid,this.npa=ue(e.npa,this.npa),this.ltd=ue(e.ltd,this.ltd),this.output=e.output||this.output,this.ppid=e.ppid||this.ppid,this.rdid=e.rdid||this.rdid,this.rdp=e.rdp||this.rdp,this.tfcd=e.tfcd||this.tfcd,this.url=e.url||this.url,this.vpa=e.vpa||this.vpa,this.vpi=e.vpi||this.vpi,this.vadFormat=e.vadFormat||this.vadFormat,this.vpmute=ue(e.vpmute,this.vpmute),this.authenticationProvider=e.authenticationProvider||this.authenticationProvider,this.bundleId=e.bundleId||this.bundleId,this.deviceOS=e.deviceOS||this.deviceOS,this.deviceType=e.deviceType||this.deviceType,this.isAutoplay=ue(e.isAutoplay,this.isAutoplay),this.isMute=ue(e.isMute,this.isMute),this.language=e.language||this.language,this.palNonce=e.palNonce||this.palNonce,this.nielsenAppId=e.nielsenAppId||this.nielsenAppId,this.nielsenDeviceGroup=e.nielsenDeviceGroup||this.nielsenDeviceGroup,this.noAds=ue(e.noAds,this.noAds),this.objectId=e.objectId||this.objectId,this.platform=e.platform||this.platform,this.stitchingProvider=e.stitchingProvider||this.stitchingProvider,this.swid=e.swid||this.swid,this.tags=e.tags||this.tags,this.testAdTargeting=e.testAdTargeting||this.testAdTargeting,this.unid=e.unid||this.unid,this.alt=e.alt||this.alt,this.beacType=e.beacType||this.beacType,this.transId=e.transId||this.transId,this.accessLevel=e.accessLevel||this.accessLevel,this.varResolution=e.varResolution||this.varResolution,this.nlsnPlat=e.nlsnPlat||this.nlsnPlat,this.tag=e.tag||this.tag,this.aff=e.aff||this.aff,this.playlist=e.playlist||this.playlist,this.cbp=e.cbp||this.cbp,this.collection=e.collection||this.collection,this.impl=e.impl||this.impl,this.isAuth=e.isAuth||this.isAuth,this.vastIconsSupported=ue(e.vastIconsSupported,this.vastIconsSupported),this.videoDeliveryMethod=e.videoDeliveryMethod||this.videoDeliveryMethod,this.videoPlayerSize=e.videoPlayerSize||this.videoPlayerSize,this.videoPlayerType=e.videoPlayerType||this.videoPlayerType,this.videoPlayerVersion=e.videoPlayerVersion||this.videoPlayerVersion,this.isDoNotTrackEnabled=ue(e.isDoNotTrackEnabled,this.isDoNotTrackEnabled),this.pp=e.pp||this.pp,this.cmsid=e.cmsid||this.cmsid,this.usPrivacy=e.usPrivacy||this.usPrivacy,this.additionalConsent=e.additionalConsent||this.additionalConsent,this.vid=e.vid||this.vid,this.userInfo?Object.assign(this.userInfo,e.userInfo):this.userInfo=e.userInfo,this.adEnvironment=e.adEnvironment!==t.AdEnvironment.standard?e.adEnvironment:this.adEnvironment,this.adProvider=e.adProvider!==t.AdProvider.standard?e.adProvider:this.adProvider,this):this},e.prototype.dictionaryForStartSession=function(){var e={};return e["ad.tfcd"]=se(this.tfcd),e["ad.is_lat"]=se(this.isLat),e["ad.idtype"]=this.idType,e["ad.rdid"]=this.rdid,e["ad.ppid"]=this.ppid||this.swid,e["ad.description_url"]=this.descriptionUrl,e["ad.hl"]=this.hl,e["ad.paln"]=this.palNonce,e["ad.npa"]=se(this.npa),e["ad.ltd"]=se(this.ltd),e["ad.msid"]=this.msid,e["ad.an"]=this.an,e["ad.url"]=this.url,e["ad.us_privacy"]=this.usPrivacy,e["ad.cust_params.d_us_privacy"]=this.usPrivacy,e["ad.rdp"]=null!==this.rdp?this.rdp:"1YYY"===this.usPrivacy?"1":null,e.authp=this.authenticationProvider,e.bundleId=this.bundleId,e.devOS=this.deviceOS,e.devType=this.deviceType,e.fcap=this.fcap,e.isAutoplay=se(this.isAutoplay),e.isMute=se(this.isMute),e.nlsnAppID=this.nielsenAppId,e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,this.adEnvironment!==t.AdEnvironment.standard&&(e.adEnv=this.adEnvironment),this.adProvider!==t.AdProvider.standard&&(e.adProvider=this.adProvider),Object.assign(e,this.userInfo),Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),e},e.prototype.dictionaryForBrightcove=function(){var t={};t.bundleId=this.bundleId,t.devOS=this.deviceOS,t.devType=this.deviceType,t.isAutoplay=se(this.isAutoplay),t.isMute=se(this.isMute),t.plt=this.platform,t.swid=this.swid,t.vps=this.videoPlayerSize,t.d_id=this.rdid,t.vdm=this.videoDeliveryMethod||"vod",t.stp=this.stitchingProvider||"brightcove";var e=Object.keys(t).filter((function(e){return null!==t[e]})).map((function(e){return e+"="+t[e]})).join("&"),n={};return n.UMADPARAMiu=this.iu,n.UMADPARAMis_lat=se(this.isLat),n.UMADPARAMidtype=this.idType,n.UMADPARAMrdid=this.rdid,n.UMADPARAMppid=this.ppid||this.swid,n.UMADPARAMdescription_url=this.descriptionUrl,n.UMADPARAMhl=this.hl,n.UMADPARAMnpa=se(this.npa),n.UMADPARAMltd=se(this.ltd),n.UMADPARAMmsid=this.msid,n.UMADPARAMan=this.an,n.UMADPARAMurl=this.url,n.UMADPARAMvpa=se(this.vpa),n.UMADPARAMvpmute=se(this.vpmute),n.UMPTPARAMcust_params=e,Object.assign(n,this.userInfo),Object.keys(n).forEach((function(t){return null===n[t]&&delete n[t]})),n},e.prototype.dictionaryForAdEngine=function(){var e={};switch(e.sect=this.iu,e.npa=se(this.npa),e.ltd=se(this.ltd),e.lat=se(this.isLat),e.idtype=this.idType,e.devId=this.rdid,e.ppid=this.ppid||this.swid,e.app=this.an,e.tfcd=se(this.tfcd),e.devOS=this.deviceOS,e.devType=this.deviceType,e.isAutoplay=se(this.isAutoplay),e.isMute=se(this.isMute),e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,e.bundle=this.msid,e.hl=this.hl,e.UID=this.swid,e.vdm=this.videoDeliveryMethod,e.url=this.url,this.adEnvironment){case t.AdEnvironment.development:e.env="qa";break;case t.AdEnvironment.prod:e.env="prod";break;case t.AdEnvironment.standard:}switch(this.adProvider){case t.AdProvider.googleAdManager:e.ads="google";break;case t.AdProvider.standard:}return Object.assign(e,this.userInfo),Object.keys(e).forEach((function(t){return null===e[t]&&delete e[t]})),e},e.prototype.dictionaryForImaSdk=function(){var e={};e.authp=this.authenticationProvider,e.d_us_privacy=this.usPrivacy,e.devOS=this.deviceOS,e.devType=this.deviceType,e.ed=this.edition,e.hip=this.hashedIp,e.isAutoplay=se(this.isAutoplay),e.isDnt=se(this.isDoNotTrackEnabled),e.isMute=se(this.isMute),e.lang=this.language,e.nlsnAppID=this.nielsenAppId,e.nlsnDevGrp=this.nielsenDeviceGroup,e.noad=this.noAds,e.objid=this.objectId,e.plt=this.platform,e.swid=this.swid,e.tag=this.tags,e.tstAdTarg=this.testAdTargeting,e.unid=this.unid,e.vdm=this.videoDeliveryMethod||"vod",e.vps=this.videoPlayerSize;var n=Object.keys(e).filter((function(t){return null!==e[t]})).map((function(t){return t+"="+e[t]})).join("&"),i={};return i.ad_rule=this.adRule,i.cmsid=this.cmsid,i.description_url=this.descriptionUrl,i.hl=this.hl,i.iu=this.iu,i.npa=se(this.npa),i.output=this.output,i.ltd=se(this.ltd),i.pp=this.pp,i.ppid=this.ppid,i.rdp=this.rdp,i.tfcd=se(this.tfcd),i.us_privacy=this.usPrivacy,i.addtl_consent=this.additionalConsent,i.vid=this.vid,i.vpa=se(this.vpa),i.cust_params=n,i.gdfp_req="1",i.env="vp",i.sz="640x480",this.adEnvironment!==t.AdEnvironment.standard&&(i.adEnv=this.adEnvironment),Object.keys(i).forEach((function(t){return null===i[t]&&delete i[t]})),i},e.prototype.dictionaryForEntertainment=function(){var t={};t.ed=this.edition,t.devOS=this.deviceOS,t.devType=this.deviceType,t.hip=this.hashedIp,t.isAutoplay=se(this.isAutoplay),t.isDnt=se(this.isDoNotTrackEnabled),t.isMute=se(this.isMute),t.lang=this.language,t.nlsnAppID=this.nielsenAppId,t.nlsnDevGrp=this.nielsenDeviceGroup,t.nlsnPlat=this.nlsnPlat,t.noad=this.noAds,t.objid=this.objectId,t.plt=this.platform,t.swid=this.swid||this.ppid,t.tag=this.tags,t.tstAdTarg=this.testAdTargeting,t.unid=this.unid,t.vdm=this.videoDeliveryMethod||"vod",t.vps=this.videoPlayerSize,t.alt=this.alt,t.beacType=this.beacType,t.transId=this.transId,t.accesslevel=this.accessLevel,t.isAuth=this.isAuth,t.fcap=this.fcap,t.var=this.varResolution,t.tag=this.tag,t.aff=this.aff,t.authp=this.authenticationProvider,t.playlist=this.playlist,t.cbp=this.cbp,t.collection=this.collection,t.impl=this.impl;var e=Object.keys(t).filter((function(e){return null!==t[e]})).map((function(e){return e+"="+t[e]})).join("&"),n={};return n.ad_rule=this.adRule,n.cmsid=this.cmsid,n.description_url=this.descriptionUrl,n.hl=this.hl,n.iu=this.iu,n.npa=se(this.npa),n.output=this.output,n.ltd=se(this.ltd),n.pp=this.pp,n.ppid=this.ppid,n.tfcd=se(this.tfcd),n.vid=this.vid,n.vpa=se(this.vpa),n.cust_params=e,n.output=this.output,n.tfcd=this.tfcd,n.vad_format=this.vadFormat,n.vpi=this.vpi,n.url=this.url,n.gdfp_req="1",n.env="vp",n.sz="640x480",Object.keys(n).forEach((function(t){return null===n[t]&&delete n[t]})),n},e.ppidForSwid=function(t){return t},e.getGooglePalNonce=ae,e}(),de=function(){function t(t,e){this.id=t,this.tier=e}return t.prototype.toString=function(){return"<AuthenticatedPackage id:"+this.id+", tier:"+this.tier+">"},t.fromObject=function(e){return new t(e.id,e.tier)},t}();!function(t){t.localStorage="LOCAL_STORAGE",t.sessionStorage="SESSION_STORAGE"}(oe||(oe={}));var le,he=function(){function t(t,e,n,i){this.id=t,this.name=e,this.logoUrl=n,this.websiteUrl=i}return t.prototype.toString=function(){return"<AuthenticatedProvider id:"+this.id+", name:"+this.name+", logoUrl:"+this.logoUrl+", websiteUrl:"+this.websiteUrl+">"},t.fromObject=function(e){return new t(e.id,e.name,e.logoUrl,e.websiteUrl)},t}();!function(t){t.token="token",t.tokenType="tokenType",t.resource="resource",t.requestor="requestor",t.fullToken="fullToken"}(le||(le={}));var pe,fe,ve=function(){function t(t,e,n,i){void 0===i&&(i={}),this.authenticationType=t,this.authenticatedProvider=e,this.authenticatedIdentity=n,this.customData=i}return t.CustomDataKey=le,t}(),ye=function(t,e){this.success=t,this.payload=e};!function(t){t.standard="default",t.googleAdManager="gam"}(pe||(pe={})),function(t){t.standard="default",t.prod="prod",t.development="dev"}(fe||(fe={}));var ge=function(){function t(t,e){this.id=t,this.tier=e}return t.prototype.toString=function(){return"<AuthenticatedPackage id:"+this.id+", tier:"+this.tier+">"},t.fromObject=function(e){return new t(e.id,e.tier)},t}();function me(t,e,n){if(!t||!e||!n)return t;var i="</item></channel></rss>",r=-1;return-1!==(r=t.indexOf(i))&&-1===t.indexOf("shield:affiliateId")&&(t=t.slice(0,r)+"<shield:affiliateId>"+e+"</shield:affiliateId>"+t.slice(r)),-1!==(r=t.indexOf(i))&&-1===t.indexOf("shield:airingId")&&-1!==t.indexOf("shield:affiliateId")&&(t=t.slice(0,r)+"<shield:airingId>"+n+"</shield:airingId>"+t.slice(r)),t}var be,we=new function(t,e,n,i){this.preauthorizeNetworksEnabled=t,this.preauthorizeNetworks=e,this.preauthorizeNetworksMapping=n,this.adobeAuthErrorRegex=i}(!1,[],{},"^$|^null$|^noAuthz$|^[\\d]*.*UPDA$|^BAD_RESPONSE$"),Pe=(function(){function t(t,e,n,i){void 0===i&&(i={}),this.partner=t,this.platform=e,this.requestorId=n,this.options=i,this.adobePass=null,this.providerDataSource=null,this.configuration=we}Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAuthenticated",{get:function(){return"true"===localStorage.getItem("AdobePassAuthenticator.isAuthenticated")},set:function(t){localStorage.setItem("AdobePassAuthenticator.isAuthenticated",JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedIdentity",{get:function(){return localStorage.getItem("AdobePassAuthenticator.authenticatedIdentity")},set:function(t){t?localStorage.setItem("AdobePassAuthenticator.authenticatedIdentity",t):localStorage.removeItem("AdobePassAuthenticator.authenticatedIdentity")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedPackage",{get:function(){var t=localStorage.getItem("AdobePassAuthenticator.authenticatedPackage");try{return ge.fromObject(JSON.parse(t))}catch(t){return null}},set:function(t){t?localStorage.setItem("AdobePassAuthenticator.authenticatedPackage",JSON.stringify(t)):localStorage.removeItem("AdobePassAuthenticator.authenticatedPackage")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedProvider",{get:function(){var t=localStorage.getItem("AdobePassAuthenticator.authenticatedProvider");try{return he.fromObject(JSON.parse(t))}catch(t){return null}},set:function(t){t?localStorage.setItem("AdobePassAuthenticator.authenticatedProvider",JSON.stringify(t)):localStorage.removeItem("AdobePassAuthenticator.authenticatedProvider")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasPreviouslyAuthenticated",{get:function(){return"true"===localStorage.getItem("AdobePassAuthenticator.wasPreviouslyAuthenticated")||!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"preauthorizedResources",{get:function(){if(!this.isAuthenticated)return[];var t=localStorage.getItem("AdobePassAuthenticator.preauthorizedResources");try{return JSON.parse(t)}catch(t){return[]}},enumerable:!1,configurable:!0}),t.prototype.checkAuthentication=function(){var t=this;P.debug("AdobePassAuthenticator.checkAuthentication");var e=this.adobePass;return e?e.checkAuthentication().then((function(n){return t.isAuthenticated=n,n?(localStorage.setItem("AdobePassAuthenticator.wasPreviouslyAuthenticated","true"),t.getPreauthorizedResources().then((function(t){localStorage.setItem("AdobePassAuthenticator.preauthorizedResources",JSON.stringify(t))})),e.getUserMetadata().then((function(e){var n=e.data,i=n.upstreamUserID,r=n.mvpd,a=n.packageId,o=n.tier;return t.authenticatedIdentity=i,(a||o)&&(t.authenticatedPackage=new ge(a,o)),t.providerDataSource?t.providerDataSource.getProvider(r).then((function(e){var n=e.getPreferredLogoUrl(t.partner);return t.authenticatedProvider=new he(r,e.name,n,e.websiteUrl),!0})).catch((function(){return t.authenticatedProvider=new he(r,r,null,null),!0})):(t.authenticatedProvider=new he(r,r,null,null),A.resolve(!0))}))):(t.authenticatedIdentity=null,t.authenticatedProvider=null,t.authenticatedPackage=null,localStorage.removeItem("AdobePassAuthenticator.preauthorizedResources"),A.resolve(!1))})).catch((function(){return A.resolve(!1)})):A.resolve(!1)},t.prototype.authenticate=function(){var t=this;if(!this.currentRegistrationCode)return A.reject(new Error("Use getRegistrationCode first."));P.debug("AdobePassAuthenticator.authenticate currentRegistrationCode: "+this.currentRegistrationCode.code);var e=this.currentRegistrationCode.expires;return e&&Date.now()>e?A.reject(new Error("Your activation code has expired.")):new A((function(e,n){t.authenticateTimer_=setTimeout((function(){t.checkAuthentication().then((function(t){e(t)})).catch((function(t){n(t)}))}),5e3)})).then((function(e){return e||t.authenticate()}))},t.prototype.cancelAuthenticate=function(){P.debug("AdobePassAuthenticator.cancelAuthenticate"),this.authenticateTimer_&&clearTimeout(this.authenticateTimer_)},t.prototype.deauthenticate=function(){this.isAuthenticated=!1,this.authenticatedProvider=null,this.authenticatedIdentity=null,this.authenticatedPackage=null,localStorage.removeItem("AdobePassAuthenticator.preauthorizedResources");var t=this.adobePass;return t?t.logout():A.resolve(!1)},t.prototype.getRegistrationCode=function(){var t=this;P.debug("AdobePassAuthenticator.getRegistrationCode");var e=this.adobePass;return e?e.createRegistrationCode().then((function(e){return t.currentRegistrationCode=e,e?e.code:""})):A.reject(new Error("adobe pass not configured"))},t.prototype.checkAuthorization=function(t){var e=this;if(-1===t.authenticationTypes.indexOf(wt.mvpd)||!this.isAuthenticated)return A.resolve(new ye(!1,null));var n=t.mrss,i=this.authenticatedPackage&&this.authenticatedPackage.id;i&&(n=me(n,i,t.id));var r=n,a=this.adobePass;return a.authorize(r).then((function(){return a.getShortMediaToken(r)})).then((function(t){var n,i=t.serializedToken,a=((n={})[ve.CustomDataKey.token]=i,n[ve.CustomDataKey.tokenType]="ADOBEPASS",n[ve.CustomDataKey.resource]=r,n[ve.CustomDataKey.requestor]=e.requestorId,n),o=new ve(wt.mvpd,e.authenticatedProvider,e.authenticatedIdentity,a);return new ye(!0,o)})).catch((function(t){try{return t.json().then((function(t){var n=e.configuration.adobeAuthErrorRegex,i=new RegExp(n),r=t.message,a=t.details,o="This channel is not part of your TV package.";return i.test(r)?a&&(o=a):o=r,A.reject(new Error(o))}))}catch(t){return A.reject(new Error("There was an unexpected error."))}}))},t.prototype.getPreauthorizedResources=function(){var t=this.configuration,e=t.preauthorizeNetworksEnabled,n=t.preauthorizeNetworks,i=t.preauthorizeNetworksMapping;if(!1===e){var r=n;return Object.keys(i).forEach((function(t){var e=i[t];-1!==r.indexOf(t)&&-1===r.indexOf(e)&&r.push(e)})),A.resolve(r)}return 0===n.length?A.resolve([]):this.adobePass.preauthorize(n).then((function(t){var e=t.resources.filter((function(t){return!0===t.authorized})).map((function(t){return t.id}));return Object.keys(i).forEach((function(t){var n=i[t];-1!==e.indexOf(t)&&-1===e.indexOf(n)&&e.push(n)})),e}))},t.defaultConfiguration=we}(),w((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},a=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[i+a>>>2]|=o<<24-(i+a)%4*8}else for(a=0;a<r;a+=4)e[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){e=e;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},a=0;a<e;a+=4){var s=r(4294967296*(n||t.random()));n=987654071*s(),i.push(4294967296*s()|0)}return new o.init(i,e)}}),s=i.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,c=t.min(4*u,r);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(i,d);var l=i.splice(0,u);n.sigBytes-=c}return new o.init(l,c)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})));w((function(t,e){var n,i,r,a,o,s,u,c;t.exports=(i=(n=c=Pe).lib,r=i.WordArray,a=i.Hasher,o=n.algo,s=[],u=o.SHA1=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],u=n[4],c=0;c<80;c++){if(c<16)s[c]=0|t[e+c];else{var d=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=d<<1|d>>>31}var l=(i<<5|i>>>27)+u+s[c];l+=c<20?1518500249+(r&a|~r&o):c<40?1859775393+(r^a^o):c<60?(r&a|r&o|a&o)-1894007588:(r^a^o)-899497514,u=o,o=a,a=r<<30|r>>>2,r=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u),c.SHA1)})),w((function(t,e){var n,i,r;t.exports=(i=(n=Pe).lib.Base,r=n.enc.Utf8,void(n.algo.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var a=this._oKey=e.clone(),o=this._iKey=e.clone(),s=a.words,u=o.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),w((function(t,e){t.exports=Pe.HmacSHA1})),w((function(t,e){var n,i,r;t.exports=(i=(n=r=Pe).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)r.push(i.charAt(o>>>6*(3-s)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],a=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,u=n[t.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(s|u)<<24-a%4*8,a++}return i.create(r,a)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)}));!function(t){t.abc="abc",t.abcNews="abcnews",t.abcNewsLive="abcnewslive",t.abcOtv="abcotv",t.disney="dch",t.disneyJr="djr",t.disneyXD="dxd",t.disneyNow="dnow",t.espn="espn",t.espnFantasy="espnFantasy",t.oscar="oscar",t.freeform="ff",t.foxLatam="foxlatam",t.fxNow="fxnow",t.fx="fx",t.fxm="fxm",t.fxx="fxx",t.natGeoTV="natgeotv",t.natGeo="natgeo",t.natGeoWild="natgeowild",t.natgeoBrasil="natgeobrasil",t.unknown="000"}(be||(be={}));var Ie,Ae=function(){function t(t,e,n,i,r,a,o,s,u){this.id=t,this.name=e,this.adobeId=n,this.tier=i,this.websiteUrl=r,this.images=a,this.rank=o,this.availability=s,this.accessType=u,this.id=t,this.name=e,this.adobeId=n,this.tier=i,this.websiteUrl=r,this.images=a||[],this.rank=o,this.availability=s,this.accessType=u}return t.prototype.getPreferredLogoUrl=function(t){var e=this.images.filter((function(t){return"COLOR_NEGATIVE"===t.type})).map((function(t){return t.type}))[0],n=this.images.filter((function(t){return"BW_NEGATIVE"===t.type})).map((function(t){return t.type}))[0]||e;return n?"https://web.archive.org/web/20210915144012/https://s.secure.espncdn.com/stitcher/watch/clients/"+t+"-web/providers/"+this.adobeId+".png?height=40&imageType="+n:this.images.filter((function(t){return"DESKTOP"===t.type})).map((function(t){return t.href}))[0]||null},t.prototype.toString=function(){return"<Provider id:"+this.id+", name:"+this.name+", adobeId:"+this.adobeId+">"},t}();!function(t){t.mvpd="mvpd",t.isp="isp",t.tve="tve"}(Ie||(Ie={}));var _e=Ie,Te=function(t){this.serviceUrl=t,this.serviceUrl=t};function Se(t,e){var n=t.tier||99,i=e.tier||99;if(n<i)return-1;if(n>i)return 1;var r=t.rank||9999,a=e.rank||9999;if(r<a)return-1;if(r>a)return 1;var o=t.name.toLowerCase(),s=e.name.toLowerCase();return o<s?-1:o>s?1:0}var ke={negativebgcolorImage:"COLOR_NEGATIVE",negativebgbwImage:"BW_NEGATIVE",positivebgcolorImage:"COLOR_POSITIVE",positivebgbwImage:"BW_POSITIVE",desktop:"DESKTOP"};function Ee(t,e){if(!t)return null;var n=t.id,i=t.name,r=t.websiteUrl,a=t.adobeId,o=t.logos,s=t.accessType,u=function(t){return Object.keys(t).filter((function(e){return ke[e]&&!!t[e]})).map((function(e){return{href:t[e].trim(),type:ke[e]}}))}(o),c=t.countries.filter((function(t){return t.countryCode.toLowerCase()===e.toLowerCase()}))[0],d=c&&c.tier,l=c&&c.rank;return new Ae(n,i,a,d,r,u,l,null,s)}function Ce(t,e){return t.rows?t.rows.map((function(t){return Ee(t.data,e)})).sort(Se):[Ee(t,e)]}var Oe={};Oe[_e.mvpd]="adobeId",Oe[_e.isp]="ispId",Oe[_e.tve]="id";var Me=new Te("https://web.archive.org/web/20210915144012/https://affiliate.api.espn.com/affiliateApi/affiliates?includeProperties=true&rows=1000&apikey=q458c7hcllto16w0wcjytqoxq"),De=(function(){function t(t){this.locationProvider=t||{getCountryCode:function(){return"us"}},this.applicationId=null,this.configuration=Me}Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationId",{get:function(){return this.applicationId_},set:function(t){this.applicationId_=t},enumerable:!0,configurable:!0}),t.prototype.getProvider=function(t,e,n){return void 0===n&&(n={}),E(this,void 0,void 0,(function(){var i,r,a,o;return C(this,(function(s){switch(s.label){case 0:return i=e||_e.mvpd,r=Oe[i]||"adobeId",n[r]=t,[4,this.getProviders(n)];case 1:if(a=s.sent(),!(o=a[0]))throw new Error("Unable to find provider.");return[2,o]}}))}))},t.prototype.getProviders=function(t){return void 0===t&&(t={}),E(this,void 0,void 0,(function(){var e,n,i,r,a,o,s;return C(this,(function(u){switch(u.label){case 0:e=this.configuration.serviceUrl,n=-1===e.indexOf("?")?"?":"&",i=this.applicationId,r=function(t){return-1!==["PR","GU","VI"].indexOf(t)?"US":t}(this.locationProvider.getCountryCode().toUpperCase()),t.country=r,i&&(t.application=i),a=Object.keys(t).map((function(e){if("id"!==e)return e+"="+encodeURIComponent(t[e])})).join("&"),o=""+e+n+a,t.id&&(s=e.split("?"),o=s[0]+"/"+t.id+"?"+s[1]),u.label=1;case 1:return u.trys.push([1,4,,5]),[4,_(o)];case 2:return[4,u.sent().json()];case 3:return[2,Ce(u.sent(),r)];case 4:return u.sent(),[2,[]];case 5:return[2]}}))}))},t.defaultConfiguration=Me}(),function(){function t(t){this.authenticatedProviderId=null,this.providerDataSource=null,this.partner=t.partner,this.platform=t.platform}return Object.defineProperty(t.prototype,"preauthorizedResources",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAuthenticated",{get:function(){return!!this.token&&!!this.tokenType},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedIdentity",{get:function(){return localStorage.getItem("TokenAuthenticator.authenticatedIdentity")},set:function(t){t?localStorage.setItem("TokenAuthenticator.authenticatedIdentity",t):localStorage.removeItem("TokenAuthenticator.authenticatedIdentity")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedProvider",{get:function(){var t=localStorage.getItem("TokenAuthenticator.authenticatedProvider");try{return he.fromObject(JSON.parse(t))}catch(t){return null}},set:function(t){t?localStorage.setItem("TokenAuthenticator.authenticatedProvider",JSON.stringify(t)):localStorage.removeItem("TokenAuthenticator.authenticatedProvider")},enumerable:!1,configurable:!0}),t.prototype.setToken=function(t,e,n,i){this.token=t,this.tokenType=e,this.resource=n,this.zipcode=i},t.prototype.checkAuthentication=function(){var t=this,e=this.authenticatedProviderId;if(!e||this.authenticatedProvider&&e===this.authenticatedProvider.id)return A.resolve(this.isAuthenticated);if(!this.providerDataSource)return this.authenticatedProvider=new he(e,e,null,null),A.resolve(this.isAuthenticated);var n,i="ADOBEPASS"===(n=this.tokenType)?_e.mvpd:"DEVICE"===n?_e.isp:"AUTHTOKEN"===n?_e.mvpd:null;return this.providerDataSource.getProvider(e,i).then((function(n){var i=n.getPreferredLogoUrl(t.partner);return t.authenticatedProvider=new he(e,n.name,i,n.websiteUrl),A.resolve(t.isAuthenticated)})).catch((function(){return t.authenticatedProvider=new he(e,e,null,null),A.resolve(t.isAuthenticated)}))},t.prototype.authenticate=function(t){var e=t.authenticatedProviderId,n=t.authenticatedIdentity,i=t.token,r=t.tokenType,a=t.zipcode;return this.authenticatedProviderId=e,this.authenticatedIdentity=n,this.setToken(i,r,null,a),this.checkAuthentication()},t.prototype.deauthenticate=function(){return this.authenticatedProvider=null,this.authenticatedIdentity=null,this.token=null,this.tokenType=null,this.resource=null,this.zipcode=null,A.resolve(!0)},t.prototype.checkAuthorization=function(t){var e,n,i="ADOBEPASS"===(n=this.tokenType)?wt.mvpd:"DEVICE"===n?wt.isp:"BAM"===n?wt.direct:"AUTHTOKEN"===n||"GATEKEEPER"===n?wt.mvpd:null;if(!this.isAuthenticated||-1===t.authenticationTypes.indexOf(i)&&"DEVICE"!==this.tokenType&&"GATEKEEPER"!==this.tokenType)return A.resolve(new ye(!1,null));var r=((e={})[ve.CustomDataKey.token]=this.token,e[ve.CustomDataKey.tokenType]=this.tokenType,e);this.zipcode&&(r.zipcode=this.zipcode),this.resource&&(r.resource=this.resource);var a=new ve(i,this.authenticatedProvider,this.authenticatedIdentity,r),o=new ye(!0,a);return A.resolve(o)},t}()),Ne=w((function(t,e){var n;t.exports=(n=n||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},a=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;e[i+a>>>2]|=o<<24-(i+a)%4*8}else for(a=0;a<r;a+=4)e[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){e=e;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},a=0;a<e;a+=4){var s=r(4294967296*(n||t.random()));n=987654071*s(),i.push(4294967296*s()|0)}return new o.init(i,e)}}),s=i.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},d=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,c=t.min(4*u,r);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(i,d);var l=i.splice(0,u);n.sigBytes-=c}return new o.init(l,c)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math),n)})),Ue=w((function(t,e){var n,i,r;t.exports=(i=(n=r=Ne).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)r.push(i.charAt(o>>>6*(3-s)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<n.length;a++)r[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],a=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,u=n[t.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=(s|u)<<24-a%4*8,a++}return i.create(r,a)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)})),je=w((function(t,e){t.exports=Ne.enc.Utf8})),Le=function(t,e){e.setItem("watchsdk.web_adobe_pass_authenticator.state",JSON.stringify(t))},xe={production:"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyZGJmZWM4My03OWE1LTQyNzEtYTVmZC04NTZjYTMxMjRjNjMiLCJuYmYiOjE1NDAyMTI3NjEsImlzcyI6ImF1dGguYWRvYmUuY29tIiwiaWF0IjoxNTQwMjEyNzYxfQ.yaK3r4AI2uLVvsyN1GLzqzgzRlxMPtasSaiYYBV0wIstqih5tvjTmeoLmi8Xy9Kp_U7Md-bOffwiyK3srHkpUkhhwXLH2x6RPjmS1tPmhaG7-3LBcHTf2ySPvXhVf7cN4ngldawK4tdtLtsw6rF_JoZE2yaC6XbS2F51nXSFEDDnOQWIHEQRG3aYAj-38P2CLGf7g-Yfhbp5cKXeksHHQ90u3eOO4WH0EAjc9oO47h33U8KMEXxJbvjV5J8Va2G2fQSgLDZ013NBI3kQnE313qgqQh2feQILkyCENpB7g-TVBreAjOaH1fU471htSoGGYepcAXv-UDtpgitDiLy7CQ",staging:"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhMmRjNjgyMC1kZGNkLTQ4NGEtOTdlNS0xZjJiZmQzOGI4YzgiLCJuYmYiOjE1NDAyMjIwNTksImlzcyI6ImF1dGguYWRvYmUuY29tIiwiaWF0IjoxNTQwMjIyMDU5fQ.YgX4ecGCgLCaZS7uwRQYZ8UR5EwT7GIl-glFbwU122bO1JYZSmbIX8YJSfmYth_scyeg-15BYWNftV9lOcmCe8VwIsQMJMIZKaF8qSIj5OfuTOBpNZNBpDAp5dC3zG7Zp1xLe3z-T0Y18-0BGj2yhGcJxBz4gtLXQ30Bw0LEIJ89nXCQaXFTq9N6zhDzMfkFJNnSNEvEmvcQqB4bFPIqn2is8427oQDU4D0XYvvTtx9eb5hmzKc9MbBG-8KRBA62BqdHomA5UA4kBYJKpe-8B2hO07Adi2bZoo5wP_VLNAnAxANWNXaGQYHMDjHDrHbbvuKHBudHgKxAuKpIdC7UrA"},Re=new function(t,e,n,i){this.preauthorizeNetworksEnabled=t,this.preauthorizeNetworks=e,this.preauthorizeNetworksMapping=n,this.adobeAuthErrorRegex=i}(!1,[],{},"^$|^null$|^noAuthz$|^[\\d]*.*UPDA$|^BAD_RESPONSE$"),Be="mvpd",He="upstreamUserID",ze="packageId",Fe="tier",Ve="hba_status",Ke={},Ge=function(){function t(e,n,i,r,a){this.partner=e,this.platform=n,this.requestorId=i,this.options=r,this.configuration=Re;var o=r||{},s=o.environment,u=void 0===s?t.Environment.PRODUCTION:s,c=o.errorEventHandlerName,d=void 0===c?"AEErrorHandler":c;this.accessEnabler=null,this.environment=u,this.errorEventHandlerName=d,this.resolveEntitlementLoaded_=null,this.resolveCheckAuthenticationCompletions_=[],this.resolveAuthenticate_=null,this.resolveDeauthenticate_=null,this.resolveAuthorization_=null,this.resolvePreauthorizes_=[],this.resolveAuthenticateMetadataDependencies_={},this.softwareStatements=a||xe,this.delegate=null,this.providerDataSource=null,this.storage=localStorage,this.state_={};try{var l=this.storage.getItem("watchsdk.web_adobe_pass_authenticator.state"),h=JSON.parse(l);h.authenticatedProvider&&(h.authenticatedProvider=Gt.fromObject(h.authenticatedProvider)),h.authenticatedPackage&&(h.authenticatedPackage=de.fromObject(h.authenticatedPackage)),this.state_=h}catch(t){}this.initialization_=this.initialize(),window.tokenRequestFailed=this.tokenRequestFailed.bind(this)}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuthenticated",{get:function(){return"true"===this.state_.isAuthenticated.toString()},set:function(t){this.state_.isAuthenticated=t,Le(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedIdentity",{get:function(){return this.state_.authenticatedIdentity},set:function(t){if(!t)return delete this.state_.authenticatedIdentity,void Le(this.state_.toString,this.storage);this.state_.authenticatedIdentity=t,Le(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedPackage",{get:function(){return this.state_.authenticatedPackage},set:function(t){if(!t)return delete this.state_.authenticatedPackage,void Le(this.state_,this.storage);this.state_.authenticatedPackage=t,Le(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedProvider",{get:function(){return this.state_.authenticatedProvider},set:function(t){if(!t)return delete this.state_.authenticatedProvider,void Le(this.state_,this.storage);this.state_.authenticatedProvider=t,Le(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wasPreviouslyAuthenticated",{get:function(){var t,e;return"true"===(null===(e=null===(t=this.state_)||void 0===t?void 0:t.wasPreviouslyAuthenticated)||void 0===e?void 0:e.toString())||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preauthorizedResources",{get:function(){return this.isAuthenticated?this.state_.preauthorizedResources:[]},enumerable:!0,configurable:!0}),t.prototype.checkAuthentication=function(){var t=this;return P.debug("AdobePassAuthenticator.checkAuthentication"),this.accessEnabler?new A((function(e){t.resolveCheckAuthenticationCompletions_.push((function(t){e(t)})),t.accessEnabler.checkAuthentication()})):A.reject(null)},t.prototype.authenticate=function(t){var e=this;if(P.debug("AdobePassClient.authenticate"),!this.accessEnabler)return A.reject(null);var n=t&&t.redirectUrl||window.location.href;return new A((function(t){e.resolveAuthenticate_=function(e){t(e)},e.accessEnabler.getAuthentication(n)}))},t.prototype.deauthenticate=function(){var t=this;return P.debug("AdobePassAuthenticator.deauthenticate"),this.accessEnabler?new A((function(e){t.resolveDeauthenticate_=function(t){e(t)},t.accessEnabler.logout()})):A.reject(null)},t.prototype.checkAuthorization=function(t){var e,n=this;if(P.debug("AdobePassClient.checkAuthorization "+t),-1===(null===(e=t.authenticationTypes)||void 0===e?void 0:e.indexOf(wt.mvpd))||!this.isAuthenticated){var i=new Wt(!1,null);return A.resolve(i)}var r=t.mrss,a=this.authenticatedPackage&&this.authenticatedPackage.id;a&&(r=me(r,a,t.id));var o=r;return new A((function(t,e){n.resolveAuthorization_=function(i){var r,a=i.token,o=i.resourceId,s=i.errorId,u=i.message;if(a||!s){var c=((r={})[Yt.CustomDataKey.token]=Ue.stringify(je.parse(a)),r[Yt.CustomDataKey.tokenType]="ADOBEPASS",r[Yt.CustomDataKey.resource]=o,r),d=new Yt(wt.mvpd,n.authenticatedProvider,n.authenticatedIdentity,c),l=new Wt(!0,d);t(l)}else e(new Error(u||s))},n.accessEnabler.getAuthorization(o)}))},t.prototype.setProvider=function(t){this.accessEnabler.setSelectedProvider(t)},Object.defineProperty(t.prototype,"isHomeBasedAuth",{get:function(){return this.hbaStatus||!1},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var t=this,e=this.environment;return function(t,e){var n=window&&window.document;if(!n)return A.reject();if(window.Adobe&&window.Adobe.AccessEnabler){var i=new window.Adobe.AccessEnabler(e);return A.resolve(i)}return new A((function(i,r){var a=n.createElement("script");a.id="ae_js",a.type="text/javascript",a.async=!0,a.src=t,a.addEventListener("load",(function(){var t=new window.Adobe.AccessEnabler(e);i(t)})),a.addEventListener("error",(function(){r()})),n.getElementsByTagName("head")[0].appendChild(a)}))}(Ke[e],this.softwareStatements[e]).then((function(e){return t.accessEnabler=e,A.resolve()})).then((function(){return new A((function(e){t.resolveEntitlementLoaded_=e,t.bindAccessEnablerCallbacks()}))}))},t.prototype.bindAccessEnablerCallbacks=function(){window.entitlementLoaded=this.entitlementLoaded.bind(this),window.setAuthenticationStatus=this.setAuthenticationStatus.bind(this),window.setMetadataStatus=this.setMetadataStatus.bind(this),window.displayProviderDialog=this.displayProviderDialog.bind(this),window.setConfig=this.setConfig.bind(this),window.sendTrackingData=this.sendTrackingData.bind(this),window.preauthorizedResources=this.handlePreauthorizedResources.bind(this),window.selectedProvider=this.selectedProvider.bind(this),window.setToken=this.setToken.bind(this),window[this.errorEventHandlerName]=this.handleAccessEnablerError.bind(this)},t.prototype.entitlementLoaded=function(){P.debug("AdobePassAuthenticator.entitlementLoaded"),this.accessEnabler&&(this.accessEnabler.bind("errorEvent",this.errorEventHandlerName),this.accessEnabler.setRequestor(this.requestorId),this.resolveEntitlementLoaded_&&(this.resolveEntitlementLoaded_(!0),this.resolveEntitlementLoaded_=null))},t.prototype.setAuthenticationStatus=function(t,e){var n=this;if(P.debug("AdobePassAuthenticator.setAuthenticationStatus",t,e),this.isAuthenticated=!!t,this.isAuthenticated){this.accessEnabler.getMetadata(He);var i=[ze,Fe,Ve,Be].map((function(t){return new A((function(e){n.resolveAuthenticateMetadataDependencies_[t]=function(t){e(t)},n.accessEnabler.getMetadata(t)})).catch((function(t){return P.warn(t),null}))}));i.push(this.getPreauthorizedResources_().then((function(t){n.state_.preauthorizedResources=t}))),A.all(i).then((function(){n.resolveCheckAuthenticationCompletions_.forEach((function(t){t(n.isAuthenticated)})),n.resolveCheckAuthenticationCompletions_=[],n.resolveAuthenticate_&&(n.resolveAuthenticate_(n.isAuthenticated),n.resolveAuthenticate_=null)}))}else this.authenticatedIdentity=null,this.authenticatedPackage=null,this.authenticatedProvider=null,this.hbaStatus=null,this.state_.preauthorizedResources=[],this.resolveCheckAuthenticationCompletions_.forEach((function(t){t(n.isAuthenticated)})),this.resolveCheckAuthenticationCompletions_=[],this.resolveDeauthenticate_&&(this.resolveDeauthenticate_(this.isAuthenticated),this.resolveDeauthenticate_=null)},t.prototype.setMetadataStatus=function(t,e,n){var i=this;switch(P.debug("AdobePassAuthenticator.setMetadataStatus",t,n),t){case Be:var r=n;this.providerDataSource?this.providerDataSource.getProvider(r).then((function(e){var a=e.images||[],o=a.filter((function(t){return"COLOR_NEGATIVE"===t.type})).map((function(t){return t.href}))[0],s=a.filter((function(t){return"BW_NEGATIVE"===t.type})).map((function(t){return t.href}))[0]||o||a.map((function(t){return t.href}))[0];i.authenticatedProvider=new Gt(r,e.name,s,e.websiteUrl),i.authenticatedProvider.isHomeBasedAuth=i.hbaStatus,i.resolveAuthenticateMetadata_(t,n)})).catch((function(){i.authenticatedProvider=new Gt(r,r,null,null),i.resolveAuthenticateMetadata_(t,n)})):(this.authenticatedProvider=new Gt(r,r,null,null),this.resolveAuthenticateMetadata_(t,n));break;case He:this.authenticatedIdentity=n,this.resolveAuthenticateMetadata_(t,n);break;case Ve:this.hbaStatus="true"===n,this.resolveAuthenticateMetadata_(t,n);break;case ze:case Fe:if(n){var a=this.authenticatedPackage||new de(null,null);t===ze?a.id=n:t===Fe&&(a.tier=n),this.authenticatedPackage=a}this.resolveAuthenticateMetadata_(t,n)}},t.prototype.displayProviderDialog=function(t){var e=this;P.debug("AdobePassAuthenticator.displayProviderDialog",t),this.providerDataSource&&this.providerDataSource.getProviders().then((function(t){e.delegate&&e.delegate.selectProvider&&e.delegate.selectProvider(t)}))},t.prototype.setConfig=function(){},t.prototype.sendTrackingData=function(t,e){if("authenticationDetection"===t){var n={success:e[0],mvpd:e[1],guid:e[2],isTokenCached:e[3],deviceType:e[4],clientType:e[5],os:e[6]};P.debug("AdobePassAuthenticator.sendTrackingData",t,n)}},t.prototype.handlePreauthorizedResources=function(t){P.debug("AdobePassAuthenticator.preauthorizedResources",t);var e=this.resolvePreauthorizes_.shift();e&&e(t)},t.prototype.selectedProvider=function(t){var e=t.MVPD,n=t.AEstate_;P.debug("AdobePassAuthenticator.selectedProvider mvpd: "+e+", aeState: "+n)},t.prototype.setToken=function(t,e){P.debug("Requested resource: "+t+" tokenResult: "+e),this.resolveAuthorization_&&(this.resolveAuthorization_({resourceId:t,token:e}),this.resolveAuthorization_=null)},t.prototype.handleAccessEnablerError=function(t){var e=t.errorId,n=t.message;switch(P.debug("AdobePassAuthenticator.handleAccessEnablerError errorId: "+e+", message: "+n),e){case"Z100":P.error("Failure to authorize: "+n);var i=this.configuration.adobeAuthErrorRegex,r=new RegExp(i).test(n)?"This channel is not part of your TV package.":n;this.resolveAuthorization_&&(this.resolveAuthorization_({errorId:e,message:r}),this.resolveAuthorization_=null);break;case"N130":this.checkAuthentication()}},t.prototype.tokenRequestFailed=function(){P.debug("AdobePassAuthenticator.tokenRequestFailed")},t.prototype.resolveAuthenticateMetadata_=function(t,e){var n=this.resolveAuthenticateMetadataDependencies_[t];n&&(n(e),delete this.resolveAuthenticateMetadataDependencies_[t])},t.prototype.getPreauthorizedResources_=function(){var t=this;P.debug("AdobePassAuthenticator.getPreauthorizedResources_");var e=this.configuration,n=e.preauthorizeNetworksEnabled,i=e.preauthorizeNetworks,r=e.preauthorizeNetworksMapping;if(!1===n){var a=i;return Object.keys(r).forEach((function(t){var e=r[t];-1!==a.indexOf(t)&&-1===a.indexOf(e)&&a.push(e)})),A.resolve(a)}if(0===i.length||!0!==this.isAuthenticated)return A.resolve([]);if(!this.accessEnabler)return A.reject(null);var o=function t(e,n){return e.length?M([e.slice(0,n)],t(e.slice(n),n)):[]}(i,5),s=[],u=o.map((function(e){return new A((function(n){s.push((function(t){n(t)})),t.accessEnabler.checkPreauthorizedResources(e)})).catch((function(){return[]}))}));return this.resolvePreauthorizes_=s,A.all(u).then((function(t){return t.reduce((function(t,e){return t.concat(e)}),[])}))},t.defaultConfiguration=Re,t}();Ge.Environment={PRODUCTION:"production",STAGING:"staging"},Ge.EventType={PREAUTHORIZED:"preauthorized",NOT_PREAUTHORIZED:"not_preauthorized"},Ke[Ge.Environment.PRODUCTION]="https://web.archive.org/web/20210915144012/https://entitlement.auth.adobe.com/entitlement/v4/AccessEnabler.js",Ke[Ge.Environment.STAGING]="https://web.archive.org/web/20210915144012/https://entitlement.auth-staging.adobe.com/entitlement/v4/AccessEnabler.js";var Je,qe=function(t){u(r,t);var n=h(r);function r(t,i,a,o,s){var u;return e(this,r),(u=n.call(this)).partner=t,u.platform=i,u.requestorId=a,u.options=o,u.softwareStatements=s,u}return i(r,[{key:"configuration",get:function(){var t=Q.shared.getConfiguration("adobePass",Ge.defaultConfiguration);return P.debug("WebAdobePassAuthenticator.getConfiguration ".concat(JSON.stringify(t))),t},set:function(t){y(c(r.prototype),"configuration",t,this,!0)}}]),r}(Ge),Ye=function(t,e,n){this.contentType=t,this.keySystem=e,this.licenseUrl=n};!function(t){t[t.all=0]="all",t[t.linearPlayback=1]="linearPlayback"}(Je||(Je={}));var We,Qe=Je;!function(t){t.linear="linear",t.event="event"}(We||(We={}));var Xe,Ze=We;!function(t){t.stitchedPreroll="stitchedPreroll"}(Xe||(Xe={}));var $e,tn=Xe;!function(t){t.live="live",t.onDemand="onDemand"}($e||($e={}));var en,nn=$e;!function(t){t.nielsen="nielsen",t.comscore="comscore",t.conviva="conviva",t.heartbeats="heartbeats"}(en||(en={}));var rn,an=en;!function(t){t.shortform="shortform",t.longform="longform"}(rn||(rn={}));var on,sn=rn;!function(t){t.audio="audio",t.video="video"}(on||(on={}));var un,cn=on;!function(t){t.pluto="pluto",t.graphQL="graphQL",t.cfa="cfa"}(un||(un={}));var dn,ln=un;!function(t){t.open="OPEN",t.direct="DIRECT",t.mvpd="MVPD",t.isp="ISP",t.none="NONE"}(dn||(dn={}));var hn,pn=dn;!function(t){t.none="none",t.startSession="startSession",t.bam="bam",t.shield="shield",t.entitlement="entitlement"}(hn||(hn={}));var fn=hn,vn=function(){function t(t,e,n,i,r,a,o){this.url=t,this.type=e,this.hasEspnId3Heartbeats=n,this.hasNielsenWatermarks=i,this.hasPassThroughAds=r,this.commercialReplacement=a,this.startSessionUrl=o,this.variant=null}return t.fromObject=function(e){if(!e)return null;var n=e.url,i=e.type,r=e.hasEspnId3Heartbeats,a=e.hasNielsenWatermarks,o=e.hasPassThroughAds,s=e.commercialReplacement,u=e.startSessionUrl;return new t(n,fn[i],r,a,o,s,u)},t}(),yn=function(){function t(t,e,n,i){this.id=t,this.type=e,this.name=n,this.resource=i}return t.fromObject=function(e){if(!e)return null;var n=Ze[e.type];return new t(e.id,n,e.name,e.resource)},t}(),gn=function(){function t(t){this.url=t}return t.fromObject=function(e){return e&&e.url?new t(e.url):null},t}(),mn=function(){function t(t){this.name=t}return Object.defineProperty(t.prototype,"logoUrl",{get:function(){return"https://secure.espncdn.com/watchespn/images/espnplus/packages/"+this.name+".png"},enumerable:!1,configurable:!0}),t.fromObject=function(e){return e?new t(e.name):null},t}(),bn=function(){function t(t,e,n,i,r){this.id=t,this.title=e,this.duration=n,this.language=i||"en",this.source=r,this.description=null,this.authenticationTypes=[],this.mrss=null,this.seekInSeconds=null,this.tracking={},this.references={},this.network=null,this.streamType=null,this.supportedMediaCommands=Qe.all,this.images=[],this.type=cn.video,this.packages=[],this.tier=null,this.entityType=null,this.isSyndicatable=null,this.brand=null,this.apiSource=null,this.adUnitId=null,this.cues=null,this.adTarget=null,this.show=null}return Object.defineProperty(t.prototype,"isLinear",{get:function(){return!!this.network&&this.network.type===Ze.linear},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLive",{get:function(){return this.streamType===nn.live},enumerable:!1,configurable:!0}),t.fromObject=function(e){var n=vn.fromObject(e.source),i=new t(e.id,e.title,e.duration,e.language,n);return i.authenticationTypes=e.authenticationTypes,i.description=e.description,i.images=(e.images||[]).map((function(t){return gn.fromObject(t)})),i.mrss=e.mrss,i.network=yn.fromObject(e.network),i.seekInSeconds=e.seekInSeconds,i.streamType=nn[e.streamType],i.supportedMediaCommands=e.supportedMediaCommands,i.tracking=e.tracking,i.references=e.references,i.packages=(e.packages||[]).map((function(t){return mn.fromObject(t)})),i.type=cn[e.type],i.entityType=sn[e.entityType],i.isSyndicatable=e.isSyndicatable,i.brand=e.brand,i.adUnitId=e.adUnitId,i.cues=e.cues,i.show=e.show,i.adTarget=e.adTarget,i},t.prototype.toString=function(){return"<MediaItem id:"+this.id+", title:"+this.title+", streamType:"+this.streamType+">"},t}();var wn,Pn=function(){function t(t){var e=function(t){var e=t.split("?")[1],n={};if(e)for(var i=e.split("&"),r=0;r<i.length;r+=1){var a=i[r].split("=");n[a[0]]=a[1]}return n}(t);if(this.original=t,this.id=e.videoID||e.playID||e.clip||e.externalId,t.match("sportscenter")){this.gameId=e.playGameID,this.channel=e.playChannel,this.simulcastAiringId=e.simulcastAiringId;var n=parseInt(e.resumeTime,10);isNaN(n)||(this.resumeTime=n),this.eventId=e.eventId}this.source=e["x-source"],e.videoID?this.entityType=sn.shortform:this.entityType=sn.longform,this.type=cn.video}return t.prototype.toString=function(t){return t==ln.graphQL?"<MediaItemIdentifier id:"+this.id+", gameId:"+this.gameId+", channel:"+this.channel+", source:"+this.source+">":"<MediaItemIdentifier id:"+this.id+", source:"+this.source+">"},t.identifierStringForNetwork=function(t,e){return(e||ln.graphQL)==ln.graphQL?"sportscenter://x-callback-url/showWatchStream?playChannel="+t:"natgeo://playVideo?videoID="+t},t}();function In(t,e,n,i){if(!e)return{};var r,a,o,s=null;t===wn.natGeo?s=function(t){if(!t)return{};var e={},n=t.id,i=t.title,r=t.duration;return e.c_video_id_code=n,e.c_a_media_airdate="unknown",e.c_a_media_daypart="daytime",e.c_a_media_digitaldate="unknown",e.c_a_media_episode="none",e.c_a_media_feed="natgeo live",e.c_a_media_format="vod",e.c_a_media_genre="none",e.c_a_media_network="natgeo",e.c_a_media_originator="natgeo",e.c_a_media_pass_auth="none",e.c_a_media_pass_mvpd="none",e.c_a_media_rating="none",e.c_a_media_season="none",e.c_a_media_show=i,e.c_a_media_streamtype=on.video,e.c_a_media_length=r,e}(e):(r=function(t,e,n){if(!t)return{};var i=t.duration,r=t.id,a=t.league,o=t.name,s=t.network,u=t.program,c=t.sport,d=t.startDateTime,l=t.tracking,h="1";n&&!0===n.hasEspnId3Heartbeats&&!1===n.hasPassThroughAds&&"SHARED INV"!==n.commercialReplacement&&(h="2");var p={type:"content"};if(p.assetid=l&&l.trackingId||r,p.program=o,p.title=o,p.clientid="us-600140",e===sn.longform){if(p.length=""+i,p.segB=a&&a.name||"No League",p.segC=""+(u&&u.code||"")+(c&&c.code||""),d){var f=new Date(d);p.airdate=f.getUTCFullYear().toString()+("0"+f.getUTCMonth()).slice(-2)+("0"+f.getUTCDate()).slice(-2)+" "+("0"+f.getUTCHours()).slice(-2)+":"+("0"+f.getUTCMinutes()).slice(-2)+":"+("0"+f.getUTCSeconds()).slice(-2)}p.isfullepisode="y",p.crossId1=l&&l.nielsenCrossId1||"",p.crossId2=s&&s.name||"",p.adloadtype=h,p.hasAds="1",p.progen="SE",p.vcid="b01"}return e===sn.shortform&&(p.accmethod="1",p.length=""+i,p.segA=o,p.segB="No League",p.segC="VOD",p.isfullepisode="n",p.crossId1="",p.adloadtype="1",p.vcid="c17",p.adloadtype="2"),p}(e,n,i),a=function(t,e){if(!t)return{};var n=t.id,i=t.duration,r=t.name,a=t.league,o=t.startDateTime,s=t.network,u=t.sport,c=t.status,d=t.tracking,l={};if(e===sn.longform)l.ns_st_cl=0,l.ns_st_ct="vc",!c||"live"!==c.toLowerCase()&&"over"!==c.toLowerCase()?(l.ns_st_cl=i,l.ns_st_ct="vc12",l.ns_st_pr="VOD",l.ns_st_ep=r):(l.ns_st_cl=0,l.ns_st_ct="vc13",l.ns_st_pr=r,l.ns_st_ep="*null"),l.c3="WATCHESPNLIVE",l.c6=a&&a.name?a||"No league":u&&u.code||"No Sport";else{l.ns_st_cl=i,l.ns_st_ct="vc11",l.ns_st_pr="VOD",l.ns_st_ep=r;var h=d||{},p=h.sportName,f=h.leagueName;l.c3="vod",l.c6=""+(f&&"no league"!==f.toLowerCase()?f:p||"No Sport")}if(l.ns_st_ti="*null",l.ns_st_ia="*null",l.ns_st_ce="*null",l.ns_st_ci=n,o){var v=new Date(o);l.ns_st_ddt=v.toDateString(),l.ns_st_tdt=v.toDateString()}return l.ns_st_st=s?s.id:"*null",l.ns_st_en="*null",l.ns_st_cn="1",l.ns_st_pn="1",l.ns_st_tp="1",l.ns_st_pu="ESPN",l.ns_st_cu="none",l.ns_st_ad="0",l.ns_st_ge="Sports",l}(e,n),o=function(t,e,n){if(!t)return{};var i=t.name,r=t.id,a=t.airingId,o=t.eventId,s=t.duration,u=t.network,c=t.status,d=t.sport,l=t.league,h=i+" - "+r;u&&u.type===Ze.linear&&(h=u.id);var p={};return p.contentId=r,a&&(p.airingId=a),o&&(p.eventId=""+o,p.eventName=i),u&&(p.network=u.id),e===sn.shortform?p.assetType="clip":!c||"live"!==c.toLowerCase()&&"over"!==c.toLowerCase()?p.assetType="vod":p.assetType="live",p.sport=d&&d.name||"Not Applicable",p.league=l&&l.name||"Not Applicable",p.appBrand=wn.espn,{assetName:h,duration:s,streamUrl:n&&n.url,custom:p}}(e,n,i),s=function(t,e){if(!t)return{};var n=t.duration,i=t.airingId,r=t.network,a=t.status,o=t.sport,s=t.league,u=t.program,c=t.startDateTime,d=t.tracking,l=t.originalPublishDate,h=t.expirationDate,p=t.lastModifiedDate,f=t.ad,v=t.coverageType,y=t.brands,g={};if(g.ContentDuration=n,e===sn.longform){if(g.isFullEpisode="y",i&&(g.AiringID=i),r&&(g.NetworkName=r.id,g.Channel=r.id),a&&(g.VideoType="REPLAY"===a?"replay":"live"),g.Sport=o&&o.name||"Not Applicable",g.SportCode=o&&o.code||"Not Applicable",g.League=s&&s.name||"Not Applicable",u&&u.code&&u.categoryCode?g.ProgramCode=u.categoryCode+u.code:g.ProgramCode="Not Applicable",g.IsStudio=u&&u.isStudio||"Not Applicable",c){var m=new Date(c);g.AirDate=m.toDateString(),g.AirTime=m.toTimeString()}if(Array.isArray(y)&&y.length){var b=y[0],w=b.id,P=b.name,I=b.type;g["a.media.asset"]=w,g["a.media.show"]=P,g["a.media.genre"]=I}}else if(e===sn.shortform){if(g.isFullEpisode="n",g.VideoType="vod",g.Sport=d&&d.sportName||"Not Applicable",g.League=d&&d.leagueName||"Not Applicable",g.ShowCode=f&&f.bundle||"Not Applicable",d&&d.name&&(g.CMSID=d.name),l){m=new Date(l);g.PublishDate=m.toISOString().substring(0,10),g.PublishTime=m.toISOString().substring(11)}if(h){m=new Date(h);g.ExpirationDate=m.toISOString()}if(p){m=new Date(p);g.DateLastModified=m.toISOString()}v&&(g.VideoTypeDetail=v)}return g}(e,n));var u={};return u[an.nielsen]=r,u[an.comscore]=a,u[an.conviva]=o,u[an.heartbeats]=s,u}function An(t,e,n){return t.sort((function(t,e){var n="PRIMARY"===t.tier?0:"SECONDARY"===t.tier?1:2,i="PRIMARY"===e.tier?0:"SECONDARY"===e.tier?1:2;return n<i?-1:n>i?1:0})).sort((function(t,n){var i=t.network&&t.network.id.toLowerCase()||"unknown",r=n.network&&n.network.id.toLowerCase()||"unknown",a=e.indexOf(i),o=e.indexOf(r);return-1===a&&(a=999),-1===o&&(o=999),a<o?-1:a>o?1:0})).sort((function(t,e){var i=t.language===n?0:1,r=e.language===n?0:1;return i<r?-1:i<r?1:0}))}!function(t){t.abc="abc",t.abcNews="abcnews",t.abcNewsLive="abcnewslive",t.abcOtv="abcotv",t.disney="dch",t.disneyJr="djr",t.disneyXD="dxd",t.disneyNow="dnow",t.espn="espn",t.espnFantasy="espnFantasy",t.oscar="oscar",t.freeform="ff",t.foxLatam="foxlatam",t.fxNow="fxnow",t.fx="fx",t.fxm="fxm",t.fxx="fxx",t.natGeoTV="natgeotv",t.natGeo="natgeo",t.natGeoWild="natgeowild",t.natgeoBrasil="natgeobrasil",t.unknown="000"}(wn||(wn={}));var _n=["espn_ppv","espn_dtc","espn1","espn2","espn3","espnu","sec","espnews","espndeportes","longhorn","goalline","buzzerbeater","secplus","acc","accextra","espn_free","bam_dtc"],Tn=function(t,e,n,i){t==ln.graphQL?(this.serviceUrl=e||"https://web.archive.org/web/20210915144012/https://watch.graph.api.espn.com/api",this.apiKey=n||"d15c5790-7cb0-4fe1-8782-25f4698d0739",this.networkSortOrder=i||_n):t==ln.cfa&&(this.serviceUrl=e||"https://web.archive.org/web/20210915144012/https://natgeo.entertainment.client.dtci.technology/v1/playback/video/id/mock")},Sn=function(){function t(){this.configuration_=t.defaultConfiguration}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(e,n){return E(this,void 0,void 0,(function(){return C(this,(function(i){switch(i.label){case 0:return[4,t.fetchMediaItems(e,n,this.configuration)];case 1:return[2,i.sent()]}}))}))},t.fetchMediaItems=function(e,n,i){return E(this,void 0,void 0,(function(){var r,a,o,s,u,c;return C(this,(function(d){switch(d.label){case 0:return r=e.map((function(t){return new Pn(t)})),a=i.serviceUrl,o=i.apiKey,s=i.networkSortOrder,[4,A.all(r.map((function(e){return t.getPromiseMediaItems(e,a,o,n)})))];case 1:return u=d.sent(),(c=u.filter((function(t){return!(t instanceof Error)&&t instanceof bn}))).length?[2,An(c,s,navigator.language)]:[2,null]}}))}))},t.getPromiseMediaItems=function(e,n,i,r){return E(this,void 0,void 0,(function(){var a,o,s,u,c,d,l,h,p,f,v,y;return C(this,(function(g){switch(g.label){case 0:a=function(t,e,n,i){var r="",a="",o="",s=i||"US";return t.entityType===sn.shortform?(r="VOD",o="{id name description authTypes language duration originalPublishDate expirationDate requiresLinearPlayback lastModifiedDate source { url authorizationType } image { url } tracking { name sportName leagueName } coverageType prerollSource:source(variant:PREROLL) { url authorizationType }ad { sport bundle } links { web } cerebroId syndicatable}",a='id:"'+t.id+'"'):(r="airing",o="{ id name description mrss:adobeRSS authTypes requiresLinearPlayback status:type startDateTime endDateTime duration source(authorization: SHIELD) { url authorizationType hasEspnId3Heartbeats hasNielsenWatermarks hasPassThroughAds commercialReplacement startSessionUrl } network { id type name adobeResource } image { url } sport { name code uid } league { name uid } program { code categoryCode isStudio } seekInSeconds simulcastAiringId airingId tracking { nielsenCrossId1 trackingId } eventId packages { name } language tier feedName brands { id name type } }",t.id?a='id:"'+t.id+'"':t.channel?(r="airings",a='networks:["'+t.channel+'"],type:LIVE'):t.gameId&&(r="airings",a='eventId:"'+(t.eventId||t.gameId)+'"')),e+"?apiKey="+n+"&query="+encodeURIComponent("{ "+r+"("+a+',countryCode:"'+s+'",deviceType:SETTOP,tz:"Z") '+o+" }")}(e,n,i,r.countryCode),g.label=1;case 1:return g.trys.push([1,4,,5]),[4,_(a)];case 2:return[4,g.sent().json()];case 3:if(o=g.sent(),s=o.data.airing,(u=o.data.airings)&&(c=e.simulcastAiringId?function(t){return t.simulcastAiringId===e.simulcastAiringId}:function(){return!0},s=u.filter(c)[0]),d=o.data.VOD,!(l=s||d))throw new Error("No results found.");if(h=function(t,e,n){var i=t.id,r=t.name,a=t.description,o=t.duration,s=t.image,u=t.eventId,c=t.requiresLinearPlayback,d=t.authTypes,l=t.source,h=t.prerollSource,p=t.packages,f=t.language,v=t.mrss,y=t.seekInSeconds,g=t.tracking,m=t.simulcastAiringId,b=t.network,w=t.status,P=t.cerebroId,I=t.syndicatable,A=w&&("LIVE"===w.toUpperCase()||"OVER"===w.toUpperCase())?nn.live:nn.onDemand,_=function(t){switch(t){case"NONE":return fn.none;case"START_SESSION":return fn.startSession;case"BAM":return fn.bam;case"SHIELD":return fn.shield}}(l.authorizationType),T=new vn(l.url,_,l.hasEspnId3Heartbeats,l.hasNielsenWatermarks,l.hasPassThroughAds,l.commercialReplacement,l.startSessionUrl);n&&n.sourceVariant===tn.stitchedPreroll&&h&&((T=new vn(h.url,fn.none)).variant=tn.stitchedPreroll);var S=c?Qe.linearPlayback:Qe.all,k=g&&g.trackingId||i,E=new bn(i,r,o,f,T);if(E.authenticationTypes=d.map((function(t){switch(t){case"DIRECT":return pn.direct;case"OPEN":return pn.open;case"MVPD":return pn.mvpd;case"ISP":return pn.isp;default:return pn.none}})),E.description=a,E.isSyndicatable=I,s&&s.url&&E.images.push(new gn(s.url)),E.mrss=v,b){var C="linear"===b.type?Ze.linear:Ze.event;E.network=new yn(b.id,C,b.name,b.adobeResource)}return E.seekInSeconds=y,E.streamType=A,E.supportedMediaCommands=S,E.brand=E.brand?E.brand:"espn",E.tracking=In(E.brand,t,e,T),E.references={eventId:u,simulcastAiringId:m,trackingId:k,cerebroId:P},E.type=cn.video,E.entityType=e,E.apiSource=ln.graphQL,E.packages=(p||[]).map((function(t){return new mn(t.name)})),E}(l,e.entityType,r),e.resumeTime&&(h.seekInSeconds=e.resumeTime),!h.source.url){if(p="OVER"===l.status.toUpperCase(),f=l.network&&l.network.type===Ze.linear,v=l.network&&l.network.id,p&&f&&v)return[2,t.retryGetMediaItems(v,n,i,r)];throw new Error("No playable url")}return[2,h];case 4:return y=g.sent(),P.warn("Failed to retrieve MediaItem from GraphQL: "+y),[2,null];case 5:return[2]}}))}))},t.retryGetMediaItems=function(e,n,i,r){return E(this,void 0,void 0,(function(){var a,o,s,u;return C(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),a=Pn.identifierStringForNetwork(e,ln.graphQL),o=new Pn(a),[4,t.getPromiseMediaItems(o,n,i,r)];case 1:if((s=c.sent())&&s instanceof bn==!0)return[2,s];throw new Error("Retry fetchMediaItems failed with "+e);case 2:return u=c.sent(),P.warn("MediaItem is over and retry failed: "+u),[2,null];case 3:return[2]}}))}))},t.defaultConfiguration=new Tn(ln.graphQL),t}();var kn,En=function(){function t(){this.configuration_=t.defaultConfiguration}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(e,n){return E(this,void 0,void 0,(function(){return C(this,(function(i){switch(i.label){case 0:return[4,t.fetchMediaItems(e,n,this.configuration)];case 1:return[2,i.sent()]}}))}))},t.fetchMediaItems=function(e,n,i){return E(this,void 0,void 0,(function(){var n,r;return C(this,(function(a){switch(a.label){case 0:return n=e.map((function(t){return new Pn(t)})),r=i.serviceUrl,[4,A.all(n.map((function(e){return t.getPromiseMediaItem(e,r)})))];case 1:return[2,a.sent().filter((function(t){return!(t instanceof Error)&&t instanceof bn}))]}}))}))},t.getPromiseMediaItem=function(t,e){return E(this,void 0,void 0,(function(){var n,i,r;return C(this,(function(a){switch(a.label){case 0:n=e.replace("videoID",t.id),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,_(n)];case 2:return[4,a.sent().json()];case 3:return i=a.sent(),[2,function(t){var e=t.id,n=t.title,i=t.description,r=t.duration,a=t.source,o=t.type,s=t.entityType,u=t.streamType,c=t.authenticationTypes,d=t.language,l=t.network,h=t.brand,p=t.images,f=s,v=a.type,y=new vn(a.url,v),g=new bn(e,n,r,d,y);return g.authenticationTypes=c.map((function(t){switch(t){case"DIRECT":return pn.direct;case"OPEN":return pn.open;case"MVPD":return pn.mvpd;case"ISP":return pn.isp;default:return pn.none}})),g.description=i,l&&(g.network=new yn(l.id,l.type,l.name,l.resource)),g.streamType=u,g.brand=h,g.tracking=In(g.brand,t,f,y),g.images=p,g.type=o,g.entityType=f,g.apiSource=ln.cfa,g}(i)];case 4:return r=a.sent(),P.warn("Failed to retrieve MediaItem from CFA: "+r),[2,null];case 5:return[2]}}))}))},t.defaultConfiguration=new Tn(ln.cfa),t}(),Cn=(function(){function t(){}Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!1,configurable:!0}),t.prototype.getMediaItems=function(t,e){return E(this,void 0,void 0,(function(){var n,i;return C(this,(function(r){switch(r.label){case 0:return n=e||{sourceVariant:null},t[0].match("natgeo")?((i=new En).configuration=this.configuration||i.configuration,[4,i.getMediaItems(t,n)]):[3,2];case 1:return[2,r.sent()];case 2:return(i=new Sn).configuration=this.configuration||i.configuration,[4,i.getMediaItems(t,n)];case 3:return[2,r.sent()]}}))}))}}(),function(){function t(t){this.playbackUrl=t,this.textTracks=[]}return Object.defineProperty(t.prototype,"convivaContentMetadata",{get:function(){var t={accessType:null,mvpd:null};this.authenticationType&&(t.accessType=this.authenticationType&&this.authenticationType.toLowerCase()||"free",this.authenticatedProvider&&this.authenticationType===pn.mvpd&&(t.mvpd=this.authenticatedProvider.id));var e=this.mediaItem&&this.mediaItem.tracking[an.conviva]||{},n={streamUrl:this.playbackUrl,custom:Object.assign(e.custom||{},t)};return Object.assign(e,n)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"<PlaybackSession playbackUrl:"+this.playbackUrl+", authenticationType:"+this.authenticationType+", authenticatedProvider:"+this.authenticatedProvider+">"},t}());!function(t){t.none="none",t.fairPlay="fairplay",t.playReady="playready",t.widevine="widevine"}(kn||(kn={}));var On,Mn=kn;!function(t){t.none="HLS",t.hlsFairplay="HLS_FAIRPLAY",t.dashPlayReady="DASH_PLAYREADY",t.dashWidevine="DASH_WIDEVINE"}(On||(On={}));var Dn=On,Nn=function(){function t(){}return t.prototype.initPlaybackSession=function(t,e,n){var i=t.source.url;if(t.source.variant===tn.stitchedPreroll){var r=e.dictionaryForBrightcove();Object.keys(r).forEach((function(t){i=function(t,e,n){var i=-1===n.indexOf("?")?"?":"&";return n+i+t+"="+encodeURIComponent(e)}(t,r[t].toString(),i)}))}P.debug(i,t);var a=new Cn(i);return a.mediaItem=t,a.seekToTime=t.seekInSeconds,a.authenticationType=n.authenticationType,a.authenticatedProvider=n.authenticatedProvider,a.authenticatedIdentity=n.authenticatedIdentity,A.resolve(a)},t}();function Un(t){var e=t+":";return{Authorization:"Basic "+U.stringify(j.parse(e)),Accept:"application/json"}}var jn="live",Ln="vod",xn="accountId",Rn="channel",Bn="contentType",Hn="contractType",zn="hba",Fn="ship",Vn="region",Kn=function(){function t(t,e,n,i,r){e&&n&&i&&(this.programmer=t,this.applicationId=e,this.identityProvider=encodeURIComponent(n),this.subject=encodeURIComponent(i),this.metadata=r||{},this.serviceUrl="https://web.archive.org/web/20210915144012/https://streams.adobeprimetime.com/v2",this.requestHeaders=Un(e),this.heartbeatIntervalId=null,this.messages={})}return t.fetchMetadataKeys=function(e,n){return E(this,void 0,void 0,(function(){var i,r,a,o,s,u;return C(this,(function(c){switch(c.label){case 0:i=n+"/metadata",r=Un(e),a={method:"GET",headers:r},c.label=1;case 1:return c.trys.push([1,5,,6]),[4,_(i,a)];case 2:return(o=c.sent())?[4,o.json()]:[3,4];case 3:return s=c.sent(),t.setLocalStorageByAppID(s,e),[2,!0];case 4:return[2,!1];case 5:return u=c.sent(),console.log("fetchMetadataKeys error: "+u),[2,!1];case 6:return[2]}}))}))},t.setLocalStorageByAppID=function(t,e){var n="AdobeCM.metadata."+e;localStorage.setItem(n,JSON.stringify(t))},Object.defineProperty(t.prototype,"metadataKeys",{get:function(){return this.getMetadataKeysFromLocalStorage_(this.applicationId)},enumerable:!1,configurable:!0}),t.prototype.getMetadataKeysFromLocalStorage_=function(t){var e="AdobeCM.metadata."+t,n=[];try{n=JSON.parse(localStorage.getItem(e))||[]}catch(t){console.error("AdobeCM getMetadataKeys error: "+t)}return n},t.prototype.start=function(){return E(this,void 0,void 0,(function(){var t;return C(this,(function(e){switch(e.label){case 0:return[4,this.createSession()];case 1:return(t=e.sent())?(this.scheduleHeartbeat(),[2,t]):[2,null]}}))}))},t.prototype.startWithSession=function(t){this.sessionId=t,this.scheduleHeartbeat()},t.prototype.stop=function(){this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=null),this.terminateSession()},t.prototype.createSession=function(t){return void 0===t&&(t=[]),E(this,void 0,void 0,(function(){var e,n,i,r,a,o,s,u,c,d,l;return C(this,(function(h){switch(h.label){case 0:P.debug("AdobeConcurrencyMonitorV2.createSession"),e=this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject,n=k({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},this.requestHeaders),t.length>0&&(n["X-Terminate"]=t.join(",")),i=this.getMetadata(),r=Object.keys(i).map((function(t){return t+"="+encodeURIComponent(i[t])})).join("&"),a={method:"POST",headers:n,body:r},h.label=1;case 1:return h.trys.push([1,3,,5]),[4,this.fetchRequest(e,a,!0)];case 2:if(!(o=h.sent()))throw"fetchRequest failed";if(s=o.error,u=o.sessionId,s)throw c=o.status,d=o.json,{status:c,json:d};return this.sessionId=u,P.debug("AdobeConcurrencyMonitorV2.createSession sessionId:",u),[2,u];case 3:return l=h.sent(),P.error("AdobeConcurrencyMonitorV2.createSession error: ",l),[4,this.handleError(l,!1)];case 4:return[2,h.sent()];case 5:return[2]}}))}))},t.prototype.heartbeat=function(){return E(this,void 0,void 0,(function(){var t,e,n,i,r,a,o;return C(this,(function(s){switch(s.label){case 0:if(!(t=this.sessionId))return[2];P.debug("AdobeConcurrencyMonitorV2.heartbeat",t),e=this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject+"/"+t,n={method:"POST",headers:this.requestHeaders},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.fetchRequest(e,n,!1)];case 2:if(!(i=s.sent()))throw"fetchRequest failed";if(i.error)throw r=i.status,a=i.json,{status:r,json:a};return this.scheduleHeartbeat(),[3,4];case 3:return o=s.sent(),P.error("AdobeConcurrencyMonitorV2.heartbeat error: ",o),[2,this.handleError(o,!0)];case 4:return[2]}}))}))},t.prototype.scheduleHeartbeat=function(){var t=this;P.debug("AdobeConcurrencyMonitorV2.scheduleHeartbeat"),clearTimeout(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setTimeout((function(){t.heartbeat()}),45e3)},t.prototype.fetchRequest=function(t,e,n){return E(this,void 0,void 0,(function(){var i,r,a,o,s;return C(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),[4,_(t,e)];case 1:return i=u.sent(),(r=i.status)>=200&&r<300?[3,3]:[4,i.clone().json().catch((function(){return!!i.text()||null}))];case 2:return a=u.sent(),[2,{status:r,json:a,error:!0}];case 3:return o=void 0,n&&(o=i.headers.get("location").trim()),[2,{sessionId:o,status:r,error:!1}];case 4:return s=u.sent(),console.error("AdobeCM fetchRequest: "+s),[2,null];case 5:return[2]}}))}))},t.prototype.terminateSession=function(){return E(this,void 0,void 0,(function(){var t,e,n,i,r;return C(this,(function(a){switch(a.label){case 0:if(!(t=this.sessionId))return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,_(e=this.serviceUrl+"/sessions/"+this.identityProvider+"/"+this.subject+"/"+t,{method:"DELETE",headers:this.requestHeaders})];case 2:if(n=a.sent(),!((i=n.status)>=200&&i<300))throw new Error("Error - url: "+e+", status: "+i);return[3,4];case 3:return r=a.sent(),console.error("AdobeCM TerminateSession "+r),[3,4];case 4:return[2]}}))}))},t.prototype.handleError=function(t,e){P.debug("AdobeConcurrencyMonitorV2.handleError",t);var n=t.status,i=t.json;switch(n){case 400:return this.handleError400_(i);case 409:return this.handleError409_(i,e);case 410:return this.handleError410_(i,e)}},t.prototype.handleError400_=function(e){return E(this,void 0,void 0,(function(){var n,i;return C(this,(function(r){switch(r.label){case 0:return n=e&&e.obligations||[],!!n.find((function(t){return"logout"===t.action||"refresh"===t.action}))?[4,t.fetchMetadataKeys(this.applicationId,this.serviceUrl)]:[3,2];case 1:if(r.sent(),i=this.metadata,Object.keys(i).length>=this.metadataKeys.length)return[2,this.start()];r.label=2;case 2:return[2,null]}}))}))},t.prototype.handleError409_=function(t,e){try{var n=(t&&t.associatedAdvice||[]).find((function(t){return"rule-violation"===t.type}));if(n){var i=n.message,r=this.messages[i]||i,a=new Error(r),o=!!(t.obligations||[]).find((function(t){return"logout"===t.action}));if(P.debug("AdobeConcurrencyMonitorV2.handleError",409,a,o),!e)throw a;this.onError(a,o)}}catch(t){P.debug("AdobeConcurrencyMonitorV2.handleError409_: "+t)}return null},t.prototype.handleError410_=function(t,e){if(!t)return this.start();try{var n=(t&&t.associatedAdvice||[]).find((function(t){return"remote-termination"===t.type}));if(n){var i=n.message,r=this.messages[i]||i,a=new Error(r),o=!!t.obligations.find((function(t){return"logout"===t.action}));if(P.debug("AdobeConcurrencyMonitorV2.handleError",410,a,o),!e)throw a;this.onError(a,o)}}catch(t){P.debug("AdobeConcurrencyMonitorV2.handleError410_: "+t)}return null},t.prototype.getMetadata=function(){var t=this;return this.metadataKeys.reduce((function(e,n){return e[n]=t.metadata[n],e}),{})},t.prototype.onError=function(t,e){P.debug("AdobeConcurrencyMonitor.onError"),P.debug("error: "+t),P.debug("shouldLogout: "+e)},t}(),Gn=w((function(t,e){var n;t.exports=(n=N,function(t){var e=n,i=e.lib,r=i.WordArray,a=i.Hasher,o=e.algo,s=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(s[r]=n(t.pow(i,.5))),u[r]=n(t.pow(i,1/3)),r++),i++}();var c=[],d=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],d=n[5],l=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|t[e+p];else{var f=c[p-15],v=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,y=c[p-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[p]=v+c[p-7]+g+c[p-16]}var m=i&r^i&a^r&a,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),w=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&d^~s&l)+u[p]+c[p];h=l,l=d,d=s,s=o+w|0,o=a,a=r,r=i,i=w+(b+m)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+d|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(d),e.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256)})),Jn=function(){function t(t,e,n){void 0===n&&(n={}),this.programmer=t,this.applicationId=e,this.metadata=n}return t.prototype.withSession=function(t){var e=t.authenticationType,n=t.authenticatedIdentity,i=t.authenticatedProvider,r=t.mediaItem;if(e!==pn.mvpd)return this;var a=n,o=i&&i.id;return this.metadata[xn]=a,this.metadata[Rn]=r.network&&r.network.id,this.metadata[Bn]=r.streamType===nn.live?jn:Ln,this.metadata[Hn]="",this.metadata[zn]=!!t.authenticatedProvider&&t.authenticatedProvider.isHomeBasedAuth,this.subject=a,this.identityProvider=o,this},t.prototype.withLocationProvider=function(t){var e=t.getPublicIPAddress();return this.metadata[Fn]=e?Gn("m!ck3ym0u$3"+e):null,this.metadata[Vn]=t.getRegion()?t.getRegion():null,this},t.prototype.withServiceUrl=function(t){return this.serviceUrl=t,this},t.prototype.withMessages=function(t){return this.messages=t,this},t.prototype.build=function(){if(!this.subject||!this.identityProvider)return null;var t=new Kn(this.programmer,this.applicationId,this.identityProvider,this.subject,this.metadata);return this.serviceUrl&&(t.serviceUrl=this.serviceUrl),this.messages&&(t.messages=this.messages||{}),t},t}(),qn=function(){function t(t,e){this.partner=t,this.platform=e}return t.prototype.startSession=function(t,e,n,i,r,a){var o=["partner="+this.partner,"platform="+this.platform,"token="+encodeURIComponent(n),"tokenType="+i,"v=2.0.0","ttl=21600"];if(r){var s=U.stringify(j.parse(r));o.push("resource="+encodeURIComponent(s))}a&&Object.keys(a).forEach((function(t){o.push(t+"="+encodeURIComponent(a[t]))}));var u=/swid=*/g;o.some((function(t){return u.test(t)}))||o.push("swid="+encodeURIComponent(e));return _(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:o.join("&")}).then((function(t){return t.json()})).then((function(t){if(!t.session)throw new Error(t.message||"An unexpected error occurred. ["+t.abbreviation+"]");return t})).catch((function(t){if(t.message)throw new Error(t.message);return t.json().then((function(t){throw new Error(t.message||"An unexpected error occurred. ["+t.abbreviation+"]")}))}))},t}(),Yn=function(){function t(t){this.authButler=t}return t.prototype.initPlaybackSession=function(t,e,n){var i=t.source.url;t.source.startSessionUrl&&t.source.type===fn.shield&&(i=t.source.startSessionUrl);try{var r=window&&window.location.protocol;r&&"https:"===r&&(i=i.replace(/^http(s?):/,r))}catch(t){}var a=n.customData,o=a.token,s=a.tokenType,u=a.resource,c=void 0===u?t.mrss:u,d=e&&e.swid,l=this.authButler;if(!l)throw new Error("startSession support not configured");return l.startSession(i,d,o,s,c,e.dictionaryForStartSession()).then((function(e){var i=function(t,e){var n=t.playbackUrl,i=new Cn(n);return i.token=e,i}(e,o);return i.mediaItem=t,i.seekToTime=t.seekInSeconds,i.authenticationType=n.authenticationType,i.authenticatedProvider=n.authenticatedProvider,i.authenticatedIdentity=n.authenticatedIdentity,i}))},t}(),Wn=function(){function t(){}return t.prototype.initPlaybackSession=function(t,e,n){var i=new Cn(t.source.url);return i.mediaItem=t,i.seekToTime=t.seekInSeconds,i.authenticationType=null==n?void 0:n.authenticationType,i.authenticatedProvider=null==n?void 0:n.authenticatedProvider,i.authenticatedIdentity=null==n?void 0:n.authenticatedIdentity,A.resolve(i)},t}(),Qn="ADOBEPASS",Xn="JWT",Zn="AUTHTOKEN",$n=function(t){if(t instanceof Error)throw t;return t.json&&t.json().then((function(t){var e=t.message||"An unexpected error occurred. ["+t.exception+"]";throw"com.espn.watch.api.AccessDeniedException"===t.exception&&(e="This content is not available for your package or region."),new Error(e)}))},ti=function(){function t(t,e){this.drmSupport=Dn.none,this.serviceUrl="https://web.archive.org/web/20210915144012/https://watch.auth.api.espn.com",this.apiKey=t,this.serviceUrl=e||"https://web.archive.org/web/20210915144012/https://watch.auth.api.espn.com"}return t.prototype.getAsset=function(t,e,n,i,r){var a=this.serviceUrl+"/video/auth/media/"+t+"/asset";return this.getAssetForUrl(a,e,n,i,r)},t.prototype.getAssetForUrl=function(t,e,n,i,r){var a=r||{},o={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},s=-1===t.indexOf("?")?"?":"&",u=""+t+s+"apikey="+this.apiKey;if(e)if(n===Qn){if(a.adobeToken=e,i){var c=U.stringify(j.parse(i));a.adobeResource=c}}else n==Xn?o.Authorization="Bearer "+a.token:n==Zn?(s=-1===u.indexOf("?")?"?":"&",u=""+u+s+"authtoken="+e):a.token=e;return a.drmSupport=this.drmSupport,_(u,{method:"POST",headers:o,credentials:"include",body:Object.keys(a).map((function(t){return t+"="+encodeURIComponent(a[t])})).join("&")}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(t){if(!t.stream){var e=t.message||"An unexpected error occurred.";throw new Error(e)}return t})).catch($n)},t.defaultServiceUrl="https://web.archive.org/web/20210915144012/https://watch.auth.api.espn.com",t}(),ei=function(){function t(t){this.shieldAPI=t}return t.prototype.initPlaybackSession=function(t,e,n){return E(this,void 0,void 0,(function(){var i,r,a,o,s,u,c,d,l,h,p,f,v,y,g,m,b,w;return C(this,(function(P){switch(P.label){case 0:if(i=n.customData.token,r=n.customData.zipcode,a=n.customData,s=(o=void 0===a?{}:a).tokenType,u=o.resource,c=void 0===u?t.mrss:u,e.palNonce)return[3,4];P.label=1;case 1:return P.trys.push([1,3,,4]),d=e,[4,ce.getGooglePalNonce(e)];case 2:return d.palNonce=P.sent(),[3,4];case 3:return l=P.sent(),console.warn(l),[3,4];case 4:if(h=e.dictionaryForStartSession(),r&&(h.zipcode=r),!(p=this.shieldAPI))throw new Error("shield support not configured");return f=t.source.url,[4,p.getAssetForUrl(f,i,s,c,h)];case 5:return v=P.sent(),y=v.stream,g=v.captions,m=v.streamInfo,b=v.gatekeeperToken,(w=new Cn(y)).mediaItem=t,w.seekToTime=t.seekInSeconds,w.authenticationType=n.authenticationType,w.authenticatedProvider=n.authenticatedProvider,w.authenticatedIdentity=n.authenticatedIdentity,w.token=b,w.playbackConfig=function(t){if(!t)return null;var e=t.streamType,n=t.licenseAcquisitionUrl,i=t.certificateUrl;switch(e){case"DASH_PLAYREADY":return new Ye("application/dash+xml",kn.playReady,n);case"DASH_WIDEVINE":return new Ye("application/dash+xml",kn.widevine,n);case"HLS_FAIRPLAY":return new Ye("application/x-mpegURL",kn.fairPlay,i);case"HLS":return new Ye("application/x-mpegURL",kn.none);default:return null}}(m),w.textTracks=function(t){if(!t)return[];var e={source:t};return t.endsWith(".vtt")&&(e.contentType="text/vtt"),[e]}(g),[2,w]}}))}))},t}(),ni=function(){function t(){this.partner=null,this.platform=null,this.apiKey=null,this.deviceId=null,this.authenticators={},this.authorizers={},this.playbackSessionFactories={},this.playbackSessionFactories[Pt.none]=new Wn}return t.prototype.getAuthenticator=function(t){return this.authenticators[t]},t.prototype.setAuthenticator=function(t,e){var n=this;this.convertToArray(e).forEach((function(e){n.authenticators[e.toString()]=t}))},t.prototype.getAuthorizer=function(t){return this.authorizers[t]},t.prototype.setAuthorizer=function(t,e){var n=this;this.convertToArray(e).forEach((function(e){n.authorizers[e.toString()]=t}))},t.prototype.getPlaybackSessionFactory=function(t){return this.playbackSessionFactories[t]},t.prototype.setPlaybackSessionFactory=function(t,e){this.playbackSessionFactories[e]=t},t.prototype.checkAuthentication=function(){var t=this,e=Object.keys(this.authenticators).map((function(e){var n=t.authenticators[e];return n.checkAuthentication().then((function(t){return P.debug(e+" authenticator","isAuthenticated: "+t,"authenticatedProvider: "+n.authenticatedProvider),t})).catch((function(){return!1}))}));return A.all(e).then((function(t){return t.every((function(t){return!0===t}))}))},t.prototype.isAuthenticatedForMediaItem=function(t){var e=this;return t.authenticationTypes.length<1||-1!==t.authenticationTypes.indexOf(wt.none)||t.authenticationTypes.map((function(t){return e.authenticators[t]})).filter((function(t){return t})).some((function(t){return t.isAuthenticated}))},t.prototype.isAuthenticatedWithAuthType=function(t){var e=this.authenticators[t];return!!e&&e.isAuthenticated},t.prototype.authenticateWithAuthType=function(t,e){var n=this.authenticators[t];if(n)return n.authenticate(e)},t.prototype.checkAuthorization=function(t,e){var n=this;if(t.authenticationTypes&&t.authenticationTypes.length<1||-1!==t.authenticationTypes.indexOf(wt.none)){var i=new Gt(t.id,t.title,t.images[0].url,t.source.url),r=new Yt(wt.none,i,t.id,{}),a=new Wt(!0,r);return A.resolve(a)}var o=[wt.open,wt.mvpd,wt.direct,wt.isp].filter((function(e){return-1!==t.authenticationTypes.indexOf(e)})),s=o.map((function(t){return n.authorizers[t]})).filter((function(t){return t&&t.checkAuthorization}));return P.debug("mediaItem.authTypes:",o),0===s.length?A.reject(new Error("no authorizer configured to support authTypes: "+t.authenticationTypes)):function t(e,n,i,r){return void 0===r&&(r=[]),i.shift().checkAuthorization(e,n).then((function(a){return a.success?a:i.length<1?r.length>0?A.reject(null):a:t(e,n,i,r)})).catch((function(a){if(i.length>0)return a&&r.push(a),t(e,n,i,r);var o=r[0]||a;if(o)throw o}))}(t,e,s)},t.prototype.initPlaybackSession=function(t,e){var n=this;return!t.source.type&&t.authenticationTypes.length>0?A.reject(new Error("This event is not currently available.")):this.checkAuthorization(t,e).then((function(i){var r,a,o;P.debug("AuthenticationManager.initPlaybackSession.checkAuthorization result:",i.success);var s=i.success,u=i.payload;if(!s)throw new Error("Not authorized.");if(!(null===(r=null==t?void 0:t.source)||void 0===r?void 0:r.type))throw new Error("Media Item source type is missing.");var c=n.playbackSessionFactories[null===(a=null==t?void 0:t.source)||void 0===a?void 0:a.type];if(!c)throw new Error("SessionFactory for source type '"+(null===(o=null==t?void 0:t.source)||void 0===o?void 0:o.type)+"' is missing.");var d=new ce;return d.authenticationProvider=i.payload.authenticatedProvider&&i.payload.authenticatedProvider.id,d.merge(e),c.initPlaybackSession(t,d,u).then((function(t){P.debug("AuthenticationManager.initPlaybackSession",t);var e=n.concurrencyMonitorBuilder&&n.concurrencyMonitorBuilder.withSession(t).build();return e?e.createSession().then((function(e){return t.concurrencyMonitorSessionId=e,t})):t}))}))},Object.defineProperty(t.prototype,"authStates",{get:function(){var t=this.authenticators[wt.mvpd],e=[];return this.authenticators[wt.isp].isAuthenticated&&e.push("isp"),!0===t.isAuthenticated?e.push("mvpd_login"):!0===t.wasPreviouslyAuthenticated&&e.push("mvpd_previous"),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preauthorizedResources",{get:function(){var t=this;return Object.keys(this.authenticators).map((function(e){return t.authenticators[e].preauthorizedResources})).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t,e,n){return n.indexOf(t)===e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryAuthenticatedProvider",{get:function(){var t=this;return[wt.mvpd,wt.isp].map((function(e){return t.getAuthenticator(e)})).filter((function(t){return t.isAuthenticated})).map((function(t){return t.authenticatedProvider}))[0]},enumerable:!0,configurable:!0}),t.prototype.convertToArray=function(t){if(!t)return[];var e=[];return Array.isArray(t)?e=t:"string"==typeof t&&e.push(t),e},t}();ni.AuthenticateOptionsKey={redirectUrl:"redirectUrl"};var ii=function(){function t(){this.isAuthenticated=!0,this.authenticatedIdentity=null,this.authenticatedProvider=null,this.preauthorizedResources=this.isAuthenticated?["espn_free"]:[]}return t.prototype.checkAuthentication=function(){return A.resolve(!0)},t.prototype.authenticate=function(){return A.resolve(!0)},t.prototype.deauthenticate=function(){return A.resolve(!0)},t.prototype.checkAuthorization=function(t){var e;if(-1===t.authenticationTypes.indexOf(wt.open)||!this.isAuthenticated)return A.resolve(new Wt(!1,null));var n=((e={})[Yt.CustomDataKey.token]="IA==",e[Yt.CustomDataKey.tokenType]="DEVICE",e),i=new Yt(wt.open,this.authenticatedProvider,this.authenticatedIdentity,n),r=new Wt(!0,i);return A.resolve(r)},t}(),ri=function(){function t(n,i,r){e(this,t),this.id=n,this.profile=i,this.preferences=r}return i(t,[{key:"favoriteSports",get:function(){return this.preferences.filter((function(t){return t.metadata.sportId&&!t.metadata.teamId})).map((function(t){return t.metadata}))}},{key:"favoriteTeams",get:function(){return this.preferences.filter((function(t){return t.metadata.teamInfo})).map((function(t){return t.metadata}))}},{key:"fantasyPreferences",get:function(){return this.preferences.filter((function(t){return 9===t.type.id}))}},{key:"isLeagueManager",get:function(){return this.preferences.some((function(t){var e=t.metadata&&t.metadata.entry&&t.metadata.entry;return e&&!0===e.isLeagueManager}))}},{key:"toString",value:function(){return"<Fan id:".concat(this.id,">")}}],[{key:"fromJson",value:function(e){if(!e)return null;var n=ai.fromJson(e.profile),i=e.preferences.map((function(t){return ui.fromJson(t)}));return new t(e.id,n,i)}}]),t}(),ai=function(){function t(n,i,r){e(this,t),this.isInsider=n,this.hasNotificationPreferences=i,this.settings=r}return i(t,[{key:"toString",value:function(){return"<FanProfile isInsider:".concat(this.isInsider,", hasNotificationPreferences:").concat(this.hasNotificationPreferences,">")}}],[{key:"fromJson",value:function(e){if(!e)return null;var n=oi.fromJson(e.settings);return new t(e.isInsider,e.hasNotificationPreferences,n)}}]),t}(),oi=function(){function t(n){e(this,t),this.videoAutoStart=n}return i(t,null,[{key:"fromJson",value:function(e){return e?new t(si.fromJson(e.videoAutoStart)):null}}]),t}(),si=function(){function t(n){e(this,t),this.value=n}return i(t,null,[{key:"fromJson",value:function(e){return e?new t(e.value):null}}]),t}(),ui=function(){function t(n,i,r){e(this,t),this.id=n,this.metadata=i,this.type=r}return i(t,null,[{key:"fromJson",value:function(e){if(!e)return null;var n=di.fromJson(e.metaData||e.metadata),i=ci.fromJson(e.type);return new t(e.id,n,i)}}]),t}(),ci=function(){function t(n,i,r){e(this,t),this.id=n,this.name=i,this.code=r}return i(t,null,[{key:"fromJson",value:function(e){return e?new t(e.id,e.name,e.code):null}}]),t}(),di=function(){function t(n,i,r,a){e(this,t),this.sportId=n,this.teamId=i,this.teamInfo=r,this.entry=a}return i(t,[{key:"uid",get:function(){if(this.teamInfo)return this.teamInfo.uid;var t=null;return this.sportId&&(t="s:".concat(this.sportId),this.teamId&&(t="".concat(t,"~t:").concat(this.teamId))),t}}],[{key:"fromJson",value:function(e){if(!e)return null;var n=null;if(e.teamInfo)n=new pi(e.teamInfo.uid,e.teamInfo.name,e.teamInfo.fullName,e.teamInfo.logoUrl,e.teamInfo.darkLogoUrl,e.teamInfo.scoreboardLogoUrl,e.teamInfo.scoreboardDarkLogoUrl);else if(e.team){var i=e.team,r=i.coreData.logos.filter((function(t){return-1!==t.rel.indexOf("default")})).map((function(t){return t.href}))[0],a=i.coreData.logos.filter((function(t){return-1!==t.rel.indexOf("dark")&&-1===t.rel.indexOf("scoreboard")})).map((function(t){return t.href}))[0],o=i.coreData.logos.filter((function(t){return-1!==t.rel.indexOf("scoreboard")&&-1===t.rel.indexOf("dark")})).map((function(t){return t.href}))[0],s=i.coreData.logos.filter((function(t){return-1!==t.rel.indexOf("scoreboard")&&-1!==t.rel.indexOf("dark")})).map((function(t){return t.href}))[0];n=new pi(i.uid,i.name,i.text,r,a||r,o||r,s||a||r)}var u=li.fromJson(e.entry);return new t(e.sportId,e.teamId,n,u)}}]),t}(),li=function(){function t(n){e(this,t),this.groups=n}return i(t,[{key:"isLeagueManager",get:function(){return this.groups.some((function(t){return!0===t.groupManager}))}}],[{key:"fromJson",value:function(e){return e?new t((e.groups||[]).map((function(t){return hi.fromJson(t)}))):null}}]),t}(),hi=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.groupManager=n}return i(t,null,[{key:"fromJson",value:function(e){return e?new t(e.groupManager):null}}]),t}(),pi=function t(n,i,r,a,o,s,u){e(this,t),this.uid=n,this.name=i,this.fullName=r,this.logoUrl=a,this.darkLogoUrl=o,this.scoreboardLogoUrl=s,this.scoreboardDarkLogoUrl=u},fi=function(){function t(){e(this,t),this.serviceUrl="https://web.archive.org/web/20210915144012/https://fan.api.espn.com/apis/v2/fans"}return i(t,[{key:"getFan",value:function(t){var e=nt.platform,n=this.serviceUrl||"https://web.archive.org/web/20210915144012/https://fan.api.espn.com/apis/v2/fans";return _("".concat(n,"/").concat(encodeURIComponent(t),"?prefType=sports&prefType=teams&prefType=fantasy&coreData=logos"),{method:"GET",headers:{"X-Personalization-Source":"espn-watchsdk-js-".concat(e)}}).then((function(t){return t.json()})).then((function(t){return ri.fromJson(t)}))}}]),t}(),vi=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,null,[{key:"getFan",value:function(t){var e=Q.shared.getConfiguration("fanApi",{serviceUrl:"https://web.archive.org/web/20210915144012/https://fan.api.espn.com/apis/v2/fans"}).serviceUrl,n=new fi;return n.serviceUrl=e,n.getFan(t)}}]),r}(fi);localStorage.getItem("FanManager.anonSwid")||_("https://web.archive.org/web/20210915144012/https://log.espn.com/log?srvc=sz&silent&returnBody=SWID&responseType=JSON").then((function(t){return t.json()})).then((function(t){var e=t.SWID;e&&localStorage.setItem("FanManager.anonSwid",e)}));var yi,gi=function(){function t(){e(this,t)}return i(t,null,[{key:"swid",get:function(){return localStorage.getItem("FanManager.anonSwid")}}]),t}(),mi=function(){function t(){e(this,t)}return i(t,null,[{key:"swid",get:function(){return localStorage.getItem("FanManager.swid")||gi.swid},set:function(t){if(!t)return localStorage.removeItem("FanManager.swid"),void localStorage.removeItem("FanManager.fan");localStorage.setItem("FanManager.swid",t)}},{key:"fan",get:function(){var t=localStorage.getItem("FanManager.fan");try{return ri.fromJson(JSON.parse(t))}catch(t){return null}}},{key:"update",value:function(){var e=localStorage.getItem("FanManager.swid");return e?vi.getFan(e).then((function(t){return localStorage.setItem("FanManager.fan",JSON.stringify(t)),t})):A.resolve(t.fan)}}]),t}(),bi=function(){function t(t,e,n,i,r,a,o,s,u){this.id=t,this.name=e,this.adobeId=n,this.tier=i,this.websiteUrl=r,this.images=a,this.rank=o,this.availability=s,this.accessType=u,this.id=t,this.name=e,this.adobeId=n,this.tier=i,this.websiteUrl=r,this.images=a||[],this.rank=o,this.availability=s,this.accessType=u}return t.prototype.getPreferredLogoUrl=function(t){var e=this.images.filter((function(t){return"COLOR_NEGATIVE"===t.type})).map((function(t){return t.type}))[0],n=this.images.filter((function(t){return"BW_NEGATIVE"===t.type})).map((function(t){return t.type}))[0]||e;return n?"https://web.archive.org/web/20210915144012/https://s.secure.espncdn.com/stitcher/watch/clients/"+t+"-web/providers/"+this.adobeId+".png?height=40&imageType="+n:this.images.filter((function(t){return"DESKTOP"===t.type})).map((function(t){return t.href}))[0]||null},t.prototype.toString=function(){return"<Provider id:"+this.id+", name:"+this.name+", adobeId:"+this.adobeId+">"},t}();!function(t){t.mvpd="mvpd",t.isp="isp",t.tve="tve"}(yi||(yi={}));var wi=yi,Pi=function(t){this.serviceUrl=t,this.serviceUrl=t};function Ii(t,e){var n=t.tier||99,i=e.tier||99;if(n<i)return-1;if(n>i)return 1;var r=t.rank||9999,a=e.rank||9999;if(r<a)return-1;if(r>a)return 1;var o=t.name.toLowerCase(),s=e.name.toLowerCase();return o<s?-1:o>s?1:0}var Ai={negativebgcolorImage:"COLOR_NEGATIVE",negativebgbwImage:"BW_NEGATIVE",positivebgcolorImage:"COLOR_POSITIVE",positivebgbwImage:"BW_POSITIVE",desktop:"DESKTOP"};function _i(t,e){if(!t)return null;var n=t.id,i=t.name,r=t.websiteUrl,a=t.adobeId,o=t.logos,s=t.accessType,u=function(t){return Object.keys(t).filter((function(e){return Ai[e]&&!!t[e]})).map((function(e){return{href:t[e].trim(),type:Ai[e]}}))}(o),c=t.countries.filter((function(t){return t.countryCode.toLowerCase()===e.toLowerCase()}))[0],d=c&&c.tier,l=c&&c.rank;return new bi(n,i,a,d,r,u,l,null,s)}function Ti(t,e){return t.rows?t.rows.map((function(t){return _i(t.data,e)})).sort(Ii):[_i(t,e)]}var Si={};Si[wi.mvpd]="adobeId",Si[wi.isp]="ispId",Si[wi.tve]="id";var ki,Ei=new Pi("https://web.archive.org/web/20210915144012/https://affiliate.api.espn.com/affiliateApi/affiliates?includeProperties=true&rows=1000&apikey=q458c7hcllto16w0wcjytqoxq"),Ci=function(){function t(t){this.locationProvider=t||{getCountryCode:function(){return"us"}},this.applicationId=null,this.configuration=Ei}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationId",{get:function(){return this.applicationId_},set:function(t){this.applicationId_=t},enumerable:!0,configurable:!0}),t.prototype.getProvider=function(t,e,n){return void 0===n&&(n={}),E(this,void 0,void 0,(function(){var i,r,a,o;return C(this,(function(s){switch(s.label){case 0:return i=e||wi.mvpd,r=Si[i]||"adobeId",n[r]=t,[4,this.getProviders(n)];case 1:if(a=s.sent(),!(o=a[0]))throw new Error("Unable to find provider.");return[2,o]}}))}))},t.prototype.getProviders=function(t){return void 0===t&&(t={}),E(this,void 0,void 0,(function(){var e,n,i,r,a,o,s;return C(this,(function(u){switch(u.label){case 0:e=this.configuration.serviceUrl,n=-1===e.indexOf("?")?"?":"&",i=this.applicationId,r=function(t){return-1!==["PR","GU","VI"].indexOf(t)?"US":t}(this.locationProvider.getCountryCode().toUpperCase()),t.country=r,i&&(t.application=i),a=Object.keys(t).map((function(e){if("id"!==e)return e+"="+encodeURIComponent(t[e])})).join("&"),o=""+e+n+a,t.id&&(s=e.split("?"),o=s[0]+"/"+t.id+"?"+s[1]),u.label=1;case 1:return u.trys.push([1,4,,5]),[4,_(o)];case 2:return[4,u.sent().json()];case 3:return[2,Ti(u.sent(),r)];case 4:return u.sent(),[2,[]];case 5:return[2]}}))}))},t.defaultConfiguration=Ei,t}(),Oi=function(){function t(){e(this,t)}return i(t,[{key:"getCountryCode",value:function(){}}]),t}(),Mi=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"getCountryCode",value:function(){return"us"}}]),r}(Oi),Di=function(t){u(r,t);var n=h(r);function r(t){return e(this,r),n.call(this,t||new Mi)}return i(r,[{key:"configuration",get:function(){var t=Q.shared.getConfiguration("provider",s({applicationKeyMap:{}},Ci.defaultConfiguration));return P.debug("ESPNAffiliateAPI.getConfiguration ".concat(JSON.stringify(t))),t},set:function(t){y(c(r.prototype),"configuration",t,this,!0)}},{key:"applicationId",get:function(){var t=function(t){return"US"===t||"GU"===t||"PR"===t||"VI"===t}(this.locationProvider.getCountryCode().toUpperCase())&&"web"===nt.platform?"".concat(nt.partner,"_").concat(nt.platform):"".concat(nt.platform),e=this.configuration.applicationKeyMap||{};return e[t]&&(t=e[t]),P.debug("ESPNAffiliateAPI.getApplicationId ".concat(t)),t},set:function(t){y(c(r.prototype),"applicationId",t,this,!0)}}]),r}(Ci),Ni=function(){function t(){e(this,t)}return i(t,null,[{key:"getBuilder",value:function(){var t,e=Q.shared.getConfiguration("adobeCM",Z);if(!1===e.enabled)return null;var n=nt.platform,i=e.applications&&e.applications[n],a=e.applicationId||i&&i.applicationId,o=(r(t={},L,a),r(t,x,n),r(t,R,""),r(t,B,"false"),r(t,H,"ESPN"),t);return new Jn("ESPN",a,o).withServiceUrl(e.serviceUrl).withMessages(e.messages||{})}}]),t}();!function(t){t.localStorage="LOCAL_STORAGE",t.sessionStorage="SESSION_STORAGE"}(ki||(ki={}));var Ui,ji=ki,Li=function(){function t(t,e,n,i){this.id=t,this.name=e,this.logoUrl=n,this.websiteUrl=i}return t.prototype.toString=function(){return"<AuthenticatedProvider id:"+this.id+", name:"+this.name+", logoUrl:"+this.logoUrl+", websiteUrl:"+this.websiteUrl+">"},t.fromObject=function(e){return new t(e.id,e.name,e.logoUrl,e.websiteUrl)},t}();!function(t){t.token="token",t.tokenType="tokenType",t.resource="resource",t.requestor="requestor",t.fullToken="fullToken"}(Ui||(Ui={}));var xi,Ri,Bi=function(){function t(t,e,n,i){void 0===i&&(i={}),this.authenticationType=t,this.authenticatedProvider=e,this.authenticatedIdentity=n,this.customData=i}return t.CustomDataKey=Ui,t}(),Hi=function(t,e){this.success=t,this.payload=e};!function(t){t.standard="default",t.googleAdManager="gam"}(xi||(xi={})),function(t){t.standard="default",t.prod="prod",t.development="dev"}(Ri||(Ri={}));var zi,Fi=function(t,e){e.setItem("watchsdk.isp_authenticator.state",JSON.stringify(t))},Vi=new function(t){this.userDataServiceUrl=t}("https://web.archive.org/web/20210915144012/https://broadband.espn.com/espn3/auth/watchespn/user"),Ki=function(){function t(t,e,n){switch(this.partner=t,this.platform=e,this.providerDataSource=null,this.configuration=Vi,n){case ji.localStorage:this.storage=localStorage;break;case ji.sessionStorage:this.storage=sessionStorage;break;default:this.storage=localStorage}this.state_={};try{var i=this.storage.getItem("watchsdk.isp_authenticator.state");i||(i=function(t){var e="true"===t.getItem("ISPAuthenticator.isAuthenticated"),n=t.getItem("ISPAuthenticator.authenticatedIdentity"),i=null;try{i=JSON.parse(t.getItem("ISPAuthenticator.authenticatedProvider"))}catch(t){}var r={isAuthenticated:e,authenticatedIdentity:n,authenticatedProvider:i};return t.removeItem("ISPAuthenticator.isAuthenticated"),t.removeItem("ISPAuthenticator.authenticatedIdentity"),t.removeItem("ISPAuthenticator.authenticatedProvider"),r}(this.storage),Fi(this.state_,this.storage));var r=JSON.parse(i.toString());r.authenticatedProvider&&(r.authenticatedProvider=Li.fromObject(r.authenticatedProvider)),this.state_=r}catch(t){}}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuthenticated",{get:function(){return"true"===this.state_.isAuthenticated||!0===this.state_.isAuthenticated},set:function(t){this.state_.isAuthenticated=t,Fi(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedIdentity",{get:function(){return this.state_.authenticatedIdentity},set:function(t){if(!t)return delete this.state_.authenticatedIdentity,void Fi(this.state_,this.storage);this.state_.authenticatedIdentity=t,Fi(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedProvider",{get:function(){return this.state_.authenticatedProvider},set:function(t){if(!t)return delete this.state_.authenticatedProvider,void Fi(this.state_,this.storage);this.state_.authenticatedProvider=t,Fi(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preauthorizedResources",{get:function(){return this.isAuthenticated?["espn3"]:[]},enumerable:!0,configurable:!0}),t.prototype.checkAuthentication=function(){var t=this,e=this.configuration.userDataServiceUrl;return _(e+"?partner="+this.partner+"&platform="+this.platform).then((function(t){return t.json()})).then((function(n){var i=n.user&&n.user.authentication&&n.user.authentication.isp;if(i){t.isAuthenticated=!0;var r=i.name;return t.providerDataSource?t.providerDataSource.getProvider(r,wi.isp).then((function(n){var i=n.getPreferredLogoUrl(t.partner);return t.authenticatedProvider=new Li(r,n.name,i,e),!0})).catch((function(){return t.authenticatedProvider=new Li(r,r,null,e),!0})):(t.authenticatedProvider=new Li(r,r,null,e),A.resolve(!0))}return!1}))},t.prototype.authenticate=function(){return A.resolve(!0)},t.prototype.deauthenticate=function(){return this.isAuthenticated=!1,this.authenticatedProvider=null,this.authenticatedIdentity=null,A.resolve(!0)},t.prototype.checkAuthorization=function(t){var e;if(-1===t.authenticationTypes.indexOf(wt.isp)||!this.isAuthenticated)return A.resolve(new Hi(!1,null));var n=((e={})[Bi.CustomDataKey.token]="IA==",e[Bi.CustomDataKey.tokenType]="DEVICE",e),i=new Bi(wt.isp,this.authenticatedProvider,this.authenticatedIdentity,n),r=new Hi(!0,i);return A.resolve(r)},t.defaultConfiguration=Vi,t}(),Gi=function(t){u(r,t);var n=h(r);function r(){return e(this,r),n.apply(this,arguments)}return i(r,[{key:"configuration",get:function(){var t=Q.shared.getConfiguration("authorization",Ki.defaultConfiguration);return P.debug("ISPAuthenticator.getConfiguration ".concat(JSON.stringify(t))),t},set:function(t){y(c(r.prototype),"configuration",t,this,!0)}}]),r}(Ki),Ji=function(t){u(r,t);var n=h(r);function r(t,i){var a;e(this,r),(a=n.call(this)).partner=nt.partner,a.platform=nt.platform,a.apiKey=nt.apiKey,a.deviceId=nt.deviceId;var o=new Di(t),s={deviceId:a.deviceId,deviceType:nt.platform},u=new qe(a.partner,a.platform,"ESPN",s,{production:"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyZGJmZWM4My03OWE1LTQyNzEtYTVmZC04NTZjYTMxMjRjNjMiLCJuYmYiOjE1NDAyMTI3NjEsImlzcyI6ImF1dGguYWRvYmUuY29tIiwiaWF0IjoxNTQwMjEyNzYxfQ.yaK3r4AI2uLVvsyN1GLzqzgzRlxMPtasSaiYYBV0wIstqih5tvjTmeoLmi8Xy9Kp_U7Md-bOffwiyK3srHkpUkhhwXLH2x6RPjmS1tPmhaG7-3LBcHTf2ySPvXhVf7cN4ngldawK4tdtLtsw6rF_JoZE2yaC6XbS2F51nXSFEDDnOQWIHEQRG3aYAj-38P2CLGf7g-Yfhbp5cKXeksHHQ90u3eOO4WH0EAjc9oO47h33U8KMEXxJbvjV5J8Va2G2fQSgLDZ013NBI3kQnE313qgqQh2feQILkyCENpB7g-TVBreAjOaH1fU471htSoGGYepcAXv-UDtpgitDiLy7CQ",staging:"eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhMmRjNjgyMC1kZGNkLTQ4NGEtOTdlNS0xZjJiZmQzOGI4YzgiLCJuYmYiOjE1NDAyMjIwNTksImlzcyI6ImF1dGguYWRvYmUuY29tIiwiaWF0IjoxNTQwMjIyMDU5fQ.YgX4ecGCgLCaZS7uwRQYZ8UR5EwT7GIl-glFbwU122bO1JYZSmbIX8YJSfmYth_scyeg-15BYWNftV9lOcmCe8VwIsQMJMIZKaF8qSIj5OfuTOBpNZNBpDAp5dC3zG7Zp1xLe3z-T0Y18-0BGj2yhGcJxBz4gtLXQ30Bw0LEIJ89nXCQaXFTq9N6zhDzMfkFJNnSNEvEmvcQqB4bFPIqn2is8427oQDU4D0XYvvTtx9eb5hmzKc9MbBG-8KRBA62BqdHomA5UA4kBYJKpe-8B2hO07Adi2bZoo5wP_VLNAnAxANWNXaGQYHMDjHDrHbbvuKHBudHgKxAuKpIdC7UrA"});u.providerDataSource=o;var c="web"===a.platform?Kt.sessionStorage:Kt.localStorage,d=new Gi(a.partner,a.platform,c);d.providerDataSource=o;var l=new ii;a.authenticators[wt.mvpd]=u,a.authenticators[wt.isp]=d,a.authenticators[wt.open]=l,a.authorizers[wt.mvpd]=u,a.authorizers[wt.isp]=d,a.authorizers[wt.open]=l,a.concurrencyMonitorBuilder=Ni.getBuilder();var h={apiKey:a.apiKey,serviceUrl:ti.defaultServiceUrl},p=Q.shared.getConfiguration("shield",h),f=new ti(p.apiKey),v=function(){var t={apiKey:a.apiKey,serviceUrl:ti.defaultServiceUrl},e=Q.shared.getConfiguration("shield",t);f.apiKey=e.apiKey,f.serviceUrl=e.serviceUrl};v();var y=new ei(f);a.playbackSessionFactories[Pt.shield]=y;var g=new qn(a.partner,a.platform),m=new Yn(g);a.playbackSessionFactories[Pt.startSession]=m;var b=new Nn;return a.playbackSessionFactories[Pt.none]=b,a.drmSupport=i,Q.shared.on(W,(function(){v();var t=new ei(f);a.playbackSessionFactories[Pt.shield]=t,a.concurrencyMonitorBuilder=a.concurrencyMonitorBuilder||Ni.getBuilder()})),a}return i(r,[{key:"drmSupport",set:function(t){var e=this;Object.keys(this.playbackSessionFactories).map((function(t){return e.playbackSessionFactories[t]})).forEach((function(e){"drmSupport"in e&&(e.drmSupport=t)}))}},{key:"initPlaybackSession",value:function(t,e){var n=mi.swid||gi.swid;(arguments.length<=3?void 0:arguments[3])&&Object.keys(Dn).map((function(t){return Dn[t]})).indexOf(arguments.length<=3?void 0:arguments[3])&&(this.drmSupport=arguments.length<=3?void 0:arguments[3]);var i=new ce;return i.swid=n,i.platform=this.platform,i.merge(e),f(c(r.prototype),"initPlaybackSession",this).call(this,t,i)}},{key:"advertisingId",get:function(){var t=localStorage.getItem("AuthenticationManager.advertisingId");return t||(t=Ft&&Ft.device.advertisingId,this.advertisingId=t),t},set:function(t){localStorage.setItem("AuthenticationManager.advertisingId",t)}}]),r}(ni),qi=function(){function t(t,e){this.mediaItem=t,this.mediaItemDataSource=e}return t.prototype.start=function(){var t=this;this.mediaItem.isLinear&&this.mediaItem.isLive&&(this.intervalId=setInterval((function(){t.checkProgramChange()}),6e4))},t.prototype.stop=function(){this.intervalId&&clearInterval(this.intervalId)},t.prototype.checkProgramChange=function(){var t=this;if(this.mediaItem&&this.mediaItemDataSource){var e=this.mediaItem.network&&this.mediaItem.network.id;if(e){var n=this.mediaItem.apiSource?this.mediaItem.apiSource==mt.graphQL?mt.graphQL:mt.cfa:mt.graphQL,i=Et.identifierStringForNetwork(e,n);this.mediaItemDataSource.getMediaItems([i],{}).then((function(e){var n=e[0];n&&(t.mediaItem.id!==n.id&&t.mediaItem.references.simulcastAiringId!==n.references.simulcastAiringId&&(t.mediaItem=n,t.onProgramChange(n)))}))}}},t.prototype.onProgramChange=function(t){},t}();!function(t){t.willStartPlaying="atv.player.willStartPlaying",t.didStopPlaying="atv.player.didStopPlaying",t.onTimedMetadataChanged="atv.player.onTimedMetadataChanged",t.playerStateChanged="atv.player.playerStateChanged",t.playerTimeDidChange="atv.player.playerTimeDidChange"}(zi||(zi={}));var Yi,Wi,Qi=zi;!function(t){t.priv="PRIV",t.txxx="TXXX"}(Yi||(Yi={})),function(t){t.program="PROGRAM",t.commercial="COMMERCIAL",t.slate="SLATE"}(Wi||(Wi={}));var Xi,Zi=function(t,e,n){void 0===t&&(t="com.espn.authnet.heartbeat"),void 0===e&&(e="com.espn.authnet.transition"),void 0===n&&(n="www.nielsen.com"),this.heartbeat=t,this.transition=e,this.nielsenWatermark=n},$i=function(){function t(t,e){this.type=t,this.id=e}return t.prototype.isContent=function(){return this.type!==Wi.slate&&this.type!==Wi.commercial},t}(),tr=function(t,e,n){this.tag=t,this.owner=e,this.dataValue=n};!function(t){t.start="start",t.playing="playing",t.pause="pause",t.seeking="seeking",t.stalled="stalled",t.stop="stop",t.timedMetadata="timedMetadata",t.currentTime="currentTime"}(Xi||(Xi={}));var er,nr=Xi,ir=function(){function t(t,e){this.certificateUrl=e,this.requests=[],this.bindSecureKeyDelivery(t||atv.secureKeyDelivery||{})}return t.prototype.bindSecureKeyDelivery=function(t){t.fetchCertificate=this.fetchCertificate.bind(this),t.fetchAssetID=this.fetchAssetID.bind(this),t.fetchKeys=this.fetchKeys.bind(this),t.cancelAllRequests=this.cancelAllRequests.bind(this)},t.prototype.fetchCertificate=function(t,e){var n=this;P.debug("AtvlVdmsSecureKeyDelivery.fetchCertificate",t);var i=this.certificateUrl;if(i){var r=new XMLHttpRequest;r.open("GET",i),r.onreadystatechange=function(){if(4===r.readyState){if(200===r.status){var t=r.responseDataAsBase64;P.debug("AtvlVdmsSecureKeyDelivery.fetchCertificate responseDataAsBase64:",t),e.success(t)}else e.failure(r.status);n.requests.splice(n.requests.indexOf(r),1)}},this.requests.push(r),r.send(null)}else e.failure("invalid certificate url")},t.prototype.fetchAssetID=function(t,e){var n=/[?&]c=([^&]+)&*/.exec(t);if(!n||n.length<2)e.failure("Error parsing assetId "+t);else{var i=n[1];P.debug("AtvlVdmsSecureKeyDelivery.fetchAssetID",t,i),e.success(i,!1)}},t.prototype.fetchKeys=function(t,e,n){var i=this,r=t.replace("skd://","https://"),a=JSON.stringify({spc:e});P.debug("AtvlVdmsSecureKeyDelivery.fetchKeys",r);var o=new XMLHttpRequest;o.open("POST",r),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(4===o.readyState){if(200===o.status)try{var t=JSON.parse(o.responseText).ckc;n.success(t)}catch(t){n.failure("invalid JSON")}else n.failure(o.status);i.requests.splice(i.requests.indexOf(o),1)}},this.requests.push(o),o.send(a)},t.prototype.cancelAllRequests=function(){P.debug("AtvlVdmsSecureKeyDelivery.cancelAllRequests",this.requests.length),this.requests.forEach((function(t){t.abort&&t.abort()})),this.requests=[]},t}(),rr=function(t){function e(e,n,i){var r=t.call(this)||this;if(!n)throw new Error("bus must be supplied");return r.bus=n,r.secureKeyDelivery=new ir(i),r.bindEventListeners(),r}return S(e,t),e.prototype.bindEventListeners=function(){var t=this;this.bus.on(Qi.willStartPlaying,(function(){atv.player.observeTimedMetadataKeys(),t.emit(nr.start)})),this.bus.on(Qi.playerStateChanged,(function(e,n){switch(P.debug("AtvlPlayerAdaptor AtvlPlayerEvent.playerStateChanged",e,n),e){case atv.player.states.FastForwarding:t.emit(nr.seeking,n);break;case atv.player.states.Loading:t.emit(nr.stalled,n);break;case atv.player.states.Paused:t.emit(nr.pause,n);break;case atv.player.states.Playing:t.emit(nr.playing,n);break;case atv.player.states.Rewinding:t.emit(nr.seeking,n)}})),this.bus.on(Qi.onTimedMetadataChanged,(function(e){var n=e.key,i=e.extraAttributes.info,r=e.dataValue,a=r&&j.stringify(U.parse(r))||"";a.replace("\0",""),t.emit(nr.timedMetadata,new tr(n,i,a))})),this.bus.on(Qi.didStopPlaying,(function(){t.emit(nr.stop),t.cleanup()})),this.bus.on(Qi.playerTimeDidChange,(function(e){t.emit(nr.currentTime,e)}))},Object.defineProperty(e.prototype,"playbackConfig",{set:function(t){if(t){var e=t.licenseUrl;P.debug("AtvlPlayerAdaptor setPlaybackConfig",e,t.protectionSystem),e&&(this.secureKeyDelivery.certificateUrl=e)}},enumerable:!1,configurable:!0}),e.prototype.stop=function(t){var e=t.message;atv.player.stopWithReason("Video Playback Has Stopped",e)},e.prototype.cleanup=function(){this.bus.off(Qi.willStartPlaying),this.bus.off(Qi.onTimedMetadataChanged),this.bus.off(Qi.didStopPlaying)},e}(J),ar=function(t){function e(e,n){var i=t.call(this)||this;return e?(i.nativePlayer=e,i.bus=e.getEventBus(),i.constants=n,i.id3MetadataOwner=new Zi,i.bindEventListeners(),i):i}return S(e,t),e.prototype.bindEventListeners=function(){var t=this;this.bus.subscribe(this.constants.Events.Player.ID3,(function(e){void 0===e&&(e={});var n=e.sample?e.sample.data:e,i=n instanceof Uint8Array?String.fromCharCode.apply(String,M(n)):n,r=["PRIV","TXXX"].find((function(t){return i.includes(t)}))||null,a=Object.keys(t.id3MetadataOwner).map((function(e){return t.id3MetadataOwner[e]})).find((function(t){return i.includes(t)}))||null,o=a?i.substring(i.lastIndexOf(a)+a.length).trim().replace(/\0/g,""):null,s=new tr(r,a,o);t.emit(nr.timedMetadata,s)})),this.alreadyStarted=!1,this.bus.subscribe(this.constants.Events.Player.PLAYING,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.PLAYING"),t.alreadyStarted?t.emit(nr.playing):(t.emit(nr.start),t.emit(nr.playing),t.alreadyStarted=!0)})),this.bus.subscribe(this.constants.Events.Player.TIME_UPDATE,(function(e){var n=e/1e3;t.emit(nr.currentTime,n)})),this.bus.subscribe(this.constants.Events.Player.PAUSE,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.PAUSE"),t.emit(nr.pause)})),this.bus.subscribe(this.constants.Events.Player.SEEKING,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.SEEKING"),t.emit(nr.seeking)})),this.bus.subscribe(this.constants.Events.Player.BUFFERING_START,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.BUFFERING_START"),t.emit(nr.stalled)})),this.bus.subscribe(this.constants.Events.Player.BUFFERING_END,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.BUFFERING_END"),t.emit(nr.playing)})),this.bus.subscribe(this.constants.Events.Player.COMPLETE,(function(){P.trace("BAMTizenPlayerAdaptor Events.Player.COMPLETE"),t.emit(nr.stop),t.cleanup()}))},e.prototype.stop=function(t){t&&P.warn("BAMTizenPlayerAdaptor.stop",t.message),this.nativePlayer.stop(),this.cleanup()},e.prototype.cleanup=function(){this.alreadyStarted=!1,this.bus.unsubscribe(this.constants.Events.Player.ID3,this),this.bus.unsubscribe(this.constants.Events.Player.PLAYING,this),this.bus.unsubscribe(this.constants.Events.Player.TIME_UPDATE,this),this.bus.unsubscribe(this.constants.Events.Player.PAUSE,this),this.bus.unsubscribe(this.constants.Events.Player.SEEKING,this),this.bus.unsubscribe(this.constants.Events.Player.BUFFERING_START,this),this.bus.unsubscribe(this.constants.Events.Player.COMPLETE,this)},e}(J),or=function(t){function e(e){var n=t.call(this)||this;return e?(n.nativePlayer=e,n.id3MetadataOwner=new Zi,n.bindEventListeners(),n):n}return S(e,t),e.prototype.bindEventListeners=function(){this.loadCompleteHandler=this.loadCompleteHandler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.loadCompleteHandler),this.id3Handler=this.id3Handler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.ID3,this.id3Handler),this.mediaFinishedHandler=this.mediaFinishedHandler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.MEDIA_FINISHED,this.mediaFinishedHandler),this.timeUpdateHandler=this.timeUpdateHandler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.TIME_UPDATE,this.timeUpdateHandler),this.playingHandler=this.playingHandler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.PLAYING,this.playingHandler),this.pauseHandler=this.pauseHandler.bind(this),this.nativePlayer.addEventListener(cast.framework.events.EventType.PAUSE,this.pauseHandler),this.stop=this.stop.bind(this)},e.prototype.loadCompleteHandler=function(t){P.debug("ChromecastPlayerAdaptor: PLAYER_LOAD_COMPLETE",t),this.emit(nr.start)},e.prototype.id3Handler=function(t){var e=this;if(P.debug("ChromecastPlayerAdaptor._id3Handler",t),t.detail&&(t.segmentData=t.detail),t.segmentData){var n=String.fromCharCode.apply(String,M(t.segmentData));P.trace("ChromecastPlayerAdaptor._id3Handler",n);var i=["PRIV","TXXX"].find((function(t){return n.includes(t)}))||null,r=Object.keys(this.id3MetadataOwner).map((function(t){return e.id3MetadataOwner[t]})).find((function(t){return n.includes(t)}))||null,a=r?n.substring(n.lastIndexOf(r)+r.length).trim().replace(/\0/g,""):null,o=new tr(i,r,a);P.trace("ChromecastPlayerAdaptor._id3Handler","tag:",i,"owner:",r,"dataValue:",a),this.emit(nr.timedMetadata,o)}},e.prototype.timeUpdateHandler=function(t){var e=t.currentMediaTime;this.emit(nr.currentTime,e)},e.prototype.playingHandler=function(t){var e=t.currentMediaTime;this.emit(nr.playing,e)},e.prototype.pauseHandler=function(t){var e=t.currentMediaTime;this.emit(nr.pause,e)},e.prototype.mediaFinishedHandler=function(t){P.debug("ChromecastPlayerAdaptor: MEDIA_FINISHED",t),this.emit(nr.stop),this.cleanup()},e.prototype.stop=function(t){t&&P.warn("ChromecastPlayerAdaptor.stop",t.message)},e.prototype.cleanup=function(){this.nativePlayer&&(this.nativePlayer.removeEventListener(cast.framework.events.EventType.PLAYER_LOAD_COMPLETE,this.loadCompleteHandler),this.nativePlayer.removeEventListener(cast.framework.events.EventType.ID3,this.id3Handler),this.nativePlayer.removeEventListener(cast.framework.events.EventType.MEDIA_FINISHED,this.mediaFinishedHandler),this.nativePlayer.removeEventListener(cast.framework.events.EventType.TIME_UPDATE,this.timeUpdateHandler),this.nativePlayer.removeEventListener(cast.framework.events.EventType.PAUSE,this.pauseHandler))},e}(J),sr=function(t){function e(e){var n=t.call(this)||this;return n.nativePlayer=e,n.bindEventListeners(),n}return S(e,t),e.prototype.bindEventListeners=function(){var t=this;this.nativePlayer?(this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onSeek=this.onSeek.bind(this),this.onCurrentTime=this.onCurrentTime.bind(this),this.onStalled=this.onStalled.bind(this),this.stop=this.stop.bind(this),this.onError=this.onError.bind(this),this.cleanup=this.cleanup.bind(this),this.nativePlayer.addEventListener("play",this.onPlay),this.nativePlayer.addEventListener("pause",this.onPause),this.nativePlayer.addEventListener("seeking",this.onSeek),this.nativePlayer.addEventListener("ended",this.stop),this.nativePlayer.addEventListener("error",this.onError),this.nativePlayer.addEventListener("timeUpdate",this.onCurrentTime),this.nativePlayer.addEventListener("stalled",this.onStalled),this.nativePlayer.textTracks.onaddtrack=function(e){var n=e.track;n&&"metadata"===n.kind&&n.addEventListener("cuechange",(function(e){var n=e.target;if(n&&"metadata"===n.kind){for(var i=[],r=0;r<n.activeCues.length;r++){var a=n.activeCues[r];i.push(a.value)}i.map((function(e){var n=e.key,i=e.info,r=e.data;r instanceof ArrayBuffer&&(r=String.fromCharCode.apply(null,new Uint8Array(r)));var a=new tr(n,i,r);P.trace("HTML5PlayerAdaptor timedMetadata",a),t.emit(nr.timedMetadata,a)}))}}))}):P.error("Native Player wasn't passed to HTML5PlayerAdaptor")},e.prototype.onPlay=function(t){this.emit(nr.start,t.timeStamp)},e.prototype.onPause=function(){this.emit(nr.pause)},e.prototype.onSeek=function(){this.emit(nr.seeking)},e.prototype.onError=function(){this.emit(nr.stop),this.cleanup()},e.prototype.onCurrentTime=function(t){this.emit(nr.currentTime,t.timeStamp)},e.prototype.onStalled=function(t){this.emit(nr.stalled,t.timeStamp)},e.prototype.stop=function(){this.nativePlayer.pause(),this.nativePlayer.setAttribute("src",""),this.nativePlayer.removeAttribute("src"),this.nativePlayer.currentTime=0,this.emit(nr.stop),this.cleanup()},e.prototype.cleanup=function(){this.nativePlayer.removeEventListener("play",this.onPlay),this.nativePlayer.removeEventListener("pause",this.onPause),this.nativePlayer.removeEventListener("error",this.onError),this.nativePlayer.removeEventListener("seeking",this.onSeek),this.nativePlayer.removeEventListener("stalled",this.onStalled),this.nativePlayer.removeEventListener("timeupdate",this.onCurrentTime),this.nativePlayer.removeEventListener("ended",this.stop)},e}(J);!function(t){t.opened="opened",t.playing="playing",t.ended="ended",t.timedMetadata="timedMetadata",t.error="error",t.timeUpdate="timeUpdate",t.stalled="stalled",t.paused="paused",t.seeking="seeking"}(er||(er={}));var ur,cr=er,dr=function(t){function e(e,n){var i=t.call(this)||this;if(!e)throw new Error("nativePlayer must be supplied");return i.nativePlayer=e,i.bus=n,i.bindEventListeners(),i}return S(e,t),e.prototype.bindEventListeners=function(){this.onSeeking=this.onSeeking.bind(this),this.onStalled=this.onStalled.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onPaused=this.onPaused.bind(this),this.onError=this.onError.bind(this),this.onEnded=this.onEnded.bind(this),this.onTimedMetadata=this.onTimedMetadata.bind(this),this.onOpened=this.onOpened.bind(this),this.bus?(this.bus.on(cr.opened,this.onOpened),this.bus.on(cr.playing,this.onPlaying),this.bus.on(cr.paused,this.onPaused),this.bus.on(cr.timedMetadata,this.onTimedMetadata),this.bus.on(cr.ended,this.onEnded),this.bus.on(cr.error,this.onError),this.bus.on(cr.timeUpdate,this.onTimeUpdate),this.bus.on(cr.stalled,this.onStalled),this.bus.on(cr.seeking,this.onSeeking)):(this.nativePlayer.onOpened=this.onOpened,this.nativePlayer.onPlaying=this.onPlaying,this.nativePlayer.onTimedMetadata=this.onTimedMetadata,this.nativePlayer.onEnded=this.onEnded,this.nativePlayer.onError=this.onError,this.nativePlayer.onTimeUpdate=this.onTimeUpdate,this.nativePlayer.onStalled=this.onStalled,this.nativePlayer.onSeeking=this.onSeeking)},e.prototype.onSeeking=function(){var t=this.nativePlayer.currentTime;P.debug("TrilithiumPlayerAdaptor.onSeeking",t),this.emit(nr.seeking,t)},e.prototype.onStalled=function(){var t=this.nativePlayer.currentTime;P.debug("TrilithiumPlayerAdaptor.onStalled",t),this.emit(nr.stalled,t)},e.prototype.onTimeUpdate=function(){var t=this.nativePlayer.currentTime;P.debug("TrilithiumPlayerAdaptor.onTimeUpdate",t),this.emit(nr.currentTime,t)},e.prototype.onError=function(t){P.debug("TrilithiumPlayerAdaptor.onError",t),this.emit(nr.stop),this.cleanup()},e.prototype.onEnded=function(){this.emit(nr.stop),this.cleanup()},e.prototype.onTimedMetadata=function(t,e,n){var i=e,r=n.toString(),a=j.stringify(U.parse(n.toString("base64"))),o=r?a.substring(a.lastIndexOf(r)+r.length).trim().replace(/\0/g,""):a;P.debug("TrilithiumPlayerAdaptor.onTimedMetadata "+i+" "+r+" "+o);var s=new tr(i,r,o);this.emit(nr.timedMetadata,s)},e.prototype.onOpened=function(t){t&&(P.debug("TrilithiumPlayerAdaptor.onOpened"),this.emit(nr.start))},e.prototype.onPlaying=function(){var t=this.nativePlayer.currentTime;P.debug("TrilithiumPlayerAdaptor.onPlaying",t),this.emit(nr.playing,t)},e.prototype.onPaused=function(){var t=this.nativePlayer.currentTime;P.debug("TrilithiumPlayerAdaptor.onPaused",t),this.emit(nr.pause,t)},e.prototype.stop=function(t){t&&P.warn("TrilithiumPlayerAdaptor.stop",t.message)},e.prototype.cleanup=function(){this.bus&&(this.bus.off(cr.opened),this.bus.off(cr.playing),this.bus.off(cr.timedMetadata),this.bus.off(cr.ended),this.bus.off(cr.error),this.bus.off(cr.timeUpdate),this.bus.off(cr.stalled))},e}(J),lr=6,hr=7,pr=11,fr=12,vr="playbackStateChanged",yr="playbackStarted",gr="playbackFailed",mr="playbackProgressUpdate",br="id3Metadata",wr=(function(t){function e(e){var n=t.call(this)||this;return n.nativePlayer=e,n.bindEventListeners(),n.id3MetadataOwner=new Zi,n}S(e,t),e.prototype.bindEventListeners=function(){this.nativePlayer?(this.onCurrentTime=this.onCurrentTime.bind(this),this.onPlaybackStateChanged=this.onPlaybackStateChanged.bind(this),this.onPlay=this.onPlay.bind(this),this.onTimedMetaData=this.onTimedMetaData.bind(this),this.onError=this.onError.bind(this),this.nativePlayer.addEventListener(vr,this.onPlaybackStateChanged),this.nativePlayer.addEventListener(yr,this.onPlay),this.nativePlayer.addEventListener(br,this.onTimedMetaData),this.nativePlayer.addEventListener(mr,this.onCurrentTime),this.nativePlayer.addEventListener(gr,this.onError)):P.error("Native Player wasn't passed to HTML5PlayerAdaptor")},e.prototype.onTimedMetaData=function(t){var e=this,n=t.data,i=String.fromCharCode.apply(null,n),r=["PRIV","TXXX"].find((function(t){return i.includes(t)}))||null,a=Object.keys(this.id3MetadataOwner).map((function(t){return e.id3MetadataOwner[t]})).find((function(t){return i.includes(t)}))||null,o=a?i.substring(i.lastIndexOf(a)+a.length).trim().replace(/\0/g,""):null,s=new tr(r,a,o);P.trace("AampUvePlayerAdapter timedMetadata",s),this.emit(nr.timedMetadata,s)},e.prototype.onPlaybackStateChanged=function(t){switch(t.state){case lr:this.emit(nr.pause);break;case hr:this.emit(nr.seeking);break;case fr:case pr:this.emit(nr.stop),this.cleanup()}},e.prototype.onPlay=function(){this.emit(nr.start)},e.prototype.onCurrentTime=function(t){this.emit(nr.currentTime,t.positionMiliseconds)},e.prototype.onError=function(){this.emit(nr.stop),this.cleanup()},e.prototype.stop=function(){this.emit(nr.stop),this.cleanup()},e.prototype.cleanup=function(){this.nativePlayer.removeEventListener(vr,this.onPlaybackStateChanged),this.nativePlayer.removeEventListener(yr,this.onPlay),this.nativePlayer.removeEventListener(br,this.onTimedMetaData),this.nativePlayer.removeEventListener(mr,this.onCurrentTime),this.nativePlayer.removeEventListener(gr,this.onError)}}(J),function(){function t(t,e,n){var i=this;this.adobeConcurrencyBuilder=n,this.session=t,this.playerAdaptor=e,this.adobeConcurrencyBuilder&&this.initConcurrencyMonitor(),this.initProgramChangeMonitor(),this.playerAdaptor.on(nr.start,(function(){P.debug("PlaybackManager.start"),i.programChangeMonitor.start()})),this.playerAdaptor.on(nr.stop,(function(){P.debug("PlaybackManager.stop"),i.cleanup()}))}return t.prototype.initConcurrencyMonitor=function(){var t,e=this,n=this.session;n.concurrencyMonitorSessionId&&(t=this.adobeConcurrencyBuilder.withSession(n).build())&&t.startWithSession(n.concurrencyMonitorSessionId),t&&(t.onError=function(t,n){e.playerAdaptor.stop(t),e.onStop(t),n&&e.onDeauthenticate(wt.mvpd)},this.adobeConcurrencyMonitor=t)},t.prototype.initProgramChangeMonitor=function(){var t=this,e=new Lt,n=new qi(this.session.mediaItem,e);n.onProgramChange=function(e){var n=t.session.token,i=e.mrss;if(n){var r=t.shield;r?r.getAsset(e.id,n,"GATEKEEPER",i,{}).then((function(n){n&&(t.session.mediaItem=e,t.session.token=n.gatekeeperToken,t.nielsenTrackingManager&&(t.nielsenTrackingManager.mediaItem=e),t.onUpdatedMediaItem(e))})).catch((function(e){t.playerAdaptor.stop(e),t.onStop(e)})):P.warn("shield support not configured")}else P.warn("token missing. skipping program change re-auth.")},this.programChangeMonitor=n},t.prototype.cleanup=function(){P.debug("PlaybackManager.cleanup"),this.playerAdaptor.off(nr.start),this.playerAdaptor.off(nr.stop),this.adobeConcurrencyMonitor&&this.adobeConcurrencyMonitor.stop(),this.programChangeMonitor&&this.programChangeMonitor.stop(),this.nielsenTrackingManager&&this.nielsenTrackingManager.stop()},t.prototype.onDeauthenticate=function(t){},t.prototype.onUpdatedMediaItem=function(t){},t.prototype.onStop=function(t){},t}());!function(t){t.abc="abc",t.abcNews="abcnews",t.abcNewsLive="abcnewslive",t.abcOtv="abcotv",t.disney="dch",t.disneyJr="djr",t.disneyXD="dxd",t.disneyNow="dnow",t.espn="espn",t.espnFantasy="espnFantasy",t.oscar="oscar",t.freeform="ff",t.foxLatam="foxlatam",t.fxNow="fxnow",t.fx="fx",t.fxm="fxm",t.fxx="fxx",t.natGeoTV="natgeotv",t.natGeo="natgeo",t.natGeoWild="natgeowild",t.natgeoBrasil="natgeobrasil",t.unknown="000"}(ur||(ur={}));var Pr,Ir=function(t){u(i,t);var n=h(i);function i(t,r,a,o){var s;e(this,i);var u=nt.apiKey;(s=n.call(this,t,r)).nielsenTrackingManager=o;var c=new ti,d=function(){var t={apiKey:u,serviceUrl:ti.defaultServiceUrl},e=Q.shared.getConfiguration("shield",t);c.apiKey=e.apiKey,c.serviceUrl=e.serviceUrl};return d(),Q.shared.on(W,d),s.shield=c,s}return i}(wr),Ar=new function(t,e){void 0===e&&(e="entitlements"),this.serviceUrl=t,this.entitlementsPath=e}("https://web.archive.org/web/20210915144012/https://tve.dtci.technology","entitlements");!function(t){t.badToken="badToken",t.other="other"}(Pr||(Pr={}));var _r=function(){function t(t,e){void 0===e&&(e="entitlements"),this.serviceUrl=t,this.entitlementsPath=e}return t.prototype.getEntitlements=function(t){return E(this,void 0,void 0,(function(){var e,n,i,r,a;return C(this,(function(o){switch(o.label){case 0:e=this.serviceUrl+"/"+this.entitlementsPath,n={user_token:t},i=Object.keys(n).map((function(t){return t+"="+encodeURIComponent(n[t])})).join("&"),r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:i},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,_(e,r)];case 2:return[4,o.sent().json()];case 3:return[2,o.sent()];case 4:return a=o.sent(),console.error("Error retrieving Entitlements from DTCITVEntitlementAPI: "+a),[3,5];case 5:return[2]}}))}))},t.prototype.logout=function(t,e,n){return E(this,void 0,void 0,(function(){var i,r,a,o,s;return C(this,(function(u){switch(u.label){case 0:i=this.serviceUrl+"/affiliates/"+t+"/logout",r={user_token:e},n&&(r.redirect_uri=n),a=Object.keys(r).map((function(t){return t+"="+encodeURIComponent(r[t])})).join("&"),o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:a},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,_(i,o)];case 2:return u.sent(),[2,!0];case 3:return s=u.sent(),console.error("Error logging out of affiliate account DTCITVEntitlementAPI: "+s),[2,!1];case 4:return[2]}}))}))},t.prototype.tokenIsValid=function(t){try{var e=function(t){var e=t.split("."),n=j.stringify(U.parse(e[1]));return JSON.parse(n)}(t);if(!e.exp)return!0;var n=new Date;return!(new Date(1e3*e.exp)<n)}catch(t){return!1}},t}(),Tr=function(t,e){e.setItem("watchsdk.tve_authenticator.state",JSON.stringify(t))},Sr=function(t){u(i,t);var n=h(i);function i(t,r){var a;return e(this,i),(a=n.call(this,t,r)).providerDataSource=new Di(r),a}return i}(function(){function t(t,e){this.identityTokenProvider=t,this.locationProvider=e,this.authenticationUrl="https://web.archive.org/web/20210915144012/https://www.espn.com/watch/auth",this.edition="espn-nl-nl",this.storage=localStorage,this.tveAPI=new _r(Ar.serviceUrl,Ar.entitlementsPath),this.delegate=null,this.providerDataSource=null,window.displayProviderDialog=this.displayProviderDialog.bind(this);try{var n=this.storage.getItem("watchsdk.tve_authenticator.state"),i=JSON.parse(n);this.state_=i||{}}catch(t){}}return Object.defineProperty(t.prototype,"configuration",{get:function(){return this.configuration_},set:function(t){this.configuration_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuthenticated",{get:function(){return this.state_.isAuthenticated},set:function(t){this.state_.isAuthenticated=t,Tr(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedIdentity",{get:function(){var t,e;return null===(e=null===(t=this.state_.entitlements)||void 0===t?void 0:t.accounts[0])||void 0===e?void 0:e.id},set:function(t){this.state_.authenticatedIdentity=t,Tr(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedProvider",{get:function(){return this.state_.authenticatedProvider},set:function(t){if(!t)return delete this.state_.authenticatedProvider,void Tr(this.state_,this.storage);this.state_.authenticatedProvider=t,Tr(this.state_,this.storage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entitlements",{get:function(){return this.state_.entitlements},set:function(t){if(!t)return delete this.state_.entitlements,void Tr(this.state_,this.storage);this.state_.entitlements=t,Tr(this.state_,this.storage)},enumerable:!0,configurable:!0}),t.prototype.checkAuthentication=function(){return E(this,void 0,void 0,(function(){var t,e,n,i=this;return C(this,(function(r){switch(r.label){case 0:return P.debug("TVEAuthenticator.checkAuthentication"),(t=this.identityTokenProvider.getIdentityToken())?(e=this,[4,this.tveAPI.getEntitlements(t)]):[2,A.reject(new Error("TVEAuthenticator.IdentityRequired"))];case 1:return e.entitlements=r.sent(),this.entitlements?(n=this.entitlements.accounts[0])?(this.isAuthenticated=!(!t||!n),this.authenticatedProvider=new Gt(n.affiliate.id,n.affiliate.name,null,null),this.providerDataSource?[2,this.providerDataSource.getProvider(n.affiliate.id,wi.mvpd).then((function(t){var e=t&&t.images||[],r=e.filter((function(t){return"COLOR_NEGATIVE"===t.type})).map((function(t){return t.href}))[0],a=e.filter((function(t){return"BW_NEGATIVE"===t.type})).map((function(t){return t.href}))[0]||r||e.map((function(t){return t.href}))[0];return i.authenticatedProvider=new Gt(t.adobeId||n.affiliate.id,n.affiliate.name,a,t.websiteUrl),i.isAuthenticated})).catch((function(){return i.isAuthenticated}))]:[2,A.resolve(this.isAuthenticated)]):(this.isAuthenticated=!1,[2,A.resolve(this.isAuthenticated)]):(this.isAuthenticated=!1,[2,A.reject(new Error("TVEAuthenticator.NotEntitled"))])}}))}))},t.prototype.authenticate=function(t){var e=this,n=this.providerId,i=this.accessType,r=this.edition,a=t&&t.redirectUrl||window.location.href,o=this.identityTokenProvider.getIdentityToken();return new A((function(t){var s;if(e.resolveAuthenticate_=function(e){t(e)},!n)return e.redirectUrl=a,e.displayProviderDialog(),A.resolve(!1);var u=null===(s=e.locationProvider.getCountryCode())||void 0===s?void 0:s.toLowerCase(),c={mvpd:n,redirectUrl:a,country:u};r&&(c["edition-view"]=r),i&&(c.accessType=i);var d=Object.keys(c).map((function(t){return t+"="+encodeURIComponent(c[t])})).join("&"),l=-1===e.authenticationUrl.indexOf("?")?"?":"&",h=""+e.authenticationUrl+l+d;o&&(h=h+"#oneIdToken="+o),window.location.href=h}))},t.prototype.deauthenticate=function(){var t=this.entitlements.accounts[0].affiliate.id,e=this.identityTokenProvider.getIdentityToken();return this.isAuthenticated=!1,this.authenticatedProvider=null,this.authenticatedIdentity=null,this.entitlements=null,e?this.tveAPI.logout(t,e,null).catch((function(){return!0})):A.resolve(!0)},t.prototype.checkAuthorization=function(){return E(this,void 0,void 0,(function(){var t,e,n,i,r,a;return C(this,(function(o){switch(o.label){case 0:return(t=this.identityTokenProvider.getIdentityToken())?this.isAuthenticated?this.entitlements&&this.tveAPI.tokenIsValid(this.entitlements.token)?[3,2]:(e=this,[4,this.tveAPI.getEntitlements(t)]):[2,A.reject(new Error("TVEAuthenticator.AuthenticationRequired"))]:[2,A.reject(new Error("TVEAuthenticator.IdentityRequired"))];case 1:e.entitlements=o.sent(),o.label=2;case 2:return this.entitlements&&this.tveAPI.tokenIsValid(this.entitlements.token)?((a={})[Yt.CustomDataKey.token]=this.entitlements.token,a[Yt.CustomDataKey.tokenType]="JWT",n=a,i=new Yt(wt.mvpd,this.authenticatedProvider,this.authenticatedIdentity,n),r=new Wt(!0,i),[2,A.resolve(r)]):[2,A.reject(new Error("TVEAuthenticator.NotEntitled"))]}}))}))},t.prototype.displayProviderDialog=function(){var t=this;P.debug("TVEAuthenticator.displayProviderDialog"),this.providerDataSource&&this.providerDataSource.getProviders().then((function(e){t.delegate&&t.delegate.selectProvider&&t.delegate.selectProvider(e)}))},t.prototype.setProvider=function(t,e){var n=this;P.debug("TVEAuthenticator.setProvider"),this.providerId=t,this.accessType=e,this.authenticate({redirectUrl:this.redirectUrl}).then((function(){n.resolveAuthenticate_&&(n.resolveAuthenticate_(n.isAuthenticated),n.resolveAuthenticate_=null)}))},t.defaultConfiguration=Ar,t}()),kr=function(t){u(i,t);var n=h(i);function i(){return e(this,i),n.call(this)}return i}(G),Er=function(){function t(n,i){e(this,t),this.playerAdaptor=n,this.mediaItem=i,this._currentContentType=null,this._currentAdId=null,this._lastHeartbeatTime=null,this._initialHeartbeatTimer=null,this._heartbeatTimer=null,this._currentPlayerTime=0,this._initialPlayerTime=null,this._isPlaying=!1,this._handleStart=this._handleStart.bind(this),this.playerAdaptor.on(nr.start,this._handleStart),this._handlePlaying=this._handlePlaying.bind(this),this.playerAdaptor.on(nr.playing,this._handlePlaying),this._handlePaused=this._handlePaused.bind(this),this.playerAdaptor.on(nr.pause,this._handlePaused),this.playerAdaptor.on(nr.stalled,this._handlePaused),this.playerAdaptor.on(nr.seeking,this._handlePaused),this._handlePlayerCurrentTime=this._handlePlayerCurrentTime.bind(this),this.playerAdaptor.on(nr.currentTime,this._handlePlayerCurrentTime),this._handleTimedMetadata=this._handleTimedMetadata.bind(this),this.playerAdaptor.on(nr.timedMetadata,this._handleTimedMetadata),this._handleStop=this._handleStop.bind(this),this.playerAdaptor.on(nr.stop,this._handleStop)}return i(t,[{key:"currentContentType",get:function(){return this._currentContentType},set:function(t){if(this._currentContentType!==t){var e=this._currentContentType;this._currentContentType=t;var n=this._currentPlayerTime;e||(n=this._initialPlayerTime||0),this.onContentTypeChanged&&this.onContentTypeChanged(t,e,n,this._currentAdId)}}},{key:"onContentTypeChanged",value:function(t,e,n,i){}},{key:"stop",value:function(){this.playerAdaptor.off(nr.start),this.playerAdaptor.off(nr.playing),this.playerAdaptor.off(nr.pause),this.playerAdaptor.off(nr.stalled),this.playerAdaptor.off(nr.seeking),this.playerAdaptor.off(nr.timedMetadata),this.playerAdaptor.off(nr.currentTime),this.playerAdaptor.off(nr.stop)}},{key:"_handleStart",value:function(){if(P.debug("AdBreakMonitor._handleStart"),!0!==this.mediaItem.source.hasEspnId3Heartbeats)return P.debug("AdBreakMonitor._handleStart hasEspnId3Heartbeats !== true, setting currentContentType to content.",this._currentPlayerTime,this._initialPlayerTime,this.mediaItem.source.hasEspnId3Heartbeats),void(this.currentContentType=t.ContentType.content);this._scheduleInitialHeartbeatTimer()}},{key:"_handlePlaying",value:function(){this._isPlaying=!0}},{key:"_handlePaused",value:function(){this._isPlaying=!1}},{key:"_handleTimedMetadata",value:function(t){if(!0===this.mediaItem.source.hasEspnId3Heartbeats&&t.tag===Yi.priv&&t.owner===Zi.heartbeat){P.debug("AdBreakMonitor._handleTimedMetadata",JSON.stringify(t));var e=function(t){var e;try{e=JSON.parse(t.dataValue)}catch(t){return null}return e.length?e.map((function(t){return new $i(t.type,t.id)})):null}(t);e&&this._handleHeartbeats(e)}}},{key:"_handlePlayerCurrentTime",value:function(t){var e=Math.floor(t);null===this._initialPlayerTime&&(this._initialPlayerTime=e),this._currentPlayerTime=e}},{key:"_handleStop",value:function(){this._invalidateInitialHeartbeatTimer(),this._invalidateHeartbeatTimer()}},{key:"_handleHeartbeats",value:function(e){P.debug("AdBreakMonitor._handleHeartbeats",JSON.stringify(e)),this._invalidateInitialHeartbeatTimer(),this._lastHeartbeatTime=Date.now();var n=e.every((function(t){return t.isContent}))?t.ContentType.content:t.ContentType.ad;n===t.ContentType.ad&&(this._currentAdId=function(t){return t.find((function(t){return t.type===Wi.commercial&&null!==t.id}))||null}(e)),this.currentContentType=n,this._scheduleHeartbeatTimer()}},{key:"_scheduleInitialHeartbeatTimer",value:function(){var t=this;P.debug("AdBreakMonitor._scheduleInitialHeartbeatTimer"),this._invalidateInitialHeartbeatTimer(),this._initialHeartbeatTimer=setInterval((function(){t._handleInitialHeartbeatTimer()}),15e3)}},{key:"_invalidateInitialHeartbeatTimer",value:function(){this._initialHeartbeatTimer&&(clearInterval(this._initialHeartbeatTimer),this._initialHeartbeatTimer=null)}},{key:"_handleInitialHeartbeatTimer",value:function(){if(P.debug("AdBreakMonitor._handleInitialHeartbeatTimer"),this._invalidateInitialHeartbeatTimer(),!1!==this._isPlaying){if(!this.currentContentType){var e=t.ContentType.ad;this._currentAdId="1",this.currentContentType=e}}else this._scheduleInitialHeartbeatTimer()}},{key:"_scheduleHeartbeatTimer",value:function(){var t=this;this._invalidateHeartbeatTimer(),this._heartbeatTimer=setInterval((function(){t._handleHeartbeatTimer()}),1e4)}},{key:"_invalidateHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_handleHeartbeatTimer",value:function(){var e=Date.now();if(P.debug("AdBreakMonitor._handleHeartbeatTimer"),!1!==this._isPlaying){if(this._lastHeartbeatTime&&e-this._lastHeartbeatTime>2e4){P.debug("AdBreakMonitor._handleHeartbeatTimer [now - this._lastHeartbeatTime]: ",e-this._lastHeartbeatTime);var n=t.ContentType.ad;this._currentAdId="1",this.currentContentType=n}this._scheduleHeartbeatTimer()}else this._scheduleHeartbeatTimer()}}]),t}();Er.ContentType={ad:"ad",content:"content"};var Cr={production:"PROD",testing:"TESTING"},Or={};Or[Cr.production]="https://web.archive.org/web/20210915144012/https://cloudapi.imrworldwide.com/nmapi/v2",Or[Cr.testing]="https://web.archive.org/web/20210915144012/https://sandbox-cloudapi.imrworldwide.com/nmapi/v2";var Mr=function(){function t(n,i,r,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cr.production;e(this,t);var u=n instanceof t.Configuration||n===Object(n)?n:new t.Configuration(n,i,r,a,o,s);P.debug("NielsenCloudAPIClient.constructor",JSON.stringify(u)),this.configuration=u,this.sessionId=V()}return i(t,[{key:"configuration",get:function(){return this._configuration},set:function(t){t&&(this.appId=t.appId,this.devInfo={devId:!1===t.isOptOut?t.deviceId:"",apn:t.appName,apv:"".concat(t.appVersion),uoo:"".concat(t.isOptOut)},this.env=t.environment,this._configuration=t)}},{key:"sendEvent",value:function(t,e,n,i,r){var a={devInfo:this.devInfo,metadata:{},event:t,position:isNaN(e)||null===e?"".concat(e):"".concat(Math.floor(e)),type:n,utc:"".concat(Date.now())};i&&(a.metadata.content=i.tracking[ht.nielsen]),n===Er.ContentType.ad&&(a.metadata.ad=r);var o="".concat(Or[this.env],"/").concat(this.appId,"/").concat(this.sessionId,"/a?b=").concat(encodeURIComponent(JSON.stringify(a)));P.debug("NielsenCloudAPIClient.sendEvent url:",o),P.debug("NielsenCloudAPIClient.sendEvent payload:",JSON.stringify(a)),_(o).then((function(t){P.debug("NielsenCloudAPIClient.sendEvent response.status: ".concat(t.status))})).catch((function(t){P.warn("NielsenCloudAPIClient.sendEvent response.error: ".concat(t&&t.message))}))}},{key:"closeSession",value:function(){this.sendEvent(t.EventType.delete,"","",null,null)}}]),t}();Mr.AssetType={content:"content",ad:"ad"},Mr.EventType={playhead:"playhead",complete:"complete",delete:"delete"},Mr.Environment=Cr,Mr.Configuration=function t(n,i,r,a,o,s){e(this,t),this.appId=n,this.appName=i,this.appVersion=r,this.deviceId=a,this.isOptOut=o,this.environment=s};var Dr=function(){function t(n,i,r){var a=this;e(this,t),this.cloudAPIClient=n,this.playerAdaptor=i;var o=Ht.fromObject(r)||r;if(o.entityType===ft.airing){this.mediaItem=o,this.currentPlayerTime=null,this.lastContentBeaconTime=null,this._isPlayerPlaying=!1,this.playerAdaptor.on(nr.playing,(function(t){if(P.debug("NielsenTrackingManager PlayerAdaptorEvent.playing"),t){var e=Math.floor(t);a.currentPlayerTime=e}a.isPlayerPlaying=!0})),this.playerAdaptor.on(nr.seeking,(function(){P.debug("NielsenTrackingManager PlayerAdaptorEvent.seeking"),a.isPlayerPlaying=!1})),this.playerAdaptor.on(nr.pause,(function(){P.debug("NielsenTrackingManager PlayerAdaptorEvent.pause"),a.isPlayerPlaying=!1})),this.playerAdaptor.on(nr.currentTime,(function(t){var e=Math.floor(t);a.currentPlayerTime=e;var n=a.currentContentType;if(n&&a.isPlayerPlaying){var i=e-a.currentContentStartTime;0!==i&&i%10==0&&e!==a.lastContentBeaconTime&&e>a.lastContentBeaconTime&&(a.lastContentBeaconTime=e,P.debug("NielsenTrackingManager PlayerAdaptorEvent.currentTime sending playhead 10 second beacon",e),a._sendPlayheadEvent(n,e))}})),this.playerAdaptor.on(nr.stop,(function(){a.stop()})),this.currentContentType=null,this.currentContentStartTime=0,this.totalAdTime=0,this.currentAdInfo=null;var s=new Er(i,r);s.onContentTypeChanged=function(t,e,n){if(P.debug("NielsenTrackingManager adBreakMonitor.onContentTypeChanged from",e,"to",t),e){P.debug("NielsenTrackingManager adBreakMonitor.onContentTypeChanged sending playhead before contentType change");var i=a._getPlayheadPosition(e,n,!0);a.cloudAPIClient.sendEvent(Mr.EventType.playhead,i,e,a.mediaItem,a.currentAdInfo)}P.debug("NielsenTrackingManager adBreakMonitor.onContentTypeChanged sending playhead after contentType change");var r=e&&!a.mediaItem.isLive?0:a._getPlayheadPosition(t,n),o=t===Er.ContentType.ad?{assetid:"1",type:0===r?"preroll":"midroll"}:null;a.cloudAPIClient.sendEvent(Mr.EventType.playhead,r,t,a.mediaItem,o),a.currentContentType=t,a.currentContentStartTime=n,a.currentAdInfo=o,a.lastContentBeaconTime=n},this.adBreakMonitor=s}}return i(t,[{key:"mediaItem",get:function(){return this._mediaItem},set:function(t){if(this._mediaItem){this._sendPlayheadEventForCurrentPlayerTimeAndContentType();var e=this._getPlayheadPosition(Er.ContentType.content,this.currentPlayerTime);P.debug("NielsenTrackingManager setMediaItem sending complete"),this.cloudAPIClient.sendEvent(Mr.EventType.complete,e,Mr.AssetType.content,this._mediaItem)}this._mediaItem=t,this.adBreakMonitor&&(this.adBreakMonitor.mediaItem=t)}},{key:"isPlayerPlaying",get:function(){return this._isPlayerPlaying},set:function(t){t!==this._isPlayerPlaying&&(this._isPlayerPlaying=t,this._sendPlayheadEventForCurrentPlayerTimeAndContentType())}},{key:"stop",value:function(){this.playerAdaptor.off(nr.currentTime),this.playerAdaptor.off(nr.stop),this.adBreakMonitor&&this.adBreakMonitor.stop(),this.mediaItem=null}},{key:"_getPlayheadPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.mediaItem.isLive)return Math.floor(Date.now()/1e3);if(t===Er.ContentType.ad){if(n){var i=e-this.currentContentStartTime;return this.totalAdTime+=i,i}return 0}return e-this.totalAdTime}},{key:"_sendPlayheadEventForCurrentPlayerTimeAndContentType",value:function(){var t=this.currentPlayerTime,e=this.currentContentType;e&&t!==this.lastContentBeaconTime&&t>this.lastContentBeaconTime&&(this.lastContentBeaconTime=t,P.debug("NielsenTrackingManager _sendPlayheadEventForCurrentPlayerTimeAndContentType sending playhead beacon",t),this._sendPlayheadEvent(e,t))}},{key:"_sendPlayheadEvent",value:function(t,e){var n=e-this.currentContentStartTime,i=t!==Er.ContentType.ad||this.mediaItem.isLive?this._getPlayheadPosition(t,e):n,r=t===Er.ContentType.ad?this.currentAdInfo:null;this.cloudAPIClient.sendEvent(Mr.EventType.playhead,i,t,this.mediaItem,r)}}]),t}();t.AdobeConcurrencyMonitorBuilder=Jn,t.AdvertisingInfo=ce,t.AtvlPlayerAdaptor=rr,t.AtvlPlayerEvent=Qi,t.AtvlPlayerEventBus=kr,t.AuthenticationManager=Ji,t.AuthenticationType=wt,t.BAMTizenPlayerAdaptor=ar,t.BootstrappedESPNAffiliateAPI=Di,t.ChromecastPlayerAdaptor=or,t.Client=nt,t.DRMKeySystem=Mn,t.DRMSupport=Dn,t.DTCITVEntitlementAPI=_r,t.DomesticLocationProvider=Mi,t.DrmSupport=Dn,t.FanManager=mi,t.HTML5PlayerAdaptor=sr,t.LocationProvider=Oi,t.MediaItemAPI=zt,t.MediaItemAuthenticationType=wt,t.MediaItemSourceType=Pt,t.MediaItemTrackingType=ht,t.NielsenCloudAPIClient=Mr,t.NielsenTrackingManager=Dr,t.PlaybackConfig=Ye,t.PlaybackCoordinator=wr,t.PlaybackManager=Ir,t.PlayerEventBus=kr,t.ShieldAPI=ti,t.TVEAuthenticator=Sr,t.TokenAuthenticator=De,t.TrilithiumPlayerAdaptor=dr,t.TrilithiumPlayerEvent=cr,t.log=I,t.uuid=V,Object.defineProperty(t,"__esModule",{value:!0})}));


}
/*
     FILE ARCHIVED ON 14:40:12 Sep 15, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:21:38 Jul 19, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 189.098
  exclusion.robots: 0.068
  exclusion.robots.policy: 0.059
  cdx.remote: 0.057
  esindex: 0.007
  LoadShardBlock: 162.848 (3)
  PetaboxLoader3.datanode: 194.465 (5)
  load_resource: 372.229 (2)
  PetaboxLoader3.resolve: 289.206 (2)
*/