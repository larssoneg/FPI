var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={0:e=>{var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};e.exports&&(e.exports=t),"function"===typeof window.define&&window.define([],(function(){return t})),t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var n,o,r,s,i,a=this._tables[0][4],c=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new t.exception.invalid("invalid aes key size");for(this._key=[s=e.slice(0),i=[]],n=u;n<4*u+28;n++)r=s[n-1],(n%u===0||8===u&&n%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],n%u===0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),s[n]=s[n-u]^r;for(o=0;n;o++,n--)r=s[3&o?n:n-4],i[o]=n<=4||o<4?r:c[0][a[r>>>24]]^c[1][a[r>>16&255]]^c[2][a[r>>8&255]]^c[3][a[255&r]]},t.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,o,r,s,i,a,c=this._tables[0],u=this._tables[1],l=c[4],d=u[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!l[t];t^=o||1,n=f[n]||1)for(s=(s=n^n<<1^n<<2^n<<3^n<<4)>>8^255&s^99,l[t]=s,d[s]=t,a=16843009*p[r=p[o=p[t]]]^65537*r^257*o^16843008*t,i=257*p[s]^16843008*s,e=0;e<4;e++)c[e][t]=i=i<<24^i>>>8,u[e][s]=a=a<<24^a>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),u[e]=u[e].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size");var o,r,s,i,a=this._key[n],c=e[0]^a[0],u=e[n?3:1]^a[1],l=e[2]^a[2],d=e[n?1:3]^a[3],p=a.length/4-2,f=4,h=[0,0,0,0],g=this._tables[n],E=g[0],_=g[1],m=g[2],y=g[3],R=g[4];for(i=0;i<p;i++)o=E[c>>>24]^_[u>>16&255]^m[l>>8&255]^y[255&d]^a[f],r=E[u>>>24]^_[l>>16&255]^m[d>>8&255]^y[255&c]^a[f+1],s=E[l>>>24]^_[d>>16&255]^m[c>>8&255]^y[255&u]^a[f+2],d=E[d>>>24]^_[c>>16&255]^m[u>>8&255]^y[255&l]^a[f+3],f+=4,c=o,u=r,l=s;for(i=0;i<4;i++)h[n?3&-i:i]=R[c>>>24]<<24^R[u>>16&255]<<16^R[l>>8&255]<<8^R[255&d]^a[f++],o=c,c=u,u=l,l=d,d=o;return h}},t.bitArray={bitSlice:function(e,n,o){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===o?e:t.bitArray.clamp(e,o-n)},extract:function(e,t,n){var o=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-o^e[t/32+1|0]>>>o:e[t/32|0]>>>o)&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var o=e[e.length-1],r=t.bitArray.getPartial(o);return 32===r?e.concat(n):t.bitArray._shiftRight(n,r,0|o,e.slice(0,e.length-1))},bitLength:function(e){var n,o=e.length;return 0===o?0:(n=e[o-1],32*(o-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e;var o=(e=e.slice(0,Math.ceil(n/32))).length;return n&=31,o>0&&n&&(e[o-1]=t.bitArray.partial(n,e[o-1]&2147483648>>n-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var o,r=0;for(o=0;o<e.length;o++)r|=e[o]^n[o];return 0===r},_shiftRight:function(e,n,o,r){var s,i,a;for(void 0===r&&(r=[]);n>=32;n-=32)r.push(o),o=0;if(0===n)return r.concat(e);for(s=0;s<e.length;s++)r.push(o|e[s]>>>n),o=e[s]<<32-n;return i=e.length?e[e.length-1]:0,a=t.bitArray.getPartial(i),r.push(t.bitArray.partial(n+a&31,n+a>32?o:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},t.codec.utf8String={fromBits:function(e){var n,o,r="",s=t.bitArray.bitLength(e);for(n=0;n<s/8;n++)0===(3&n)&&(o=e[n/4]),r+=String.fromCharCode(o>>>24),o<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,o=[],r=0;for(n=0;n<e.length;n++)r=r<<8|e.charCodeAt(n),3===(3&n)&&(o.push(r),r=0);return 3&n&&o.push(t.bitArray.partial(8*(3&n),r)),o}},t.codec.hex={fromBits:function(e){var n,o="";for(n=0;n<e.length;n++)o+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return o.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,o,r=[];for(o=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",n=0;n<e.length;n+=8)r.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(r,4*o)}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,o){var r,s="",i=0,a=t.codec.base64._chars,c=0,u=t.bitArray.bitLength(e);for(o&&(a=a.substr(0,62)+"-_"),r=0;6*s.length<u;)s+=a.charAt((c^e[r]>>>i)>>>26),i<6?(c=e[r]<<6-i,i+=26,r++):(c<<=6,i-=6);for(;3&s.length&&!n;)s+="=";return s},toBits:function(e,n){e=e.replace(/\s|=/g,"");var o,r,s=[],i=0,a=t.codec.base64._chars,c=0;for(n&&(a=a.substr(0,62)+"-_"),o=0;o<e.length;o++){if((r=a.indexOf(e.charAt(o)))<0)throw new t.exception.invalid("this isn't base64!");i>26?(i-=26,s.push(c^r>>>i),c=r<<32-i):c^=r<<32-(i+=6)}return 56&i&&s.push(t.bitArray.partial(56&i,c,1)),s}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"===typeof e&&(e=t.codec.utf8String.toBits(e));var n,o=this._buffer=t.bitArray.concat(this._buffer,e),r=this._length,s=this._length=r+t.bitArray.bitLength(e);for(n=512+r&-512;n<=s;n+=512)this._block(o.splice(0,16));return this},finalize:function(){var e,n=this._buffer,o=this._h;for(e=(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)])).length+2;15&e;e++)n.push(0);for(n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);n.length;)this._block(n.splice(0,16));return this.reset(),o},_init:[],_key:[],_precompute:function(){var e,t=0,n=2;function o(e){return 4294967296*(e-Math.floor(e))|0}e:for(;t<64;n++){for(e=2;e*e<=n;e++)if(n%e===0)continue e;t<8&&(this._init[t]=o(Math.pow(n,.5))),this._key[t]=o(Math.pow(n,1/3)),t++}},_block:function(e){var t,n,o,r,s=e.slice(0),i=this._h,a=this._key,c=i[0],u=i[1],l=i[2],d=i[3],p=i[4],f=i[5],h=i[6],g=i[7];for(t=0;t<64;t++)t<16?n=s[t]:(o=s[t+1&15],r=s[t+14&15],n=s[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+s[15&t]+s[t+9&15]|0),n=n+g+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(h^p&(f^h))+a[t],g=h,h=f,f=p,p=d+n|0,d=l,l=u,c=n+((u=c)&l^d&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;i[0]=i[0]+c|0,i[1]=i[1]+u|0,i[2]=i[2]+l|0,i[3]=i[3]+d|0,i[4]=i[4]+p|0,i[5]=i[5]+f|0,i[6]=i[6]+h|0,i[7]=i[7]+g|0}},t.mode.ccm={name:"ccm",encrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(o)/8,d=u.bitLength(c)/8;if(s=s||64,r=r||[],l<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&d>>>8*i;i++);return i<15-l&&(i=15-l),o=u.clamp(o,8*(15-i)),a=t.mode.ccm._computeTag(e,n,o,r,s,i),c=t.mode.ccm._ctrMode(e,c,o,a,s,i),u.concat(c.data,c.tag)},decrypt:function(e,n,o,r,s){s=s||64,r=r||[];var i,a,c=t.bitArray,u=c.bitLength(o)/8,l=c.bitLength(n),d=c.clamp(n,l-s),p=c.bitSlice(n,l-s);if(l=(l-s)/8,u<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&l>>>8*i;i++);if(i<15-u&&(i=15-u),o=c.clamp(o,8*(15-i)),d=t.mode.ccm._ctrMode(e,d,o,p,s,i),a=t.mode.ccm._computeTag(e,d.data,o,r,s,i),!c.equal(d.tag,a))throw new t.exception.corrupt("ccm: tag doesn't match");return d.data},_computeTag:function(e,n,o,r,s,i){var a,c,u,l=[],d=t.bitArray,p=d._xor4;if((s/=8)%2||s<4||s>16)throw new t.exception.invalid("ccm: invalid tag length");if(r.length>4294967295||n.length>4294967295)throw new t.exception.bug("ccm: can't deal with 4GiB or more data");if(a=[d.partial(8,(r.length?64:0)|s-2<<2|i-1)],(a=d.concat(a,o))[3]|=d.bitLength(n)/8,a=e.encrypt(a),r.length)for((c=d.bitLength(r)/8)<=65279?l=[d.partial(16,c)]:c<=4294967295&&(l=d.concat([d.partial(16,65534)],[c])),l=d.concat(l,r),u=0;u<l.length;u+=4)a=e.encrypt(p(a,l.slice(u,u+4).concat([0,0,0])));for(u=0;u<n.length;u+=4)a=e.encrypt(p(a,n.slice(u,u+4).concat([0,0,0])));return d.clamp(a,8*s)},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l=t.bitArray,d=l._xor4,p=n.length,f=l.bitLength(n);if(u=l.concat([l.partial(8,i-1)],o).concat([0,0,0]).slice(0,4),r=l.bitSlice(d(r,e.encrypt(u)),0,s),!p)return{tag:r,data:[]};for(c=0;c<p;c+=4)u[3]++,a=e.encrypt(u),n[c]^=a[0],n[c+1]^=a[1],n[c+2]^=a[2],n[c+3]^=a[3];return{tag:r,data:l.clamp(n,f)}}},t.mode.ocb2={name:"ocb2",encrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");var a,c,u,l,d=t.mode.ocb2._times2,p=t.bitArray,f=p._xor4,h=[0,0,0,0],g=d(e.encrypt(o)),E=[];for(r=r||[],s=s||64,a=0;a+4<n.length;a+=4)h=f(h,c=n.slice(a,a+4)),E=E.concat(f(g,e.encrypt(f(g,c)))),g=d(g);return c=n.slice(a),u=p.bitLength(c),l=e.encrypt(f(g,[0,0,0,u])),c=p.clamp(f(c.concat([0,0,0]),l),u),h=f(h,f(c.concat([0,0,0]),l)),h=e.encrypt(f(h,f(g,d(g)))),r.length&&(h=f(h,i?r:t.mode.ocb2.pmac(e,r))),E.concat(p.concat(c,p.clamp(h,s)))},decrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");s=s||64;var a,c,u,l,d=t.mode.ocb2._times2,p=t.bitArray,f=p._xor4,h=[0,0,0,0],g=d(e.encrypt(o)),E=t.bitArray.bitLength(n)-s,_=[];for(r=r||[],a=0;a+4<E/32;a+=4)c=f(g,e.decrypt(f(g,n.slice(a,a+4)))),h=f(h,c),_=_.concat(c),g=d(g);if(u=E-32*a,l=e.encrypt(f(g,[0,0,0,u])),c=f(l,p.clamp(n.slice(a),u).concat([0,0,0])),h=f(h,c),h=e.encrypt(f(h,f(g,d(g)))),r.length&&(h=f(h,i?r:t.mode.ocb2.pmac(e,r))),!p.equal(p.clamp(h,s),p.bitSlice(n,E)))throw new t.exception.corrupt("ocb: tag doesn't match");return _.concat(p.clamp(c,u))},pmac:function(e,n){var o,r,s=t.mode.ocb2._times2,i=t.bitArray,a=i._xor4,c=[0,0,0,0],u=e.encrypt([0,0,0,0]);for(u=a(u,s(s(u))),o=0;o+4<n.length;o+=4)u=s(u),c=a(c,e.encrypt(a(u,n.slice(o,o+4))));return r=n.slice(o),i.bitLength(r)<128&&(u=a(u,s(u)),r=i.concat(r,[-2147483648,0,0,0])),c=a(c,r),e.encrypt(a(s(a(u,s(u))),c))},_times2:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},t.mode.gcm={name:"gcm",encrypt:function(e,n,o,r,s){var i,a=n.slice(0),c=t.bitArray;return s=s||128,r=r||[],i=t.mode.gcm._ctrMode(!0,e,a,r,o,s),c.concat(i.data,i.tag)},decrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(c);if(r=r||[],(s=s||128)<=l?(a=u.bitSlice(c,l-s),c=u.bitSlice(c,0,l-s)):(a=c,c=[]),i=t.mode.gcm._ctrMode(!1,e,c,r,o,s),!u.equal(i.tag,a))throw new t.exception.corrupt("gcm: tag doesn't match");return i.data},_galoisMultiply:function(e,n){var o,r,s,i,a,c=t.bitArray._xor4;for(s=[0,0,0,0],i=n.slice(0),o=0;o<128;o++){for(0!==(e[Math.floor(o/32)]&1<<31-o%32)&&(s=c(s,i)),a=0!==(1&i[3]),r=3;r>0;r--)i[r]=i[r]>>>1|(1&i[r-1])<<31;i[0]=i[0]>>>1,a&&(i[0]=i[0]^225<<24)}return s},_ghash:function(e,n,o){var r,s,i=o.length;for(r=n.slice(0),s=0;s<i;s+=4)r[0]^=4294967295&o[s],r[1]^=4294967295&o[s+1],r[2]^=4294967295&o[s+2],r[3]^=4294967295&o[s+3],r=t.mode.gcm._galoisMultiply(r,e);return r},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l,d,p,f,h,g,E,_,m,y=t.bitArray;for(g=o.length,E=y.bitLength(o),_=y.bitLength(r),m=y.bitLength(s),a=n.encrypt([0,0,0,0]),96===m?(c=s.slice(0),c=y.concat(c,[1])):(c=t.mode.gcm._ghash(a,[0,0,0,0],s),c=t.mode.gcm._ghash(a,c,[0,0,Math.floor(m/4294967296),4294967295&m])),u=t.mode.gcm._ghash(a,[0,0,0,0],r),p=c.slice(0),f=u.slice(0),e||(f=t.mode.gcm._ghash(a,u,o)),d=0;d<g;d+=4)p[3]++,l=n.encrypt(p),o[d]^=l[0],o[d+1]^=l[1],o[d+2]^=l[2],o[d+3]^=l[3];return o=y.clamp(o,E),e&&(f=t.mode.gcm._ghash(a,u,o)),h=[Math.floor(_/4294967296),4294967295&_,Math.floor(E/4294967296),4294967295&E],f=t.mode.gcm._ghash(a,f,h),l=n.encrypt(c),f[0]^=l[0],f[1]^=l[1],f[2]^=l[2],f[3]^=l[3],{tag:y.bitSlice(f,0,i),data:o}}},t.misc.hmac=function(e,n){this._hash=n=n||t.hash.sha256;var o,r=[[],[]],s=n.prototype.blockSize/32;for(this._baseHash=[new n,new n],e.length>s&&(e=n.hash(e)),o=0;o<s;o++)r[0][o]=909522486^e[o],r[1][o]=1549556828^e[o];this._baseHash[0].update(r[0]),this._baseHash[1].update(r[1]),this._resultHash=new n(this._baseHash[0])},t.misc.hmac.prototype.encrypt=t.misc.hmac.prototype.mac=function(e){if(this._updated)throw new t.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},t.misc.hmac.prototype.reset=function(){this._resultHash=new this._hash(this._baseHash[0]),this._updated=!1},t.misc.hmac.prototype.update=function(e){this._updated=!0,this._resultHash.update(e)},t.misc.hmac.prototype.digest=function(){var e=this._resultHash.finalize(),t=new this._hash(this._baseHash[1]).update(e).finalize();return this.reset(),t},t.misc.pbkdf2=function(e,n,o,r,s){if(o=o||1e3,r<0||o<0)throw t.exception.invalid("invalid params to pbkdf2");"string"===typeof e&&(e=t.codec.utf8String.toBits(e)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n));var i,a,c,u,l,d=new(s=s||t.misc.hmac)(e),p=[],f=t.bitArray;for(l=1;32*p.length<(r||1);l++){for(i=a=d.encrypt(f.concat(n,[l])),c=1;c<o;c++)for(a=d.encrypt(a),u=0;u<a.length;u++)i[u]^=a[u];p=p.concat(i)}return r&&(p=f.clamp(p,r)),p},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var o,r,s=[],i=this.isReady(n);if(i===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded");for(i&this._REQUIRES_RESEED&&this._reseedFromPools(!(i&this._READY)),o=0;o<e;o+=4)(o+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),r=this._gen4words(),s.push(r[0],r[1],r[2],r[3]);return this._gate(),s.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=e},addEntropy:function(e,n,o){o=o||"user";var r,s,i,a,c=(new Date).valueOf(),u=this._robins[o],l=this.isReady(),d=0;switch(void 0===(r=this._collectorIds[o])&&(r=this._collectorIds[o]=this._collectorIdNext++),void 0===u&&(u=this._robins[o]=0),this._robins[o]=(this._robins[o]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[u].update([r,this._eventId++,1,n,c,1,0|e]);break;case"object":if("[object Uint32Array]"===(a=Object.prototype.toString.call(e))){for(i=[],s=0;s<e.length;s++)i.push(e[s]);e=i}else for("[object Array]"!==a&&(d=1),s=0;s<e.length&&!d;s++)"number"!==typeof e[s]&&(d=1);if(!d){if(void 0===n)for(n=0,s=0;s<e.length;s++)for(i=e[s];i>0;)n++,i>>>=1;this._pools[u].update([r,this._eventId++,2,n,c,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this._pools[u].update([r,this._eventId++,3,n,c,e.length]),this._pools[u].update(e);break;default:d=1}if(d)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[u]+=n,this._poolStrength+=n,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(e){var t=this._PARANOIA_LEVELS[void 0!==e?e:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(e){var t=this._PARANOIA_LEVELS[e||this._defaultParanoia];return this._strength>=t||this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.addEventListener("touchmove",this._eventListener.touchCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.removeEventListener("touchmove",this._eventListener.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(e,t){this._callbacks[e][this._callbackI++]=t},removeEventListener:function(e,t){var n,o,r=this._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&r[o]===t&&s.push(o);for(n=0;n<s.length;n++)delete r[o=s[n]]},_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_gen4words:function(){for(var e=0;e<4&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key);for(var n=0;n<4&&(this._counter[n]=this._counter[n]+1|0,!this._counter[n]);n++);},_reseedFromPools:function(e){var n,o=[],r=0;for(this._nextReseed=o[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;n<16;n++)o.push(4294967296*Math.random()|0);for(n=0;n<this._pools.length&&(o=o.concat(this._pools[n].finalize()),r+=this._poolEntropy[n],this._poolEntropy[n]=0,e||!(this._reseedCount&1<<n));n++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=r,r>this._strength&&(this._strength=r),this._reseedCount++,this._reseed(o)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n,o;try{n=e.x||e.clientX||e.offsetX||0,o=e.y||e.clientY||e.offsetY||0}catch(e){n=0,o=0}0!=n&&0!=o&&t.random.addEntropy([n,o],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(e){var n=e.touches[0]||e.changedTouches[0],o=n.pageX||n.clientX,r=n.pageY||n.clientY;t.random.addEntropy([o,r],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window.orientation){var o=window.orientation;"number"===typeof o&&t.random.addEntropy(o,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var o,r=t.random._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&s.push(r[o]);for(o=0;o<s.length;o++)s[o](n)}},t.random=new t.prng(6),function(){try{var n,o,r;if(e.exports&&(o=null)&&o.randomBytes)n=o.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),t.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(r=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(r);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(r)}t.random.addEntropy(r,1024,"crypto.getRandomValues")}}catch(e){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}}(),t.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},_encrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add({iv:t.random.randomWords(4,0)},c.defaults);if(c._add(u,o),a=u.adata,"string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json encrypt: invalid parameters");return"string"===typeof e?(e=(s=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=s.salt):t.ecc&&e instanceof t.ecc.elGamal.publicKey&&(s=e.kem(),u.kemtag=s.tag,e=s.key.slice(0,u.ks/32)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n)),"string"===typeof a&&(u.adata=a=t.codec.utf8String.toBits(a)),i=new t.cipher[u.cipher](e),c._add(r,u),r.key=e,u.ct=t.mode[u.mode].encrypt(i,n,u.iv,a,u.ts),u},encrypt:function(e,n,o,r){if(e&&n){var s=t.json,i=s._encrypt.apply(s,arguments);return s.encode(i)}},_decrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add(c._add(c._add({},c.defaults),n),o,!0),l=u.adata;if("string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||!u.iv||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json decrypt: invalid parameters");return"string"===typeof e?(e=(i=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=i.salt):t.ecc&&e instanceof t.ecc.elGamal.secretKey&&(e=e.unkem(t.codec.base64.toBits(u.kemtag)).slice(0,u.ks/32)),"string"===typeof l&&(l=t.codec.utf8String.toBits(l)),a=new t.cipher[u.cipher](e),s=t.mode[u.mode].decrypt(a,u.ct,u.iv,l,u.ts),c._add(r,u),r.key=e,1===o.raw?s:t.codec.utf8String.fromBits(s)},decrypt:function(e,n,o,r){if(e&&n){var s=t.json;return s._decrypt(e,s.decode(n),o,r)}},encode:function(e){var n,o="{",r="";for(n in e)if(e.hasOwnProperty(n)){if(!n.match(/^[a-z0-9]+$/i))throw new t.exception.invalid("json encode: invalid property name");switch(o+=r+'"'+n+'":',r=",",typeof e[n]){case"number":case"boolean":o+=e[n];break;case"string":o+='"'+escape(e[n])+'"';break;case"object":o+='"'+t.codec.base64.fromBits(e[n],0)+'"';break;default:throw new t.exception.bug("json encode: unsupported type")}}return o+"}"},decode:function(e){if(!(e=e.replace(/\s/g,"")).match(/^\{.*\}$/))throw new t.exception.invalid("json decode: this isn't json!");var n,o,r=e.replace(/^\{|\}$/g,"").split(/,/),s={};for(n=0;n<r.length;n++){if(!(o=r[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new t.exception.invalid("json decode: this isn't json!");o[3]?s[o[2]]=parseInt(o[3],10):o[4]?s[o[2]]=o[2].match(/^(ct|adata|salt|iv)$/)?t.codec.base64.toBits(o[4]):unescape(o[4]):o[5]&&(s[o[2]]="true"===o[5])}return s},_add:function(e,n,o){if(void 0===e&&(e={}),void 0===n)return e;var r;for(r in n)if(n.hasOwnProperty(r)){if(o&&void 0!==e[r]&&e[r]!==n[r])throw new t.exception.invalid("required parameter overridden");e[r]=n[r]}return e},_subtract:function(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(o[n]=e[n]);return o},_filter:function(e,t){var n,o={};for(n=0;n<t.length;n++)void 0!==e[t[n]]&&(o[t[n]]=e[t[n]]);return o}},t.encrypt=t.json.encrypt,t.decrypt=t.json.decrypt,t.misc._pbkdf2Cache={},t.misc.cachedPbkdf2=function(e,n){var o,r,s,i,a=t.misc._pbkdf2Cache;return i=(n=n||{}).iter||1e3,(o=(r=a[e]=a[e]||{})[i]=r[i]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):t.random.randomWords(2,0)})[s=void 0===n.salt?o.firstSalt:n.salt]=o[s]||t.misc.pbkdf2(e,s,n.iter),{key:o[s].slice(0),salt:s.slice(0)}}},698:(e,t,n)=>{"use strict";n.d(t,{tV:()=>m,h$:()=>y,uP:()=>R,d9:()=>d,kn:()=>E,_A:()=>l,U2:()=>p,hK:()=>c,KT:()=>g,kH:()=>I,qb:()=>u,Cd:()=>T,m8:()=>w,t8:()=>_,Vj:()=>f});var o=n(742);function r(){}function s(){}function i(e,t){let n;t=t||1/0;const{length:o}=e;let r=null;const s=[];let i=0;for(;i<o;i++){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===o){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&((t-=3)>-1&&s.push(239,191,189),r=null);if(n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function a(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function c(e){if("string"===typeof e)return e.replace(/_/g,"-").toLowerCase()}function u(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function l(e){return null===e||"object"!==typeof e?e:(Object.keys(e).forEach((t=>{null!==e[t]&&"object"===typeof e[t]&&(e[t]=l(e[t]))})),Object.isFrozen(e)?e:Object.freeze(e))}function d(e){let t;if(null===e||"object"!==typeof e)return e;if("[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());try{t=new e.constructor}catch(e){return}return Object.keys(e).forEach((n=>{t[n]=d(e[n])})),t}function p(e,t,n){const o=t.split(".").reduce(((e,t)=>e&&void 0!==e[t]?e[t]:void 0),e);return o&&n?o[n]:o}function f(){return`${h()}${h()}-${h()}-${h("4")}-${h((Math.floor(10*Math.random())%4+8).toString(16))}-${h()}${h()}${h()}`}function h(e){let t=Math.floor(65535*Math.random()).toString(16);for(let e=4-t.length;e>0;e--)t=`0${t}`;return e=`${e}`.substring(0,4),!Number.isNaN(parseInt(e,16))&&e.length?e+t.substr(e.length):t}function g(e=""){const t=e.match(/[^.]+(?:\.com?(?:\.[a-z]{2})?|(?:\.[a-z]+))?$/i);if(t&&t.length)return t[0].replace(/:[0-9]+$/,"")}function E(e=""){if("string"!==typeof e)return 0;let t=-1;const n=function(){const e=new Array(256);for(let t=0;t<e.length;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e}();for(let o=0;o<e.length;o++)t=t>>>8^n[255&(t^e.charCodeAt(o))];return(-1^t)>>>0}function _(e,t,n){let o,r;for("string"===typeof t&&(t=t.split(".")),o=0,r=t.length-1;o<r;o++)"undefined"!==typeof e[t[o]]&&null!==e[t[o]]||(e[t[o]]={}),e=e[t[o]];return e[t[r]]=n,e}function m(e){const t=o.b$(e);return new s("utf-8").decode(t)}function y(e){const t=new r("utf-8").encode(e);return o.JQ(t)}function R(e){if(null!==e&&"object"===typeof e&&0!==Object.keys(e).length)return btoa(JSON.stringify(e))}function I(e){return("string"===typeof e||e instanceof String)&&/^([a-zA-Z\d]|-|_)+$/.test(e)}function T(e,t){return e.length<=t?e:`...${e.substring(e.length-t)}`}function w(e){return e.reduce(((e,[t,n])=>(e[t]=n,e)),{})}r.prototype.encode=function(e){return"undefined"===typeof Uint8Array?i(e):new Uint8Array(i(e))},s.prototype.decode=function(e){return function(e,t,n){let o="",r="";n=Math.min(e.length,n||1/0);for(let s=t=t||0;s<n;s++)e[s]<=127?(o+=a(r)+String.fromCharCode(e[s]),r=""):r+=`%${e[s].toString(16)}`;return o+a(r)}(e,0,e.length)}},742:(e,t)=>{"use strict";t.b$=function(e){var t,n,s=c(e),i=s[0],a=s[1],u=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),l=0,d=a>0?i-4:i;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.JQ=function(e){for(var t,o=e.length,r=o%3,s=[],i=16383,a=0,c=o-r;a<c;a+=i)s.push(u(e,a,a+i>c?c:a+i));1===r?(t=e[o-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=s.length;i<a;++i)n[i]=s[i],o[s.charCodeAt(i)]=i;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,o){for(var r,s,i=[],a=t;a<o;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},961:(e,t,n)=>{var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var n=s._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(n){return r(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return s.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var i=[];return n.forEach((function(t){i.push(e(t))})),s.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(t){return r(n,e.charAt(t))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,r,s,i={},a={},c="",u="",l="",d=2,p=3,f=2,h=[],g=0,E=0;for(s=0;s<e.length;s+=1)if(c=e.charAt(s),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=p++,a[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(i,u))l=u;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)g<<=1,E==t-1?(E=0,h.push(n(g)),g=0):E++;for(r=l.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1}else{for(r=1,o=0;o<f;o++)g=g<<1|r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[l]}else for(r=i[l],o=0;o<f;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1;0==--d&&(d=Math.pow(2,f),f++),i[u]=p++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)g<<=1,E==t-1?(E=0,h.push(n(g)),g=0):E++;for(r=l.charCodeAt(0),o=0;o<8;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1}else{for(r=1,o=0;o<f;o++)g=g<<1|r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[l]}else for(r=i[l],o=0;o<f;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(r=2,o=0;o<f;o++)g=g<<1|1&r,E==t-1?(E=0,h.push(n(g)),g=0):E++,r>>=1;for(;;){if(g<<=1,E==t-1){h.push(n(g));break}E++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var r,s,i,a,c,u,l,d=[],p=4,f=4,h=3,g="",E=[],_={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)d[r]=r;for(i=0,c=Math.pow(2,2),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 2:return""}for(d[3]=l,s=l,E.push(l);;){if(_.index>t)return"";for(i=0,c=Math.pow(2,h),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;switch(l=i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=_.val&_.position,_.position>>=1,0==_.position&&(_.position=n,_.val=o(_.index++)),i|=(a>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 2:return E.join("")}if(0==p&&(p=Math.pow(2,h),h++),d[l])g=d[l];else{if(l!==f)return null;g=s+s.charAt(0)}E.push(g),d[f++]=s+g.charAt(0),s=g,0==--p&&(p=Math.pow(2,h),h++)}}};return s}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},486:e=>{!function(t){"use strict";"function"===typeof bootstrap?bootstrap("promise",t):e.exports=t()}((function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var t,n=T(),o=function(){},r=function(){var e={task:void 0,next:null},t=e,n=!1,o=void 0,s=!1,i=[];function a(){for(var t,o;e.next;)t=(e=e.next).task,e.task=void 0,(o=e.domain)&&(e.domain=void 0,o.enter()),c(t,o);for(;i.length;)c(t=i.pop());n=!1}function c(e,t){try{e()}catch(e){if(s)throw t&&t.exit(),setTimeout(a,0),t&&t.enter(),e;setTimeout((function(){throw e}),0)}t&&t.exit()}if(r=function(e){t=t.next={task:e,domain:s&&process.domain,next:null},n||(n=!0,o())},"object"===typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,o=function(){process.nextTick(a)};else if("function"===typeof setImmediate)o="undefined"!==typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!==typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=l,u.port1.onmessage=a,a()};var l=function(){u.port2.postMessage(0)};o=function(){setTimeout(a,0),l()}}else o=function(){setTimeout(a,0)};return r.runAfter=function(e){i.push(e),n||(n=!0,o())},r}(),s=Function.call;function i(e){return function(){return s.apply(e,arguments)}}var a,c=i(Array.prototype.slice),u=i(Array.prototype.reduce||function(e,t){var n=0,o=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=o)throw new TypeError}for(;n<o;n++)n in this&&(t=e(t,this[n],n));return t}),l=i(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),d=i(Array.prototype.map||function(e,t){var n=this,o=[];return u(n,(function(r,s,i){o.push(e.call(t,s,i,n))}),void 0),o}),p=Object.create||function(e){function t(){}return t.prototype=e,new t},f=Object.defineProperty||function(e,t,n){return e[t]=n.value,e},h=i(Object.prototype.hasOwnProperty),g=Object.keys||function(e){var t=[];for(var n in e)h(e,n)&&t.push(n);return t},E=i(Object.prototype.toString);function _(e){return"[object StopIteration]"===E(e)||e instanceof a}a="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e};function m(t,n){if(e&&n.stack&&"object"===typeof t&&null!==t&&t.stack){for(var o=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(f(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),o.unshift(r.stack));o.unshift(t.stack);var s=function(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;++o){var r=t[o];I(r)||y(r)||!r||n.push(r)}return n.join("\n")}(o.join("\nFrom previous event:\n"));f(t,"stack",{value:s,configurable:!0})}}function y(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function R(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(e);return o?[o[1],Number(o[2])]:void 0}function I(e){var o=R(e);if(!o)return!1;var r=o[0],s=o[1];return r===t&&s>=n&&s<=Y}function T(){if(e)try{throw new Error}catch(e){var n=e.stack.split("\n"),o=R(n[0].indexOf("@")>0?n[1]:n[2]);if(!o)return;return t=o[0],o[1]}}function w(e){return e instanceof N?e:P(e)?function(e){var t=A();return w.nextTick((function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}})),t.promise}(e):j(e)}w.resolve=w,w.nextTick=r,w.longStackSupport=!1;var O=1;function A(){var t,n=[],o=[],r=p(A.prototype),s=p(N.prototype);if(s.promiseDispatch=function(e,r,s){var i=c(arguments);n?(n.push(i),"when"===r&&s[1]&&o.push(s[1])):w.nextTick((function(){t.promiseDispatch.apply(t,i)}))},s.valueOf=function(){if(n)return s;var e=C(t);return b(e)&&(t=e),e},s.inspect=function(){return t?t.inspect():{state:"pending"}},w.longStackSupport&&e)try{throw new Error}catch(e){s.stack=e.stack.substring(e.stack.indexOf("\n")+1),s.stackCounter=O++}function i(r){t=r,w.longStackSupport&&e&&(s.source=r),u(n,(function(e,t){w.nextTick((function(){r.promiseDispatch.apply(r,t)}))}),void 0),n=void 0,o=void 0}return r.promise=s,r.resolve=function(e){t||i(w(e))},r.fulfill=function(e){t||i(j(e))},r.reject=function(e){t||i(M(e))},r.notify=function(e){t||u(o,(function(t,n){w.nextTick((function(){n(e)}))}),void 0)},r}function v(e){if("function"!==typeof e)throw new TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function S(e){return v((function(t,n){for(var o=0,r=e.length;o<r;o++)w(e[o]).then(t,n)}))}function N(e,t,n){void 0===t&&(t=function(e){return M(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var o=p(N.prototype);if(o.promiseDispatch=function(n,r,s){var i;try{i=e[r]?e[r].apply(o,s):t.call(o,r,s)}catch(e){i=M(e)}n&&n(i)},o.inspect=n,n){var r=n();"rejected"===r.state&&(o.exception=r.reason),o.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?o:e.value}}return o}function k(e,t,n,o){return w(e).then(t,n,o)}function C(e){if(b(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function b(e){return e instanceof N}function P(e){return(t=e)===Object(t)&&"function"===typeof e.then;var t}"object"===typeof process&&process&&process.env&&process.env.Q_DEBUG&&(w.longStackSupport=!0),w.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(n)}},w.Promise=v,w.promise=v,v.race=S,v.all=W,v.reject=M,v.resolve=w,w.passByCopy=function(e){return e},N.prototype.passByCopy=function(){return this},w.join=function(e,t){return w(e).join(t)},N.prototype.join=function(e){return w([this,e]).spread((function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)}))},w.race=S,N.prototype.race=function(){return this.then(w.race)},w.makePromise=N,N.prototype.toString=function(){return"[object Promise]"},N.prototype.then=function(e,t,n){var o=this,r=A(),s=!1;return w.nextTick((function(){o.promiseDispatch((function(t){s||(s=!0,r.resolve(function(t){try{return"function"===typeof e?e(t):t}catch(e){return M(e)}}(t)))}),"when",[function(e){s||(s=!0,r.resolve(function(e){if("function"===typeof t){m(e,o);try{return t(e)}catch(e){return M(e)}}return M(e)}(e)))}])})),o.promiseDispatch(void 0,"when",[void 0,function(e){var t,o=!1;try{t=function(e){return"function"===typeof n?n(e):e}(e)}catch(e){if(o=!0,!w.onerror)throw e;w.onerror(e)}o||r.notify(t)}]),r.promise},w.tap=function(e,t){return w(e).tap(t)},N.prototype.tap=function(e){return e=w(e),this.then((function(t){return e.fcall(t).thenResolve(t)}))},w.when=k,N.prototype.thenResolve=function(e){return this.then((function(){return e}))},w.thenResolve=function(e,t){return w(e).thenResolve(t)},N.prototype.thenReject=function(e){return this.then((function(){throw e}))},w.thenReject=function(e,t){return w(e).thenReject(t)},w.nearer=C,w.isPromise=b,w.isPromiseAlike=P,w.isPending=function(e){return b(e)&&"pending"===e.inspect().state},N.prototype.isPending=function(){return"pending"===this.inspect().state},w.isFulfilled=function(e){return!b(e)||"fulfilled"===e.inspect().state},N.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},w.isRejected=function(e){return b(e)&&"rejected"===e.inspect().state},N.prototype.isRejected=function(){return"rejected"===this.inspect().state};var L,D,U,G=[],x=[],$=[],V=!0;function F(){G.length=0,x.length=0,V||(V=!0)}function M(e){var t=N({when:function(t){return t&&function(e){if(V){var t=l(x,e);-1!==t&&("object"===typeof process&&"function"===typeof process.emit&&w.nextTick.runAfter((function(){var n=l($,e);-1!==n&&(process.emit("rejectionHandled",G[t],e),$.splice(n,1))})),x.splice(t,1),G.splice(t,1))}}(this),t?t(e):this}},(function(){return this}),(function(){return{state:"rejected",reason:e}}));return function(e,t){V&&("object"===typeof process&&"function"===typeof process.emit&&w.nextTick.runAfter((function(){-1!==l(x,e)&&(process.emit("unhandledRejection",t,e),$.push(e))})),x.push(e),t&&"undefined"!==typeof t.stack?G.push(t.stack):G.push("(no stack) "+t))}(t,e),t}function j(e){return N({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return g(e)}},void 0,(function(){return{state:"fulfilled",value:e}}))}function B(e,t,n){return w(e).spread(t,n)}function q(e,t,n){return w(e).dispatch(t,n)}function W(e){return k(e,(function(e){var t=0,n=A();return u(e,(function(o,r,s){var i;b(r)&&"fulfilled"===(i=r.inspect()).state?e[s]=i.value:(++t,k(r,(function(o){e[s]=o,0===--t&&n.resolve(e)}),n.reject,(function(e){n.notify({index:s,value:e})})))}),void 0),0===t&&n.resolve(e),n.promise}))}function K(e){if(0===e.length)return w.resolve();var t=w.defer(),n=0;return u(e,(function(o,r,s){var i=e[s];n++,k(i,(function(e){t.resolve(e)}),(function(e){if(0===--n){var o=e||new Error(""+e);o.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+o.message,t.reject(o)}}),(function(e){t.notify({index:s,value:e})}))}),void 0),t.promise}function H(e){return k(e,(function(e){return e=d(e,w),k(W(d(e,(function(e){return k(e,o,o)}))),(function(){return e}))}))}w.resetUnhandledRejections=F,w.getUnhandledReasons=function(){return G.slice()},w.stopUnhandledRejectionTracking=function(){F(),V=!1},F(),w.reject=M,w.fulfill=j,w.master=function(e){return N({isDef:function(){}},(function(t,n){return q(e,t,n)}),(function(){return w(e).inspect()}))},w.spread=B,N.prototype.spread=function(e,t){return this.all().then((function(t){return e.apply(void 0,t)}),t)},w.async=function(e){return function(){function t(e,t){var s;if("undefined"===typeof StopIteration){try{s=n[e](t)}catch(e){return M(e)}return s.done?w(s.value):k(s.value,o,r)}try{s=n[e](t)}catch(e){return _(e)?w(e.value):M(e)}return k(s,o,r)}var n=e.apply(this,arguments),o=t.bind(t,"next"),r=t.bind(t,"throw");return o()}},w.spawn=function(e){w.done(w.async(e)())},w.return=function(e){throw new a(e)},w.promised=function(e){return function(){return B([this,W(arguments)],(function(t,n){return e.apply(t,n)}))}},w.dispatch=q,N.prototype.dispatch=function(e,t){var n=this,o=A();return w.nextTick((function(){n.promiseDispatch(o.resolve,e,t)})),o.promise},w.get=function(e,t){return w(e).dispatch("get",[t])},N.prototype.get=function(e){return this.dispatch("get",[e])},w.set=function(e,t,n){return w(e).dispatch("set",[t,n])},N.prototype.set=function(e,t){return this.dispatch("set",[e,t])},w.del=w.delete=function(e,t){return w(e).dispatch("delete",[t])},N.prototype.del=N.prototype.delete=function(e){return this.dispatch("delete",[e])},w.mapply=w.post=function(e,t,n){return w(e).dispatch("post",[t,n])},N.prototype.mapply=N.prototype.post=function(e,t){return this.dispatch("post",[e,t])},w.send=w.mcall=w.invoke=function(e,t){return w(e).dispatch("post",[t,c(arguments,2)])},N.prototype.send=N.prototype.mcall=N.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])},w.fapply=function(e,t){return w(e).dispatch("apply",[void 0,t])},N.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},w.try=w.fcall=function(e){return w(e).dispatch("apply",[void 0,c(arguments,1)])},N.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},w.fbind=function(e){var t=w(e),n=c(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(c(arguments))])}},N.prototype.fbind=function(){var e=this,t=c(arguments);return function(){return e.dispatch("apply",[this,t.concat(c(arguments))])}},w.keys=function(e){return w(e).dispatch("keys",[])},N.prototype.keys=function(){return this.dispatch("keys",[])},w.all=W,N.prototype.all=function(){return W(this)},w.any=K,N.prototype.any=function(){return K(this)},w.allResolved=(L=H,D="allResolved",U="allSettled",function(){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(D+" is deprecated, use "+U+" instead.",new Error("").stack),L.apply(L,arguments)}),N.prototype.allResolved=function(){return H(this)},w.allSettled=function(e){return w(e).allSettled()},N.prototype.allSettled=function(){return this.then((function(e){return W(d(e,(function(e){function t(){return e.inspect()}return(e=w(e)).then(t,t)})))}))},w.fail=w.catch=function(e,t){return w(e).then(void 0,t)},N.prototype.fail=N.prototype.catch=function(e){return this.then(void 0,e)},w.progress=function(e,t){return w(e).then(void 0,void 0,t)},N.prototype.progress=function(e){return this.then(void 0,void 0,e)},w.fin=w.finally=function(e,t){return w(e).finally(t)},N.prototype.fin=N.prototype.finally=function(e){if(!e||"function"!==typeof e.apply)throw new Error("Q can't apply finally callback");return e=w(e),this.then((function(t){return e.fcall().then((function(){return t}))}),(function(t){return e.fcall().then((function(){throw t}))}))},w.done=function(e,t,n,o){return w(e).done(t,n,o)},N.prototype.done=function(e,t,n){var o=function(e){w.nextTick((function(){if(m(e,r),!w.onerror)throw e;w.onerror(e)}))},r=e||t||n?this.then(e,t,n):this;"object"===typeof process&&process&&process.domain&&(o=process.domain.bind(o)),r.then(void 0,o)},w.timeout=function(e,t,n){return w(e).timeout(t,n)},N.prototype.timeout=function(e,t){var n=A(),o=setTimeout((function(){t&&"string"!==typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)}),e);return this.then((function(e){clearTimeout(o),n.resolve(e)}),(function(e){clearTimeout(o),n.reject(e)}),n.notify),n.promise},w.delay=function(e,t){return void 0===t&&(t=e,e=void 0),w(e).delay(t)},N.prototype.delay=function(e){return this.then((function(t){var n=A();return setTimeout((function(){n.resolve(t)}),e),n.promise}))},w.nfapply=function(e,t){return w(e).nfapply(t)},N.prototype.nfapply=function(e){var t=A(),n=c(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},w.nfcall=function(e){var t=c(arguments,1);return w(e).nfapply(t)},N.prototype.nfcall=function(){var e=c(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},w.nfbind=w.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var n=t.concat(c(arguments)),o=A();return n.push(o.makeNodeResolver()),w(e).fapply(n).fail(o.reject),o.promise}},N.prototype.nfbind=N.prototype.denodeify=function(){var e=c(arguments);return e.unshift(this),w.denodeify.apply(void 0,e)},w.nbind=function(e,t){var n=c(arguments,2);return function(){var o=n.concat(c(arguments)),r=A();function s(){return e.apply(t,arguments)}return o.push(r.makeNodeResolver()),w(s).fapply(o).fail(r.reject),r.promise}},N.prototype.nbind=function(){var e=c(arguments,0);return e.unshift(this),w.nbind.apply(void 0,e)},w.nmapply=w.npost=function(e,t,n){return w(e).npost(t,n)},N.prototype.nmapply=N.prototype.npost=function(e,t){var n=c(t||[]),o=A();return n.push(o.makeNodeResolver()),this.dispatch("post",[e,n]).fail(o.reject),o.promise},w.nsend=w.nmcall=w.ninvoke=function(e,t){var n=c(arguments,2),o=A();return n.push(o.makeNodeResolver()),w(e).dispatch("post",[t,n]).fail(o.reject),o.promise},N.prototype.nsend=N.prototype.nmcall=N.prototype.ninvoke=function(e){var t=c(arguments,1),n=A();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},w.nodeify=function(e,t){return w(e).nodeify(t)},N.prototype.nodeify=function(e){if(!e)return this;this.then((function(t){w.nextTick((function(){e(null,t)}))}),(function(t){w.nextTick((function(){e(t)}))}))},w.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Y=T();return w}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(698);if(!!!window.Promise){const e="This browser is not supported by OneID because it does not honor Promise.";throw console.warn(e),new Error(e)}Object.fromEntries=Object.fromEntries||e.m8})(),(()=>{"use strict";const e={ERROR:5,WARN:4,INFO:3,DEBUG:2,LOG:1,OFF:100};let t=e.INFO,o=!1;const r={ERROR:"color:#FC0C1B;background-color:#FFEFEF",WARN:"color:#5B3A06;background-color:#FFFBE6",INFO:"color:#363F47;background-color:#e1e9ff",DEBUG:"color:#444;background-color:#eee",LOG:"color:#000;background-color:transparent",DEFAULT:"color:#000;background-color:transparent;font-weight:",ONEID:"color:#2887b4;background-color:transparent;font-weight:bold"};let s=c();function i(e){"number"===typeof e&&(t=e,s=c())}function a(n){return t>e[n]?(e="",t={})=>{}:o?function(e){const t=["%c[OneID]%c %c[%s]%c: ",r.ONEID,r.DEFAULT,r[e],e,r.DEFAULT];return window.console[e.toLowerCase()].bind(window.console,...t)}(n):function(e){return window.console[e.toLowerCase()].bind(window.console,"[OneID] [%s]: ",e)}(n)}function c(){return{error:a("ERROR"),warn:a("WARN"),info:a("INFO"),debug:a("DEBUG"),log:a("LOG")}}var u=n(698);const l=/^\.?www/,d=/^\./,p=/^(.+)@([a-z0-9-]+)(\.([a-z]+))+$/i,f=/^[a-z]{2}-[A-Z]{2}$/,h=/LOGIN_FLOW|RECOVERY_FLOW|CONTACT_CSR_FLOW/i,g=/-(DEV|VALID|VAL|QA|STAGE|PROD)$/,E=/^{?[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}}?$/,_="oid_loglevel";function m(e){return e&&document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")||null}function y(e,t,n){if(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${n?`; path=${n}`:""}`,t&&!l.test(t)){const o=`www${/^\./.test(t)?"":"."}${t}`;s.debug(`also deleting cookie from ${o}`),y(e,o,n)}return!0}function R(e,t,n,o,r,i){let a,c=!1;if(l.test(n)&&(n=n.replace(l,""),c=!0),!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;if(a=`${e}=${t}`,r&&r instanceof Date&&(a+=`; expires=${r.toUTCString()}`),n&&(a+=`; domain=${n}`),o&&(a+=`; path=${o}`),i&&(a+="; secure"),document.cookie=a,c){const t=`www${/^\./.test(n)?"":"."}${n}`;s.debug(`calling delete on domain ${t}`),y(e,t,o||"")}return!0}const I={getCookieDomain:function(){const e=(0,u.KT)(window.location.hostname);return e?`.${e}`:".go.com"}};function T(){let e=window.location.hostname;return"localhost"===e?e:(e=e.replace(l,"").replace(d,""),`.${e}`)}const w={};function O(){return w}function A(e,t){Array.isArray(w[e])||(w[e]=[]),w[e].push(t)}function v(e,t){if(Array.isArray(w[e]))if("undefined"!==typeof t)for(let n=0;n<w[e].length;n++)w[e][n]===t&&w[e].splice(n,1);else w[e]=[]}function S(e,t){const n=O();Array.isArray(n[e])&&n[e].forEach((e=>{try{e(t)}catch(e){}}))}function N(e,t,n,o,r){return{status:e,response:t,statusText:o,headers:(s=n,(s||"").split("\n").map((e=>{const t=e.indexOf(":")||0;return[e.substr(0,t).trim(),e.substr(t+1).trim()]})).filter((e=>!!e[0])).reduce(((e,t)=>{const[n,o]=t;return{[n]:o,...e}}),{})),debug:{xhrFailureReason:r}};var s}function k(e,t,n,o,r){return new Promise((s=>{const i=new XMLHttpRequest;let a;i.open(e,t,!0),Object.keys(o||{}).forEach((e=>{const t=o[e];"undefined"!==typeof t&&i.setRequestHeader((e||"").toLowerCase(),t)})),i.onload=()=>{clearTimeout(a),s(function(e){const t=e.statusText||"",n="response"in e?e.response:e.responseText,o=e.getAllResponseHeaders();let{status:r}=e;return 0===r&&(r=n?200:0),N(r,n,o,t)}(i))},i.onabort=()=>{clearTimeout(a),s(N(-1,null,null,"","onabort"))},i.onerror=()=>{clearTimeout(a),s(N(-1,null,null,"","onerror"))},i.send("undefined"!==n?n:null),"number"===typeof r&&r>0&&(a=setTimeout((()=>{s(N(-1,null,null,"","setTimeout"))}),r))}))}function C(e){const t=e||{},{responseData:n,headers:o,status:r}=function(e){let t;try{t={...JSON.parse(e.response)}}catch(e){t={}}return{responseData:t,headers:e.headers||{},status:e.status||-1}}(e),s=n.data||n||null,i=n.error||null,a=-1===r,c=!a&&!!i,u=a||c,{debug:l}=t,d={status:r,data:s,error:i,headers:o,isError:u,isNetworkError:a,isAppError:c,debug:l};if(a)throw d;return d}function b(e){let{url:t}=e.request;const{method:n,body:o,headers:r,query:s,timeoutMs:i}=e.request,a=function(e={}){const t=[];return Object.keys(e).forEach((n=>{Array.isArray(e[n])?e[n].forEach((e=>{t.push([n,e])})):t.push([n,e[n]])})),t.map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}(s);return a&&(t+=`?${a}`),k(n,t,JSON.stringify(o),r,i).then((t=>Object.assign(e,{response:C(t)})))}function P(e,t){const n=this[e];if("function"!==typeof t)throw new Error("Mutator must be a function");-1===n.indexOf(t)&&n.push(t)}function L(e){return async t=>{const n=await e(t);return void 0===n?t:n}}function D(e,...t){const n=e(...t),o=this.request,r=this.response;let s=Promise.resolve({request:n,response:null});o.forEach((e=>{s=s.then(L(e))}));let i=s.then(b);return r.forEach((e=>{i=i.then(L(e))})),i.then((e=>e.response))}function U(e){const t={request:[],response:[]},n={};return Object.keys(e).forEach((o=>{n[o]=D.bind(t,e[o])})),n.addRequestMutator=P.bind(t,"request"),n.addResponseMutator=P.bind(t,"response"),n}let G;const x={langPref:"en-US",cssOverride:""};function $(){return G}const V="ac",F="api",M="idn",j="mtx",B="obo",q="s2",W="SWID",K="swid",H="SWID_NT",Y="token",z="ts";function Q(e,t=!1){if(!e)return;const n=new Date(Date.now());n.setFullYear(n.getFullYear()+1),R(W,e,I.getCookieDomain(),"/",n),t&&R(H,1,I.getCookieDomain(),"/",n)}function X(){return m(W)}const Z="|",J="=",ee="#",te="$",ne="-",oe="string",re="date",se="int",ie="boolean",ae="uuid",ce="json",ue="string_raw",le={currentVersion:"5",versions:{4:[{key:"token.access_token",type:oe},{key:"token.swid",type:ae},{key:"token.refresh_token",type:oe},{key:"token.ttl",type:se},{key:"token.refresh_ttl",type:se},{key:"token.sso",type:ae},{key:"token.created",type:oe},{key:"token.lastChecked",type:oe},{key:"token.expires",type:oe},{key:"token.refresh_expires",type:oe},{key:"token.authenticator",type:oe},{key:"token.blue_cookie",type:oe},{key:"token.high_trust_expires_in",type:se},{key:"token.initial_grant_in_chain_time",type:se},{key:"token.id_token",type:oe},{key:"token.sessionTransferKey",type:oe}],5:[{key:"token",type:ce},{key:"id_token",type:ue}]},vals:{4:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~",5:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~"}};function de(e,t=le.currentVersion){const n=le.versions[t];if(!n)return;const o={token:(0,u.d9)(e.token),id_token:e.token.id_token};return delete o.token.id_token,delete o.token.scope,t+J+function(e,t){return t.map((t=>function(e,t){let n;const o=le.vals[le.currentVersion];if(!e||!t||!t.key||!t.type)return;if(n=(0,u.U2)(e,t.key),"undefined"===typeof n||null===n)return;switch(t.type){case oe:n=a(n);break;case re:n=c(n);break;case se:n=s(n);break;case ie:n=d(n);break;case ae:n=l(n);break;case ue:break;case ce:n=r(n);break;default:n=a(n)}return n;function r(e){return"object"!==typeof e?e:(0,u.h$)(JSON.stringify(e))}function s(e){let t="";if(e=parseInt(e,10),!Number.isNaN(e)){if(0===e)return o.charAt(0);for(e<0&&(t=ne,e*=-1);e>0;){const n=Math.floor(e/o.length),r=e-n*o.length;t+=o.charAt(r),e=n}return t}}function i(e,t){for(let n=0;n<t;n++)e+=o.charAt(0);return e}function a(e){let t,n="";if("undefined"!==typeof e&&null!==e)return`${e}`.split("").forEach((e=>{t=s(e.charCodeAt()-32),2===t.length?t=ee+t:3===t.length&&(t=te+t),n+=t})),n}function c(e){return"[object Date]"!==Object.prototype.toString.call(e)&&(e=new Date(e)),s(e.getTime())}function l(e){let t="",n="";const r=8;if("[object String]"!==Object.prototype.toString.call(e)||!E.test(e))return a(e);n+=/^{[^}]*}$/.test(e)?"1":"0",n+=/[A-F]/.test(e)?"1":"0",e=e.replace(/[{\-}]/g,"");const c=Math.floor(e.length/r);for(let n=0;n<c;n++){const o=e.substr(n*r,r),a=s(parseInt(o,16));t+=i(a,6-a.length)}return`${o.charAt(parseInt(n,2))}${t}`}function d(e){if("true"===e||"1"===e||!0===e||1===e)e=1;else{if("false"!==e&&"0"!==e&&!1!==e&&0!==e)return;e=0}return s(e)}}(e,t))).join(Z)}(o,n)}function pe(e){if(!e)return;const t=e.substring(e.indexOf(J)+1),n=e.substring(0,e.indexOf(J)),o=le.versions[n];if(!o)return;const r=function(e,t,n){const o={};return e.split("|").forEach(((e,r)=>{(0,u.t8)(o,t[r].key,function(e,t,n){if(""===e)return null;const o=le.vals[n]||le.vals[le.currentVersion];switch(t.type){case oe:e=i(e);break;case re:e=a(e);break;case se:e=s(e);break;case ie:e=l(e);break;case ae:e=c(e);break;case ue:break;case ce:e=r(e)}return e;function r(e){let t;try{const n=(0,u.tV)(e);t=JSON.parse(n)}catch(t){return e}return t}function s(e){let t=0,n=1,r=1;if(0!==(e=(e||"").split("")).length)return e[0]===ne&&(n=-1,e.splice(0,1)),e.forEach((e=>{t+=o.indexOf(e)*r,r*=o.length})),t*n}function i(e){let t=0;const n=e.length;let o,r="";if(0!==n){for(;t<n;){switch(e[t]){case ee:o=2,t+=1;break;case te:o=3,t+=1;break;default:o=1}r+=String.fromCharCode(s(e.substr(t,o))+32),t+=o}return r}}function a(e){if(e=s(e))return new Date(e)}function c(e){let t=parseInt(o.indexOf(e[0]),10),n=!1,r=!1,a="";const c=6,u=e;Number.isNaN(t)||(t=t.toString(2),t.length<2&&(t=`0${t}`),n="1"===t[0],r="1"===t[1],e=e.substring(1));const l=Math.floor(e.length/c);for(let t=0;t<l;t++){let n=s(e.substr(t*c,c)).toString(16);for(;n.length<8;)n=`0${n}`;a+=n}a=r?a.toUpperCase():a.toLowerCase();const d=`${(n?"{":"")+a.substring(0,8)}-${a.substring(8,12)}-${a.substring(12,16)}-${a.substring(16,20)}-${a.substring(20)}${n?"}":""}`;return E.test(d)?d:i(u)}function l(e){return 1===s(e)}}(e,t[r],n))})),o}(t,o,n),{token:s}=r;return s.id_token=r.id_token,s.isExpired=fe(s),s}function fe(e){let t=!1;if(e.expires){const o=new Date(e.expires).getTime();t=!("string"===typeof(n=e).access_token&&"string"===typeof n.swid&&"number"===typeof n.ttl)||Number.isNaN(o)||o<(new Date).getTime()}var n;return t}function he(e,t=3e4){const n=Object.keys(e.frames).reduce(((t,n)=>({...t,[n]:{name:n,window:e.frames[n].window,ports:{},origin:e.frames[n].origin}})),{}),o=[];return Object.keys(e.frames).forEach((t=>{const o=n[t];e.frames[t].channels.forEach((e=>{const r=n[e];if(!o.ports[e]){const n=new MessageChannel;o.ports[e]=n.port1,r.ports[t]=n.port2}}))})),Object.keys(n).forEach((e=>{var r;o.push(function(e,t){return new Promise(((n,o)=>{const r=Date.now(),s=setInterval(i,100);function i(){if(Date.now()-r>t)return c(),void o(new Error("Bootstrap timed out"));e.window.postMessage({event:"comm-bootstrap-start",targetName:e.name},e.origin)}function a(t){const o=t.data&&t.data.targetName;t.source===e.window&&o&&o===e.name&&t.data&&"comm-bootstrap-ack"===t.data.event&&(c(),n())}function c(){clearInterval(s),window.removeEventListener("message",a)}window.addEventListener("message",a),i()}))}(n[e],t).then((r=n[e],()=>{const e=Object.keys(r.ports);for(const t of e)r.window.postMessage({event:"comm-bootstrap-data",targetName:r.name,ports:e,port:t},r.origin,[r.ports[t]])})))})),Promise.all(o)}const ge=["CALL","CALL_DONE","EVENT"];function Ee(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_=+";let t="";for(let n=0;n<24;n+=1){t+=e[Math.floor(Math.random()*e.length)]}return t}function _e(e,t="DEFAULT"){const n=`PatchBay[${t}]`,o={},r={},i={};return Object.keys(e).forEach((t=>{e[t].onmessage=function(e){return t=>{if(!t||!t.data||"object"!==typeof t.data)return;const{data:n}=t;-1!==ge.indexOf(n.type)&&(a(n.name,e,n),setTimeout(c.bind(null,n.name)))}}(t)})),{addHandler:function(e,t){if("function"!==typeof t)return;o[e]=t,c(e)},message:l,broadcast:function(t,n){const o={id:Ee(),type:"EVENT",data:n,name:t};a(t,null,o),setTimeout(c.bind(null,t)),Object.keys(e).forEach((e=>{l(e,t,n)}))},call:function(e,t,o){return new Promise(((r,a)=>{const c=Ee();s.debug(`${n}: call() invoked, target=${e}, name=${t}, id=${c}`),i[c]={resolve:r,reject:a},d(e,t,"CALL",o,c)}))}};function a(e,t,o){s.debug(`${n}: queueMessage(name=${e}, source=${t})`),r[e]||(r[e]=[]),r[e].push({source:t,data:o})}function c(e){if(s.debug(`${n}: flushQueue(name=${e})`),!Array.isArray(r[e])||r[e].length<1)return void s.debug(`${n}: Nothing in queue for '${e}', exit early`);const t=[];for(;r[e].length;){const{source:a,data:c}=r[e].pop(),l=c&&c.type||void 0,d=c&&c.id||void 0,p=`${n} - ${d||"NO_ID"}`;if(s.debug(`${p}: flushQueue loop, source=${a}, type=${l}`),"CALL"===l||"EVENT"===l){let n;if(!o[e]){s.debug(`${p}: flushQueue loop, NO HANDLER FOR name=${e}, deferring`),t.push({source:a,data:c});continue}s.debug(`${p}: flushQueue loop, about to call handler for name=${e}`),n=o[e](c&&c.data),s.debug(`${p}: flushQueue loop, obtained return value from name=${e}`),"CALL"===l&&(n&&n.then||(s.debug(`${p}: flushQueue loop, handler for name=${e} returned plain value`),n=Promise.resolve(n)),n.then((t=>{s.debug(`${p}: flushQueue, promise resolved for name=${e}, messaging back`),u(a,e,t,d,"resolved")})).catch((t=>{s.debug(`${p}: flushQueue, promise caught error for name=${e}, messaging back`),u(a,e,t,d,"rejected")})))}if("CALL_DONE"===l){const{status:e}=c;if(!i[d]){s.debug(`${p}: flushQueue loop, pendingCalls EMPTY FOR id=${d}!!!`);continue}"resolved"===e?(s.debug(`${p}: flushQueue loop, resolving promise for id=${d}`),i[d].resolve(c.data)):(s.debug(`${p}: flushQueue loop, rejecting promise for id=${d}`),i[d].reject(c.data)),delete i[d]}}for(const o of t)s.debug(`${n}: flushQueue, pushing deferred item back into queue, name=${e}`),r[e].push(o)}function u(e,t,n,o,r){d(e,t,"CALL_DONE",n,o,r)}function l(e,t,n){d(e,t,"EVENT",n)}function d(o,r,i,u,l,d){if(l=l||Ee(),o===t)return s.debug(`${n}: Target is self...`),a(r,o,{id:l,type:i,name:r,data:u,status:d}),void setTimeout(c.bind(null,r));e[o]?e[o].postMessage({id:l,type:i,name:r,data:u,status:d}):s.debug(`${n}: Target '${o}' has not been registered!!!`)}}const me=(ye="outer",new Promise((e=>{const t={};window.addEventListener("message",(function n(o){o.data&&o.data.targetName===ye&&("comm-bootstrap-start"===o.data.event&&o.source.postMessage({event:"comm-bootstrap-ack",targetName:ye},"*"),"comm-bootstrap-data"===o.data.event&&(t[o.data.port]=o.ports[0],Object.keys(t).length>=o.data.ports.length&&(window.removeEventListener("message",n),e(t))))}))}))).then((e=>new _e(e,"outer")));var ye;const Re=/^stg-|-stg\.|^stg\.cdn/,Ie=/^qa-|-qa\.|:3001$|^qa\.cdn/,Te=/^val-|-val\.|^val\.cdn/,we="QA",Oe="STAGE",Ae="VAL";let ve="PROD",Se="";function Ne(){return ve}const ke=216e5,Ce=3e4,be=33,Pe=5,Le=5e3,De=2e4,Ue=1e4,Ge=18e5;function xe(){const e=$(),t=Ne();return me.then((n=>n.call("responder","get.cookie",`${e&&e.clientId}-${t}.${Y}`).then((e=>pe(e))).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))))}var $e=n(961);const Ve=[];function Fe(){if(!Ve.length)return"";let e=Ve.join("|");return e.length>600&&(e=e.slice(-600)),`0|${(0,$e.compressToBase64)(e)}`}function Me(e,t,n,o){let r;const i=`WorkflowManager[${e}]: `;return{runWorkflow:function(){s.debug(`${i}WorkflowManager.runWorkflow`),s.debug(`${i}name :`,e),r=n||Object.keys(t[0])[0],s.debug(`${i}step :`,r),c()}};function a(){const e=t.find((e=>Object.keys(e)[0]===r));return e&&e[r]}function c(){var t;s.debug(`${i}Executing step ${r}`),t=`${e.toUpperCase()}>${r}`,Ve.push(t);const n=a(),o=Object.keys(n.results);try{n.stepExecution(u,o)}catch(e){throw s.error(e),e}}function u(t){s.debug(`${i}Step complete, result ${t}`);const{results:n}=a()||{};if(r=n&&n[t],r)return c();s.debug(`${i}Workflow complete:`,e),o&&o(t)}}const je={ACTION_NAME:"action_name",ERROR_CATEGORY:"error_category",ERROR_CODES:"error_codes",FLOW:"flow",SUBFLOW:"subflow",INFO:"info",NEW_RELIC:"newRelic",PAGE_VIEW:"pageView",PROBLEM:"problem",STACK_TRACE:"stack_trace",TRANSACTION_ID:"transaction_id",API_FORCE_TOKEN_REFRESH:"api:force:tokenrefresh",API_GET_ACTIVITY_STATUS:"api:get:activitystatus",API_GET_GUEST_DATA:"api:get:guest",API_GET_GUEST_NEWSLETTERS:"api:get:guestnewsletters",API_GET_INLINE_NEWSLETTERS:"api:get:inlinenewsletters",API_GET_LICENSE_PLATE_DATA_BAG:"api:get:licenseplate:databag",API_GET_LOGGED_IN_STATUS:"api:get:loggedinstatus",API_GET_TRUST_STATE_STATUS:"api:get:truststatestatus",API_INIT:"api:init",API_LAUNCH_EMAILVERIFICATION:"api:launch:emailverification",API_LAUNCH_GUESTFLOW:"api:launch:guestflow",API_LAUNCH_IDENTITYFLOW:"api:launch:identityflow",API_LAUNCH_LICENSE_PLATE:"api:launch:licenseplate",API_LAUNCH_LOGIN:"api:launch:login",API_LAUNCH_NEWSLETTERS:"api:launch:newsletters",API_LAUNCH_PROFILE:"api:launch:profile",API_LAUNCH_REAUTH:"api:launch:reauth",API_LAUNCH_REGISTRATION:"api:launch:registration",API_LAUNCH_SOCIAL_REGISTRATION:"api:launch:socialregistration",API_LOGOUT:"api:logout",API_REDEEM_LICENSE_PLATE_CODE:"api:redeem:licenseplate:code",API_REDEEM_SESSION_TRANSFER:"api:redeem:sessiontransfer",API_SET_DO_NOT_DISTURB:"api:set:donotdisturb",API_SET_INLINE_NEWSLETTERS:"api:set:inlinenewsletters",API_GET_PPC:"api:get:ppc",API_SET_PPC:"api:set:ppc",EVENT_CLOSE:"event:ui:close",EVENT_LOGOUT:"event:logout",EVENT_AGE_GATED:"event:agegated",EVENT_CREATE:"event:create",EVENT_ERROR:"event:error",EVENT_EXPIRED_SESSION:"event:expiredsession",EVENT_EXTERNAL_LINK_EPC:"event:externallink:epc",EVENT_EXTERNAL_LINK_MYACCOUNT:"event:externallink:myaccount",EVENT_INIT:"event:init",EVENT_LOGIN:"event:login",EVENT_LOGIN_OBO:"event:login:obo",EVENT_LOW_TRUST:"event:lowtrust",EVENT_OPT_IN:"event:optin",EVENT_REAUTH:"event:reauth",EVENT_REGISTRATION_OTP_CLOSE:"event:registration:otp:close",EVENT_REFRESH:"event:refresh",EVENT_UPDATE:"event:update",BU_EVENT_TO_ACTION_NAME:{"age-gated":"EVENT_AGE_GATED",close:"EVENT_CLOSE",create:"EVENT_CREATE",error:"EVENT_ERROR",init:"EVENT_INIT",login:"EVENT_LOGIN",logout:"EVENT_LOGOUT","low-trust":"EVENT_LOW_TRUST","opt-in":"EVENT_OPT_IN",reauth:"EVENT_REAUTH",refresh:"EVENT_REFRESH",update:"EVENT_UPDATE"},CLICK_PASSWORD_CHECK_RESET_PASSWORD:"click:passwordcheck:resetpassword",CLICK_PASSWORD_CHECK_SKIP_RESET:"click:passwordcheck:skipreset",CLICK_REGISTER_BUTTON_ON_LOGIN:"click:button:login:createaccount",CLICK_LOGIN_LINK_ON_REGISTER:"click:link:register:signin",LOG_APPLICATION_ERROR:"log:application:error",LOG_INVALID_DISPLAY_OPTION:"log:invalid:displayoption",LOG_INVALID_LEGAL_CONFIG:"log:invalid:legalconfig",LOG_INVALID_MARKETING_CONFIG:"log:invalid:marketingconfig",LOG_INVALID_OID_CONFIG:"log:invalid:oidconfig",LOG_MISSING_GUEST_DATA_ON_LOGOUT:"log:missing:guestdata:on:logout",LOG_MISSING_L10N:"log:missing:l10n",LOG_PATCHBAY_ERROR:"log:patchbay:error",LOG_PPU:"log:ppu",LOG_UNEXPECTED_ERROR:"log:unexpected:error",LOG_VERSION_MISMATCH:"log:version:mismatch",LOG_MOBILE_DATA_MISMATCH:"log:mobile:data:mismatch",SERVICE_CREATE:"service:register",SERVICE_DATE_OF_BIRTH_VALIDATE:"service:dob:validate",SERVICE_DISPLAY_NAME_VALIDATE:"service:displayname:validate",SERVICE_DOWNLOAD_CONFIG:"service:download:config",SERVICE_EMAIL_VALIDATE:"service:email:validate",SERVICE_GUEST_FLOW:"service:guestflow",SERVICE_LICENSE_PLATE_PEEK:"service:licenseplate:peek",SERVICE_LICENSE_PLATE_REDEEM:"service:licenseplate:redeem",SERVICE_LOGIN:"service:login",SERVICE_LOGIN_RECOVERY:"service:login:recovery",SERVICE_LOGOUT:"service:logout",SERVICE_NEWSLETTERS_GALC:"service:newsletters:galc",SERVICE_NEWSLETTERS_GEOGATED:"service:newsletters:geogated",SERVICE_OTP_EMAIL_VERIFICATION:"service:otprequest:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_REDEEM:"service:otpredeem:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_RESEND:"service:otprequest:emailverification:resend",SERVICE_OTP_EMAIL_UPDATE:"service:otprequest:update:email",SERVICE_OTP_EMAIL_UPDATE_REDEEM:"service:otpredeem:update:email",SERVICE_OTP_EMAIL_UPDATE_RESEND:"service:otprequest:update:email:resend",SERVICE_OTP_LOGIN_RECOVERY_METHODS:"service:otplogin:recovery:methods",SERVICE_OTP_LOGIN_REDEEM:"service:otpredeem",SERVICE_OTP_LOGIN_REQUEST_OTP:"service:otprecovery",SERVICE_OTP_LOGIN_RESEND_EMAIL:"service:otplogin:resend:email",SERVICE_OTP_LOGIN_RESEND_SMS:"service:otplogin:resend:sms",SERVICE_OTP_LOGIN_RESET_PASSWORD:"service:otplogin:resetpassword",SERVICE_OTP_LOGIN_UPGRADE_NRT:"service:otplogin:upgradenrt",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST:"service:otprequest:securityflag:login:email",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST_SMS:"service:otprequest:securityflag:login:sms",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST_RESEND:"service:otprequest:securityflag:login:email:resend",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST_SMS_RESEND:"service:otprequest:securityflag:login:sms:resend",SERVICE_OTP_SECURITY_FLAG_LOGIN_REDEEM:"service:otpredeem:securityflag:login:email",SERVICE_OTP_SECURITY_FLAG_LOGIN_REDEEM_SMS:"service:otpredeem:securityflag:login:sms",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST:"service:otprequest:securityflag:recovery:email",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST_SMS:"service:otprequest:securityflag:recovery:sms",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST_RESEND:"service:otprequest:securityflag:recovery:email:resend",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST_RESEND_SMS:"service:otprequest:securityflag:recovery:sms:resend",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REDEEM:"service:otpredeem:securityflag:recovery:email",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REDEEM_SMS:"service:otpredeem:securityflag:recovery:sms",SERVICE_OTP_PASSWORD_UPDATE:"service:otprequest:update:password",SERVICE_OTP_PASSWORD_UPDATE_REDEEM:"service:otpredeem:update:password",SERVICE_OTP_PASSWORD_UPDATE_RESEND:"service:otprequest:update:password:resend",SERVICE_OTP_PHONE_VERIFICATION:"service:otprequest:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_REDEEM:"service:otpredeem:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_RESEND:"service:otprequest:phoneverification:resend",SERVICE_PASSWORD_VALIDATE:"service:password:validate",SERVICE_PPU_PROFILE:"service:update:ppu:profile",SERVICE_PPU_PASSWORD:"service:update:ppu:password",SERVICE_REAUTH:"service:reauth",SERVICE_RECAPTCHA_CHECKBOX:"service:recaptchacheckbox",SERVICE_REFRESH_GUEST:"service:refresh:guest",SERVICE_REFRESH_TOKEN:"service:refresh:token",SERVICE_REGISTRATION_AGEGATED:"service:registration:agegated",SERVICE_REGISTRATION_GALC:"service:registration:galc",SERVICE_REGISTRATION_PIL2_NOTIFY:"service:registration:pil2:notify",SERVICE_SESSION_TRANSFER_ACTIVATE:"service:sessiontransfer:activate",SERVICE_REGISTRATION_OTP_SENT:"service:registration:otp:sent",SERVICE_REGISTRATION_OTP_RESEND:"service:registration:otp:resend",SERVICE_UPDATE_GUEST:"service:update:guest",SERVICE_UPDATE_GUEST_CREDENTIALS:"service:update:guestcredentials",SERVICE_UPDATE_MARKETING:"service:update:marketing",SERVICE_USERNAME_VALIDATE:"service:username:validate",ID_TOKEN_MASK_LENGTH:6},Be={action_name:"string",alternateConfig:"string",anon:"string",appid:"string",browser:"string - added by Log.go service",client_id:"string",connection_type:"string",context:"string",conversation_id:"string",error_category:"string",error_codes:"string",experience:"string",flow:"string",id_token:"string",info:"string",os:"string - added by Log.go service",platform:"string - added by Log.go service",problem:"string",process_time:"string",referrer_host:"string - added by Log.go service",reporting:"string",sdk_version:"string",source:"string",stack_trace:"string",subflow:"string",swid:"string",timestamp:"string",trace:"string",transaction_id:"string",user_agent:"string - added by Log.go service"};const qe={appid:"DTCI-ONEID-UI"};let We;let Ke=!1,He={},Ye={},ze=!0;function Qe(){const{clientId:e,langPref:t,debug:n}=$()||{};qe.client_id=`${e}-${Ne()}`,qe.locale=t,qe.sdk_version=`web ${window.ONEID_WEB_SDK_VERSION}`,function(){const e="https://web.archive.org/web/20230104160422/https://feet-qa.segds.engsvc.go.com/",t="https://web.archive.org/web/20230104160422/https://feet-stg.segds.engsvc.go.com/",n="https://web.archive.org/web/20230104160422/https://log.go.com/",o=Ne();We=o!==we?o!==Oe?n:t:e}(),n&&n.experimentalFeatures&&(window.newRelicRequests=[],ze=!1),Ke=!0}function Xe(e={}){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"optionalConfigs.experience");t&&!nt(t)&&(t=null),n&&!ot(n)&&(s.warn("optionalConfigs.experience does not pass validation, values will be ignored"),n=null),Ye=t||n?{reporting:t,...n&&{experience:n}}:{},Ye.conversationId=(0,u.Vj)()}function Ze(){let e={...He.reporting,...Ye.reporting};return nt(e)||(s.warn("Combined reporting config does not pass validation, values will be ignored"),e={...He.reporting}),e.experience=Ye.experience||He.experience,e.conversationId=Ye.conversationId,{optionalConfigs:{reporting:e}}}function Je(e){Ke||Qe();const t=Date.now(),n={action_name:e};return{send:(e={})=>tt({...n,...e,process_time:Date.now()-t||1})}}const et={[je.API_GET_ACTIVITY_STATUS]:2,[je.API_GET_GUEST_DATA]:2,[je.API_GET_GUEST_NEWSLETTERS]:2,[je.API_GET_LOGGED_IN_STATUS]:2,[je.API_GET_TRUST_STATE_STATUS]:2,[je.API_INIT]:2,[je.API_SET_DO_NOT_DISTURB]:2,[je.EVENT_CLOSE]:2,[je.EVENT_INIT]:2,[je.EVENT_LOW_TRUST]:2};function tt(e){s.debug("metricsNewRelic.sendNewRelicLog"),Ke||Qe(),e={...qe,timestamp:Date.now(),...e};const{context:t,source:n,experience:o,conversationId:r,...i}=(e.hasOwnProperty("reporting")?e.reporting:(0,u.U2)(Ze(),"optionalConfigs.reporting"))||{};t&&(e.context=t),n&&(e.source=n),e.conversation_id=r||(0,u.Vj)(),o&&(e.experience=o),e.reporting=function(e){const t=[];return Object.keys(e).forEach((n=>{t.push(`${n}(${e[n]})`)})),t.join(",")}(i),e.reporting||delete e.reporting,window.ONEID_WEB_SDK_MIGRATION&&(e[je.INFO]=e[je.INFO]?`${e[je.INFO]},isV4Migration(true)`:"isV4Migration(true)");const a=("string"===typeof e.action_name?e.action_name:"").toLowerCase(),c=et[a];if(ze&&"number"===typeof c&&Math.random()>c/100)return void s.debug("not sending log - coin toss was tails.");const l=Fe();var d;!e.trace&&l.length&&(e.trace=l),d=e,Object.keys(d).forEach((e=>{Be[e]&&(d[e]||!1===d[e])||(s.debug(`analyticsUtils.removeInvalidNewRelicField: Removing key/value pair ${e}/${d[e]}`),delete d[e])}));const p=X();e.swid=p,e.anon=/{.+}/.test(p)?"false":"true";const f=xe().then((t=>{const n=(0,u.U2)(t,"id_token");n&&(e.id_token=(0,u.Cd)(n,je.ID_TOKEN_MASK_LENGTH));return new U({sendLog:e=>({method:"GET",url:`${We}log`,body:{},headers:{},query:e})}).sendLog(e)}));if(window.newRelicRequests){const e=new Promise((e=>{f.finally(e)})).then((()=>{window.newRelicRequests=window.newRelicRequests.filter((t=>t!==e)),s.debug(`Removed resolved promise from 'newRelicRequests', ${window.newRelicRequests.length} remain`)}));window.newRelicRequests=[...window.newRelicRequests,e],s.debug(`Added promise to 'newRelicRequests', ${window.newRelicRequests.length} are now currently outstanding`)}return f}function nt(e){let t=0;for(const n in e){if(!/^[a-zA-Z0-9_]{1,30}$/.test(n))return!1;if(e[n].length>100)return!1;if(t+=1,t>10)return!1}return!0}function ot(e){return!(!e||"string"!==typeof e)&&!!/^[A-Z0-9\.\-\_]+\.EXP$/g.test(e)}function rt(e,t,n){let o=`payloadIncluded(${!!t})`;n&&(o=`${o},${n}`),tt({[je.ACTION_NAME]:je[je.BU_EVENT_TO_ACTION_NAME[e]]||e,[je.INFO]:o}),S(e,t)}function st(){return me.then((e=>e.call("inner","config.getSiteConfig"))).then(u._A)}const it={getGuest:"getGuest",guestLogin:"guestLogin",guestMarketingOptIn:"guestMarketingOptIn",guestRecoveryMethods:"guestRecoveryMethods",guestRegister:"guestRegister",guestUpdateBySWID:"guestUpdateBySWID",loginWithRecoveryToken:"loginWithRecoveryToken",requestOTPCodePhoneVerification:"requestOTPCodePhoneVerification",notificationOTPRecovery:"notificationOTPRecovery",notificationOTPUpdateCredentials:"notificationOTPUpdateCredentials",loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID:"loginWithRecoveryToken",otpRedeem:"otpRedeem",otpRedeemEmailVerification:"otpRedeemEmailVerification",otpRedeemUpdateCredentials:"otpRedeemUpdateCredentials",otpChangePassword:"otpChangePassword",otpUpgradeNRT:"otpUpgradeNRT",parentNotification:"parentNotification",validateDateOfBirth:"validateDateOfBirth",validateEmail:"validateEmail",validatePassword:"validatePassword",validateDisplayName:"validateDisplayName",activateSessionTransfer:"activateSessionTransfer"};const at="ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED",ct="AUTHORIZATION_ACCOUNT_LOCKED_OUT",ut="AUTHORIZATION_CREDENTIALS",lt="DISALLOWED_VALUE",dt="GUEST_GATED_AGEBAND",pt="GUEST_GATED_BOTH_EMAIL_VERIFICATION",ft="GUEST_GATED_EMAIL_VERIFICATION",ht="GUEST_GATED_LOCATION",gt="GUEST_GATED_PARENT_EMAIL_VERIFICATION",Et="INVALID_VALUE",_t="MISSING_VALUE",mt="PPU_LEGAL",yt="PPU_MARKETING",Rt="PROFILE_DISABLED",It="PROFILE_USER_BANNED",Tt="SYSTEM_UNAVAILABLE",wt="UNKNOWN_ERROR",Ot={isPPU:[yt,mt],isMarketingPPU:[yt],isGating:[dt,"GUEST_GATED_UNKNOWN","GUEST_GATED_EMBARGOED","GUEST_GATED_EMAIL",ht,pt,ft,gt,ct,at,Rt,"ACCOUNT_IS_CHILDED",It],isGeoGated:[ht],isVerifyEmailGated:[pt,ft,gt],isAgebandGated:[dt],isBanned:[It],isDisabled:[Rt,at],isSecurityFlagged:["AUTHORIZATION_ACCOUNT_SECURITY_LOCKED_OUT"],isPil2:["AUTHORIZATION_PARENTAL_CONSENT_REQUIRED"],isAccountMappingError:["ACCOUNT_MAPPING_NOT_FOUND_BUT_EMAIL_FOUND","NRT_ACCOUNT",lt,"UNKNOWN_ACCOUNT_STATUS"],isActionableInputError:[_t,Et,"INUSE_VALUE",lt],isAccountMappingNotFoundError:["ACCOUNT_MAPPING_NOT_FOUND","ACCOUNT_MAPPING_NOT_FOUND_AND_EMAIL_NOT_FOUND"],isAuthorizationError:[ut,"AUTHORIZATION_BAD_EXTERNAL_TOKEN","AUTHORIZATION_EXTERNAL_ID_MISMATCH"],isMarketingLongform:["MARKETING_LONG_FORM_ENABLED"],isEtagMismatch:["VALID_ETAG_REQUIRED"],isServiceError:["SERVICE_ERROR",wt,Tt],isLockedOut:[ct],isMase:["AUTHORIZATION_MASE_ERROR"],isOtpAuthError:["PHONE_NOT_FOUND","PHONE_NOT_VERIFIED","PHONE_VERIFICATION_NOT_ALLOWED"],isOtpCodeLockedOut:["DEVICE_LINK_LOCKOUT_REACHED"],isOtpRequired:["AUTHORIZATION_INVALID_NETWORK","ACCOUNT_INACTIVE_VERIFICATION_REQUIRED"],isInvalidLoginValue:["LOGIN_VALUE_INVALID","PROFILE_NOT_FOUND"],isInvalidOtpCode:["DEVICE_LINK_INVALID_OTP_CODE"],isInvalidAccessToken:["AUTHORIZATION_INVALID_OR_EXPIRED_TOKEN"],isInvalidRefreshToken:["AUTHORIZATION_INVALID_REFRESH_TOKEN"],isInvalidSessionTransferKeyError:["INVALID_SESSION_TRANSFER_KEY"],isRateLimited:["RATE_LIMITED","RATE_LIMITED_API"]},At="ACTIONABLE_INPUT",vt="ADVISORY",St="FAILURE_BY_DESIGN",Nt="PPU_ACTIONABLE_INPUT",kt="CHILD",Ct="reduced",bt="MACHINE_GENERATED";function Pt(e){const t=(0,u.U2)(e,"error.errors"),n=(0,u.U2)(e,"error.keyCategory");return!t||!n||!(0,u.U2)(t,"length")?[]:t.filter((function(e){return e.category===n}))}function Lt(e){const t={[_t]:e=>e.inputName,[mt]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.disclosures)||[]).map((e=>e.disclosureCode)).join()},[yt]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.entities)||[]).map((e=>e.code)).join()}};return e.map((e=>{const n=t[e.code]&&t[e.code](e);return n?`${e.code}:${n}`:e.code})).join(";")}function Dt(e,t){return function(e,t,n=null){if(!Array.isArray(e))return[];Array.isArray(t)||(t=[t]);n&&!Array.isArray(n)&&(n=[n]);return(e||[]).filter((e=>-1!==t.indexOf(e.code)&&(!n||-1!==n.indexOf(e.inputName))))}(e,t)[0]}const Ut={};function Gt(e,t){Ut[e]=t}function xt(e){return Ut[e]}function $t(e){delete Ut[e]}function Vt(){for(const e in Ut)delete Ut[e]}function Ft(e){if(e)return Mt().then((t=>{const{s2CookieName:n,s2Domain:o}=t,r=I.getCookieDomain(),s=new Date(Date.now());s.setFullYear(s.getFullYear()+be),R(n,e,o,"/",s),m(n)!==e&&r&&R(n,e,r,"/",s)}))}function Mt(){return st().then((e=>{const{clientInfo:t={}}=e,n=t["s2-domain"]||window.location.hostname,o=t["s2-namespace"];return{s2CookieName:o?`${o}_${q}`:q,s2Domain:n,s2Namespace:o}}))}let jt={language:null,featureFlags:["no-password-reuse"],endpoint:null,clientId:null};const Bt=new U({getGuest:function({accessToken:e,swid:t}){const n={method:"",url:"",body:{},headers:{},query:{}},o=`/guest/${t}`;return n.query.feature="always-get-entitlements",n.query.expand=["profile","displayname","linkedaccounts","marketing","entitlements","s2"],n.headers.authorization=`BEARER ${e}`,{...n,method:"GET",url:o,eventName:je.SERVICE_REFRESH_GUEST,storeResponseKey:it.getGuest}},guestFlow:function(e,t=je.SERVICE_GUEST_FLOW){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest-flow",body:{email:e},eventName:t}},guestLogin:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o}){const r={method:"",url:"",body:{},headers:{},query:{}};e&&(r.headers["device-id"]=e);o&&(r.headers["g-recaptcha-token"]=o);return{...r,method:"POST",url:"/guest/login",body:{loginValue:t,password:n},eventName:je.SERVICE_LOGIN,storeResponseKey:it.guestLogin}},guestReauth:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o,accessToken:r}){const s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${r}`,e&&(s.headers["device-id"]=e);o&&(s.headers["g-recaptcha-token"]=o);return{...s,method:"POST",url:"/guest/reauth",body:{loginValue:t,password:n},eventName:je.SERVICE_REAUTH,storeResponseKey:it.guestLogin}},guestMarketingOptIn:function(e={}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/marketing",body:e,eventName:je.SERVICE_UPDATE_MARKETING,storeResponseKey:it.guestMarketingOptIn}},guestRecoveryMethods:function({loginValue:e}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/recovery-methods",body:{loginValue:e},eventName:je.SERVICE_OTP_LOGIN_RECOVERY_METHODS,storeResponseKey:it.guestRecoveryMethods}},guestRegister:function(e={}){const{password:t,profile:{username:n}={}}=e,o={autogeneratePassword:!t,autogenerateUsername:!n},r={method:"",url:"",body:{},headers:{},query:{}};e.recaptchaToken&&(r.headers["g-recaptcha-token"]=e.recaptchaToken);return{...r,method:"POST",url:"/guest/register",body:e,query:o,eventName:je.SERVICE_CREATE,storeResponseKey:it.guestRegister}},guestUpdateBySWID:function({guest:e,swid:t,accessToken:n,eventName:o}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${n}`},query:{feature:"no-password-reuse"},method:"POST",url:`/guest/${t}`,body:(0,u.d9)(e),eventName:o,storeResponseKey:it.guestUpdateBySWID}},guestValidate:function({body:e,eventName:t,storeResponseKey:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/validate",body:e,eventName:t,storeResponseKey:n}},licensePlatePeek:function(e){return{method:"",url:"",body:{},headers:{},query:{},method:"GET",url:`/license-plate/code/${e}`,eventName:je.SERVICE_LICENSE_PLATE_PEEK}},licensePlateRedeem:function(e,t){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/license-plate/code/${e}/activate`,body:{refreshToken:t},eventName:je.SERVICE_LICENSE_PLATE_REDEEM}},loginWithRecoveryToken:function({swid:e,recoveryToken:t,deviceId:n}){const o={method:"",url:"",body:{},headers:{},query:{}};n&&(o.headers["device-id"]=n);return{...o,method:"POST",url:"/guest/login/recoveryToken",body:{swid:e,recoveryToken:t},eventName:je.SERVICE_LOGIN_RECOVERY,storeResponseKey:it.loginWithRecoveryToken}},logout:function({swid:e,tokenAndClientIds:t=[]}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/guest/${e}/logout`,body:{tokenAndClientIds:t},eventName:je.SERVICE_LOGOUT}},notificationOTPEmailVerification:function({accessToken:e,eventName:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/email-verification",headers:{authorization:`BEARER ${e}`},eventName:t}},notificationOTPRecovery:function({recoveryPayload:e,eventName:t,intent:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/recovery",body:e,query:{intent:n},eventName:t,storeResponseKey:it.notificationOTPRecovery}},notificationOTPUpdateCredentials:function({accessToken:e,eventName:t}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/notification/otp/update-credentials",eventName:t,storeResponseKey:it.notificationOTPUpdateCredentials}},notificationOTPRegistration:function({email:e,accessToken:t,eventName:n=je.SERVICE_REGISTRATION_OTP_SENT}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/registration",body:{email:e},eventName:n}},oboLogin:function({oboToken:e,swid:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/login/on-behalf-of",body:{swid:t},headers:{Authorization:`BEARER ${e}`}}},otpRedeem:function({otpCode:e,sessionIds:t,eventName:n,assessmentId:o}){const r={passcode:e,sessionIds:t};o&&(r.assessmentId=o);return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/otp/redeem",body:r,eventName:n,storeResponseKey:it.otpRedeem}},otpRedeemEmailVerification:function({accessToken:e,otpCode:t,sessionIds:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/otp/verify-email",body:{passcode:t,sessionIds:n},eventName:je.SERVICE_OTP_EMAIL_VERIFICATION_REDEEM,storeResponseKey:it.otpRedeemEmailVerification}},otpRedeemUpdateCredentials:function({accessToken:e,otpCode:t,sessionIds:n,eventName:o}){const r={passcode:t,sessionIds:n};return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/otp/redeem-update-credentials",body:r,eventName:o,storeResponseKey:it.otpRedeemUpdateCredentials}},otpChangeEmail:function({recoveryToken:e,swid:t,newEmail:n}){const o=`/guest/${t}/update-credentials`;return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:o,headers:{authorization:`BEARER ${e}`},body:{email:n},eventName:je.SERVICE_UPDATE_GUEST_CREDENTIALS}},otpChangePassword:function({recaptchaToken:e,recoveryToken:t,swid:n,newPassword:o,loginValue:r}){const s=`/clickback-token/change-password/${n}`;return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:s,headers:{"g-recaptcha-token":e,authorization:`BEARER ${t}`},body:{newPassword:o,loginValue:r},eventName:je.SERVICE_OTP_LOGIN_RESET_PASSWORD,storeResponseKey:it.otpChangePassword}},updateCredentialsBySWID:function({recoveryToken:e,swid:t,newPassword:n,eventName:o}){const r=`/guest/${t}/update-credentials`;return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:r,storeResponseKey:it.loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID,headers:{authorization:`BEARER ${e}`},body:{password:n},eventName:o}},otpUpgradeNRT:function({recaptchaToken:e,recoveryToken:t,swid:n,password:o,username:r}){const s=`/clickback-token/upgrade-nrt/${n}`;return{method:"",url:"",body:{},headers:{},query:{},method:"PUT",url:s,headers:{"g-recaptcha-token":e,authorization:`BEARER ${t}`},body:{password:o,username:r},eventName:je.SERVICE_OTP_LOGIN_UPGRADE_NRT,storeResponseKey:it.otpUpgradeNRT}},refreshAuthorization:function(e){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/refresh-auth",body:{refreshToken:e},eventName:je.SERVICE_REFRESH_TOKEN}},redeemOTPCodePhoneVerification:function({otpCode:e,sessionIds:t,swid:n,accessToken:o,eventName:r}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${o}`},method:"POST",url:`/guest/${n}/verify/otp`,body:{passcode:e,sessionIds:t},eventName:r,storeResponseKey:it.redeemOTPCodePhoneVerification}},requestOTPCodePhoneVerification:function({phoneGuid:e,accessToken:t,eventName:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/verification",body:{phoneGuid:e},eventName:n,storeResponseKey:it.requestOTPCodePhoneVerification}},sendParentNotification:function({swid:e,accessToken:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/notification/parental-approval/${e}`,headers:{authorization:`BEARER ${t}`},eventName:je.EVENT_REGISTRATION_PIL2_NOTIFY,storeResponseKey:it.parentNotification}},deleteAccount:function({guest:e,swid:t,accessToken:n,eventName:o}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${n}`},method:"DELETE",url:`/guest/${t}`,body:{},eventName:o,storeResponseKey:it.deleteAccount}},activateSessionTransfer:function({accessToken:e,refreshToken:t,sessionTransferKey:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`,"Content-Type":"application/json"},method:"POST",url:"/session/transfer/activate",body:{refreshToken:t,sessionTransferKey:n},storeResponseKey:it.activateSessionTransfer,eventName:je.SERVICE_SESSION_TRANSFER_ACTIVATE}},authenticateViaSessionTransferKey:function({sessionTransferKey:e,eventName:t=je.API_REDEEM_SESSION_TRANSFER}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/session/transfer/redeem",body:{sessionTransferKey:e},eventName:t}}}),qt=Bt;function Wt(e){e.response.parsedErrors=function(e){if(!e)return null;const t=Pt(e),n=(0,u.U2)(e,"error.keyCategory");let o={};switch(Object.keys(Ot).forEach((e=>{Dt(t,Ot[e])&&(o[e]=!0)})),n){case Nt:o.isPPU=!0;break;case vt:o.isAdvisoryError=!0;break;case At:o.isActionableInputError=!0;const e=t.reduce(((e,t)=>{if(!t||!t.inputName)return e;const n=`${t.inputName}`,o=n.startsWith("profile.addresses"),r=(0,u.U2)(t,"data.type");if(o&&r){const o=`addresses.${r}.${n.replace(/.*\./,"")}`;return Object.assign(e,{[o]:t.code})}if(!o){const o=n.replace(/.*\./,"");return Object.assign(e,{[o]:t.code})}return e}),{});o.clientErrors=Object.keys(e).length?e:null,o.clientErrorsRawInputNames=t.filter((e=>e.inputName)).map((e=>e.inputName))}const r=(0,u.U2)(Dt(t,ut),"data")||{};o.isAuthorizationError&&r.passwordOrigin===bt&&(o.isLoginSetPassword=!0);const s=e.isValid&&!e.isValid(),i=500===e.status;return(s||i||n===Tt)&&(o.isServiceError=!0),t.forEach((e=>{e.code===Et&&"profile.region"===e.inputName&&(o.isInvalidRegionError=!0)})),0===Object.keys(o).length&&(o=null),o&&!o.clientErrors&&(o.clientErrors=null,o.clientErrorsRawInputNames=null),o}(e.response),(0,u.U2)(e.response.parsedErrors,"isPPU")&&Gt("ppuErrors",(0,u.U2)(e.response,"error.errors"))}let Kt;qt.addRequestMutator((e=>{e.request.headers={...e.request.headers,"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache",Expires:"-1"};const t=(0,u.U2)($(),"debug.geoIP");t&&(e.request.headers["x-forwarded-for"]=t)})),qt.addRequestMutator((e=>{e.request.query.langPref=jt.language})),qt.addRequestMutator((e=>{e.request.query.feature=jt.featureFlags})),qt.addRequestMutator((e=>{e.request.url=`${jt.endpoint}/client/${jt.clientId}${e.request.url}`})),qt.addRequestMutator((e=>{Kt=(0,u.Vj)();const t=xt("workflowOptions"),n=(0,u.U2)(t,"options.optionalConfigs.reporting.conversationId")||(0,u.Vj)();e.request.headers={...e.request.headers,"conversation-id":n,"correlation-id":Kt}})),qt.addRequestMutator((e=>{if(!e.request.headers.authorization)return new Promise((t=>{me.then((n=>{n.call("responder","get.cookie",`${jt.clientId}.${F}`).then((n=>{n&&(e.request.headers.authorization=`APIKEY ${n}`),t()})).catch((()=>t()))}))}))})),qt.addRequestMutator((e=>{const t=xt("workflowOptions");if(t){const n=(0,u.U2)(t,"options.optionalConfigs.reporting");e.request.headers={...e.request.headers,"oneid-reporting":(0,u.uP)(n)}}})),qt.addRequestMutator((e=>{e.newRelicLog=Je(e.request.eventName||"missing_action_name")})),qt.addResponseMutator((e=>{const{errorCodes:t,keyCategory:n,statusCode:o}=function(e){const t=(0,u.U2)(e,"error.keyCategory")||"";return{errorCodes:((0,u.U2)(e,"error.errors")||[]).map((e=>{let t=e.code;e.inputName&&(t+=`:${e.inputName}`);const n=(0,u.U2)(e,"data.disclosures");return n&&n.forEach((e=>{t+=`:${e.disclosureCode}`})),t}))||[],keyCategory:t,statusCode:(0,u.U2)(e,"status")||null}}(e.response),r=xt("logoutType"),i={[je.ERROR_CATEGORY]:n,[je.ERROR_CODES]:t.join(","),[je.TRANSACTION_ID]:Kt};r&&(i[je.INFO]=`logoutType(${r})`,$t("logoutType")),!o||o>=400&&o<500||o>=200&&o<300||(i[je.PROBLEM]=!0),s.debug("sending log : ",JSON.stringify(i,null,2)),e.newRelicLog.send(i),e.request.storeResponseKey&&Gt(e.request.storeResponseKey,e.response)})),qt.addResponseMutator((e=>{const t=e.response&&e.response.headers["api-key"];if(t){const e=new Date;e.setDate(e.getDate()+1),me.then((n=>n.message("responder","set.cookie",{key:`${jt.clientId}.${F}`,value:t,expires:e})))}})),qt.addResponseMutator((e=>{const t=(0,u.U2)(e.response,"data.s2");t&&Ft(t)})),qt.addResponseMutator((e=>{Wt(e)}));const Ht="Already initialized",Yt="Configuration options have already been set",zt="Could not initialize cross frame communication",Qt="`DisneyID` global object is soon to be deprecated. Use `OneID` instead.",Xt="OneID app timed out",Zt="Invalid argument",Jt="INVALID_PAIRING_CODE",en="MISSING_PAIRING_CODE",tn="clientId not provided",nn="No configuration options provided",on="NO_DATA",rn="Could not read guest profile data",sn="responderPage not provided",an="Could not get site config",cn="NO_VALID_CAMPAIGN",un="Not initialized",ln="PROFILE_UPDATE_INVALID",dn="Session already established",pn="Session not established",fn="FAILURE_BY_DESIGN",hn="UNKNOWN_ERROR";function gn(e){return new Promise(((t,n)=>{Bt.licensePlatePeek(e).then((e=>{if((0,u.U2)(e,"parsedErrors.isActionableInputError"))return n({errorCodes:Jt});t(e)})).catch((()=>n({errorCodes:hn})))}))}function En(){const{clientId:e,langPref:t,cssOverride:n,debug:o={}}=$(),{country:r,geoIP:s,iOSAutomation:i,testProfileFlag:a}=o,c=window.ONEID_WEB_SDK_MIGRATION?"bundleMigration":"bundle",u=m(_)||"INFO",l=i?"&iOSAutomation=true":"",d=a?"&testProfileFlag=Y":"",p=s?`&geoIP=${s}`:"",f=r?`&countryCode=${r}`:"";return`${Se.replace("https://web.archive.org/web/20230104160422/https://ui-qa.registerdisney","https://web.archive.org/web/20230104160422/https://uiv4-qa.registerdisney")}/${c}/web/${e}/${t}?cssOverride=${n}${f}&logLevel=${u}${l}${d}${p}`}function _n(){const{clientId:e,responderPage:t}=$(),n=Ne(),o=new URL(t);return o.searchParams.append("clientId",e),o.searchParams.append("environment",n),o.href}const mn=function(){const e=document.querySelector("html"),t=document.createElement("style");let n;return{showLightbox:function(){e&&e.classList.add("oneid-lightbox-open"),n.style.display="block",n.classList.add("state-active"),n.querySelector("#oneid-iframe").focus()},hideLightbox:function(){e&&e.classList.remove("oneid-lightbox-open"),n.style.display="none",n.classList.remove("state-active")},createInner:function(){const e=/(ipad|iphone|ipod)/gi.test(navigator.userAgent);t.setAttribute("id","oneid-style"),t.setAttribute("type","text/css"),t.innerHTML=`\n    div#oneid-wrapper {\n      position: ${e?"absolute":"fixed"};\n      display: none;\n      opacity: 0;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    div#oneid-wrapper.state-active {\n      z-index: 9999999;\n      opacity: 1;\n      transition: opacity 300ms;\n      -webkit-transition: opacity 300ms;\n    }\n    iframe#oneid-iframe {\n      width: 100%;\n      height: 100%;\n    }\n\n    html.oneid-lightbox-open {\n      overflow: hidden;\n      ${e?"height: 100%;":""}       \n    }\n\n    html.oneid-lightbox-open body {\n      overflow: hidden;\n      ${e?"height: 100%;":""}\n    }\n    `;const r=o({name:"oneid-iframe",title:"Account",documentURL:En()});return n=document.createElement("div"),n.setAttribute("id","oneid-wrapper"),n.appendChild(r),yn().then((()=>{document.head.appendChild(t),document.body.appendChild(n)})),r},createResponder:function(){const e=o({name:"oneid-secure-responder",documentURL:_n()});return e.style.display="none",yn().then((()=>{document.body.appendChild(e)})),e}};function o({name:e,title:t="",documentURL:n}){const o=document.createElement("iframe");return o.setAttribute("id",e),o.setAttribute("name",e),o.setAttribute("frameborder","0"),o.setAttribute("title",t),o.setAttribute("src",n),o}}();function yn(){return new Promise((e=>{const{readyState:t}=document;if("complete"===t||"loaded"===t||"interactive"===t)return e();document.addEventListener("DOMContentLoaded",(()=>e()),{once:!0})}))}function Rn(){return wn(Ce)}function In(e,t){if(!t)return!1;const n=e.newsletters;s.debug("newslettersConfig :",n);for(const e of Object.values(n))if(Object.keys(e||{}).includes(t))return!0;return!1}function Tn(){return st().then((e=>e?Promise.resolve():Promise.reject({errorCodes:an})))}function wn(e=3e4,t=Xt){let n;const o=Object.assign(new Promise(((r,s)=>{n=setTimeout((()=>{s({errorCodes:t}),o.wasRejected=!0}),e)})),{cancel:()=>(clearTimeout(n),this)});return o}function On(e,t={}){const n=(0,u.U2)(e,"optionalConfigs.displayOptions.cssContext"),o=(0,u.U2)(e,"optionalConfigs.displayOptions.darkMode"),r=(0,u.U2)(e,"optionalConfigs.displayOptions.suppressCreateAccountOpt");if(void 0!==n)if((0,u.kH)(n))t.displayOptions={...t.displayOptions,cssContext:n};else{Je(je.LOG_INVALID_DISPLAY_OPTION).send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:"cssContext",[je.INFO]:`cssContext(${n})`})}if(void 0!==o)if("boolean"===typeof o)t.displayOptions={...t.displayOptions,darkMode:o};else{Je(je.LOG_INVALID_DISPLAY_OPTION).send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:"darkMode",[je.INFO]:`darkMode(${o})`})}return void 0!==r&&"boolean"===typeof r&&(t.displayOptions={...t.displayOptions,suppressCreateAccountOpt:r}),t.options=Ze(),t.allowSkip=!!(0,u.U2)(e,"allowSkip"),t}function An(){return m(B)}function vn(){return s.debug("[OBO Cookie] - delete obo cookie",B,T()),y(B,T(),"/")}var Sn=n(0),Nn=n.n(Sn);const kn={ADULT:"X",TEEN:"Y",CHILD:"Z"};function Cn(e){if(!e)return Promise.resolve();const{clientId:t}=$(),n=`${t}-${Ne()}.${M}`;return me.then((t=>t.call("responder","set.cookie",{key:n,value:e,expires:0,secure:!0}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-identity)",[je.STACK_TRACE]:t})}))))}const bn="00";function Pn(){const{clientId:e}=$(),t=Ne();try{localStorage.removeItem(`${e}-${t}.guest`)}catch(e){}}function Ln(){return xt("tokenData")?Dn():xe().then((e=>{if(e&&!fe(e))return Gt("tokenData",e),Dn()}))}function Dn(){const{clientId:e}=$(),t=Ne();return function(){const{clientId:e}=$(),t=`${e}-${Ne()}.${M}`;return me.then((e=>e.call("responder","get.cookie",t).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-identity)",[je.STACK_TRACE]:t})}))))}().then((n=>{const o=xt("tokenData"),r=(0,u.U2)(o,"access_token");if(!r||!n)return;const s=function(e,t,n,o){let r=null;try{r=localStorage.getItem(`${n}-${o}.guest`)}catch(e){}return function(e,t,n){let o=null;try{o=JSON.parse(Nn().decrypt(e.substring(bn.length)+t,n))}catch(e){}return o}(`${e}`,t,r)}(n,r,e,t);if(!s)return Un();return(0,u.t8)(s,"guest.token",o)}))}function Un(){const{clientId:e}=$(),t=Ne(),n=xt("tokenData"),o=(0,u.U2)(n,"access_token"),r=(0,u.U2)(n,"swid");return Bt.getGuest({accessToken:o,swid:r}).then((r=>{if(200!==r.status)return null;const s=(0,u.U2)(r.data,"token")||n,i={...r.data,token:s};Gt("getGuestResponse",r),Gt("guest",i);return Cn(xn({guest:i,token:s},o,e,t)),i}))}function Gn(e,t){return new Promise((n=>{const o=(0,u.U2)(e,"guest");if(!o)return;let r;r=t?function(e){if(!e)return Promise.resolve();const{clientId:t}=$(),n=Ne(),o=new Date(Date.now());o.setFullYear(o.getFullYear()+be);const r=de({token:e});return me.then((e=>e.call("responder","set.cookie",{key:`${t}-${n}.${Y}`,value:r,expires:o,secure:!0}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))))}(e.token):Promise.resolve();const{clientId:i}=$(),a=Ne();let c;c=(0,u.U2)(e,"token.access_token")?Promise.resolve(e):xe();const l=function(e){const t=kn[(0,u.U2)(e,"profile.ageBand")||""],n=(0,u.U2)(e,"profile.region")||(0,u.U2)(e,"profile.countryCodeDetected"),o=t+n,{clientId:r}=$(),i=Ne();if(!t||!n||!e)return Promise.resolve();const a=new Date(Date.now());return a.setFullYear(a.getFullYear()+be),me.then((e=>e.call("responder","set.cookie",{key:`${r}-${i}-${V}`,value:o,expires:a}).catch((e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-ageBandCountry)",[je.STACK_TRACE]:t})}))))}(o);Promise.all([c,r,l]).then((t=>{Cn(xn(e,(0,u.U2)(t[0],"token.access_token"),i,a)).then(n),Gt("wasLoggedIn",!0),Gt("guest",o)}))}))}function xn(e,t,n,o){const r=function(e,t){const n=(0,u.d9)(e),o=JSON.stringify(n),r=(0,u.kn)(JSON.stringify({guest:e.guest})).toString(16);return{data:Nn().encrypt(r+t,o),checksum:bn+r}}({guest:e.guest,created:(new Date).toISOString()},t);try{localStorage.setItem(`${n}-${o}.guest`,r.data)}catch(e){}return r.checksum}const $n="api",Vn="invalid_refresh",Fn="logged_out_in_other_tab",Mn="obo_logout",jn="get_guest_gc_error",Bn="get_guest_session_error",qn="get_guest_missing_session_data",Wn="unknown";function Kn(e,t={}){const{clientId:n}=$(),o=Ne(),r=t.refresh_token,s=[];return r&&s.push({clientId:`${n}-${o}`,token:r}),e&&s.length?Bt.logout({swid:e,tokenAndClientIds:s}):Promise.resolve()}const Hn="error",Yn="init",zn="login",Qn="logout",Xn="low-trust",Zn="refresh";function Jn(e){const t=e||Wn;rt(Qn,t,`reason(${t})`)}function eo(e){const{clientId:t}=$(),n=Ne(),o=xt("logoutReason");return Ln().then((r=>(Pn(),Kn((0,u.U2)(r,"profile.swid"),(0,u.U2)(r,"token")).then((()=>me.then((r=>(r.message("inner","guest.logout"),Q((0,u.Vj)()),r.call("responder","guest.logout",`${t}-${n}`).finally((()=>(Jn(o),e("done"))))))))))))}const to=[{readToken:{stepExecution:function(e){return xe().then((t=>t?(Gt("tokenData",t),(0,u.U2)(t,"access_token")&&!fe(t)?e("readGuestFromLocalStorage"):(Gt("logoutType","norefresh"),Gt("logoutReason",Bn),void e("forceLogout"))):e())).catch((()=>e()))},results:{readGuestFromLocalStorage:"readGuestFromLocalStorage",forceLogout:"forceLogout"}}},{readGuestFromLocalStorage:{stepExecution:function(e){const t=xt("workflowOptions"),n=(0,u.U2)(t,"forceRefresh"),o=(0,u.U2)(t,"fullPayloadRequested");Dn().then((t=>{if(!t)return e("getGuestFromGuestController");t&&Gt("guest",t);const r=(0,u.U2)(t,"token.created"),s=!!r&&new Date(r).getTime()+ke<Date.now(),i=(0,u.U2)(t,"payload")===Ct;if(s||n||i&&o)return e("getGuestFromGuestController");e()}))},results:{getGuestFromGuestController:"getGuestFromGuestController"}}},{getGuestFromGuestController:{stepExecution:function(e){const t=xt("tokenData"),n=xt("guest")||{token:t},o=(0,u.U2)(n,"token.access_token"),r=(0,u.U2)(n,"token.swid")||(0,u.U2)(n,"profile.swid");return o&&r?Bt.getGuest({accessToken:o,swid:r}).then((t=>{Gt("getGuestResponse",t);const o=(0,u.U2)(t.data,"token")||n.token;if(200===t.status)return Gt("guest",{...t.data,token:o}),e("saveSession");const r=(0,u.U2)(t,"parsedErrors")||{};return r.isSecurityFlagged||r.isDisabled||r.isInvalidAccessToken?(Gt("logoutType","getGuest"),Gt("logoutReason",jn),e("forceLogout")):e()})):(Gt("logoutType","getGuest"),Gt("logoutReason",qn),e("forceLogout"))},results:{forceLogout:"forceLogout",saveSession:"saveSession"}}},{forceLogout:{stepExecution:eo,results:{}}},{saveSession:{stepExecution:function(e){const t=xt("guest")||{};return t&&t.token?Gn({guest:t,token:t.token}).then(e):e()},results:{}}}];function no(){const{clientId:e}=$(),t=`${e}-${Ne()}`;return`${j}${(0,u.kn)(t).toString(16)}`}function oo(){return m(no())}function ro(){return new Promise((e=>{if(oo())return s.debug("Mutex#cookie already present"),e(!1);setTimeout((()=>{if(oo())return s.debug("Mutex#cookie already present"),e(!1);s.debug("Mutex#setting cookie");const t=new Date(Date.now()+De);return R(no(),"0",I.getCookieDomain(),"/",t),e(!0)}),Math.floor(1e3*Math.random()+1e3))}))}let so=!1;function io(){return so}function ao(e){so=!!e}function co(e,t){const n=new Date(Date.now());return e.token=t,e.token.created=n.toISOString(),e.token.lastChecked=e.token.created,e.token.expires=new Date(e.token.exp).toISOString(),e.token.refresh_expires=new Date(e.token.refresh_exp).toISOString(),Gn({guest:e,token:e.token},!0)}const uo=[{readToken:{stepExecution:function(e){return xe().then((n=>{if(!n)return e();Gt("tokenData",n);return xt("originalRefreshToken")!==n.refresh_token?(t(),Gt("originalRefreshToken",n.refresh_token),e("emitRefreshEvent")):(0,u.U2)(n,"refresh_token")?e("acquireMutex"):(Gt("logoutType","norefresh"),t(),void e("ensureLoggedOut"))})).catch((()=>e()));function t(){Gt("mutexAttempt",0)}},results:{ensureLoggedOut:"ensureLoggedOut",acquireMutex:"acquireMutex",emitRefreshEvent:"emitRefreshEvent"}}},{ensureLoggedOut:{stepExecution:eo,results:{done:"releaseMutex"}}},{acquireMutex:{stepExecution:function(e){const t=xt("mutexAttempts")+1||1;return Gt("mutexAttempts",t),t>Pe?(s.debug("acquireMutex#max attempts reached"),n(),e("ensureGuestLoggedOut")):ro().then((t=>{if(!t)return s.debug("acquireMutex#could not acquire"),setTimeout((()=>{e("readToken")}),Le);n(),e("refreshToken")}));function n(){Gt("mutexAttempts",0)}},results:{readToken:"readToken",ensureGuestLoggedOut:"ensureLoggedOut",refreshToken:"refreshToken"}}},{refreshToken:{stepExecution:function(e){const t=xt("tokenData")||{},n=io();return Bt.refreshAuthorization(t.refresh_token).then((t=>{Gt("tokenRefreshResponse",t);const o=(0,u.U2)(t,"data.token")||{},r=(0,u.U2)(t,"parsedErrors")||{},s=200===t.status&&o.access_token&&o.refresh_token,i=n&&o.access_token&&o.refresh_token;return s||i?Dn().then((t=>(Gt("tokenData",o),Gt("originalRefreshToken",o.refresh_token),t?co(t,o).then((()=>e("emitRefreshEvent"))):Un().then((e=>co(e,o))).then((()=>e("emitRefreshEvent")))))):r.isInvalidRefreshToken?(Gt("logoutType","norefresh"),Gt("logoutReason",Vn),e("ensureGuestLoggedOut")):r.isSecurityFlagged?(Gt("logoutType","securityFlagged"),e("ensureGuestLoggedOut")):r.isGating?n?e("ensureGuestLoggedOut"):me.then((t=>t.call("inner","runWorkflow",{name:"GATING",workflowData:{parsedErrors:r}}).then((()=>(mn.showLightbox(),e("ensureGuestLoggedOut")))))):r.isPPU?n?e("ensureGuestLoggedOut"):Promise.all([Ln(),me]).then((([n,o])=>o.call("inner","runWorkflow",{guest:n,name:"LOGIN",step:"ppuSubflow",workflowData:{parsedErrors:r,ppu:{errors:t.error.errors}}}).then((()=>{mn.showLightbox(),e()})))):void 0})).catch((()=>e("releaseMutex")))},results:{ensureGuestLoggedOut:"ensureLoggedOut",releaseMutex:"releaseMutex",emitRefreshEvent:"emitRefreshEvent"}}},{forceRefresh:{stepExecution:function(e){return xe().then((t=>{if(!t)return e();Gt("tokenData",t),e("refreshToken")}))},results:{refreshToken:"refreshToken"}}},{emitRefreshEvent:{stepExecution:function(e){const t=xt("tokenData");return rt(Zn,t),Gt("tokenRefreshed",!0),me.then((n=>{n.message("inner","setGuest",{token:t}),e()})).catch(e)},results:{releaseMutex:"releaseMutex"}}},{releaseMutex:{stepExecution:function(e){y(no(),I.getCookieDomain(),"/"),$t("tokenData"),e()},results:{}}}];function lo(e){new Me("tokenRefresh",uo,void 0,(()=>e("done"))).runWorkflow()}const po=0,fo=1;function ho(){return new Promise((e=>{const{clientId:t}=$(),n=Ne();me.then((o=>o.call("responder","get.cookie",`${t}-${n}.${z}`).then((t=>{if(null===t)return e({state:!1});const n=Date.parse(t)-Date.now();e({state:n<1?po:fo,timeLeft:n})})).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-trustState)",[je.STACK_TRACE]:t})}))))}))}function go(e=Ge){const{clientId:t}=$(),n=Ne(),o=new Date(Date.now()+e);return me.then((e=>e.call("responder","set.cookie",{key:`${t}-${n}.${z}`,value:o.toISOString(),expires:o}).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-trustState)",[je.STACK_TRACE]:t})}))))}function Eo(){const{clientId:e}=$(),t=Ne();return me.then((n=>n.call("responder","delete.cookie",{key:`${e}-${t}.${z}`}).catch((e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-lib-cookies-trustState)",[je.STACK_TRACE]:t})}))))}const _o=e=>Gn({guest:e,token:e.token},!0);function mo(e){return function({guest:e,writeSWIDCookie:t,writeGuest:n,writeTrustStateCookie:o}){const r=new Date(Date.now()),s={...e,token:{...e.token,created:r.toISOString(),lastChecked:r.toISOString(),expires:new Date(e.token.exp).toISOString(),refresh_expires:new Date(e.token.refresh_exp).toISOString()}},i=(0,u.U2)(s,"profile.swid"),a=(0,u.U2)(s,"profile.ageBand")===kt;return Promise.all([t(i,a),n(s),o(1e3*s.token.high_trust_expires_in||void 0)])}({guest:e,writeSWIDCookie:Q,writeGuest:_o,writeTrustStateCookie:go})}function yo(e,t){s.error(e),tt({[je.ACTION_NAME]:je.EVENT_LOGIN_OBO,[je.ERROR_CATEGORY]:"Unknown",[je.INFO]:`substep(${t}),message(${(null===e||void 0===e?void 0:e.message)||""})`})}const Ro="EMAIL_VERIFICATION",Io="GATING",To="IDENTITY_FLOW",wo="LICENSE_PLATE",Oo="LOGIN",Ao="NEWSLETTERS",vo="REAUTH",So="REGISTRATION",No="UPDATE_PROFILE",ko="REDEEM_SESSION_TRANSFER";const Co=[{cleanUpSession:{stepExecution:function(e){xe().then((t=>{t&&(!function(){s.debug("[SESSION TOKEN] - Cookie deletion");const e=$(),t=Ne();y(`${e&&e.clientId}-${t}.${Y}`,T(),"/")}(),tt({[je.ACTION_NAME]:je.EVENT_LOGOUT,[je.INFO]:`reason(${Mn})`})),e("done")}))},results:{done:"attemptOBOLogin"}}},{attemptOBOLogin:{stepExecution:function(e){const t=m(K),n=An();s.debug("[OBO Login Attempt]: started obo: ",n," swid: ",t);const o=Je(je.EVENT_LOGIN_OBO);return Bt.oboLogin({swid:t,oboToken:n}).then((t=>(s.debug("[OBO Login Attempt]: response ",t),vn(),t.status>=400&&t.status<500||(e=>{var t;return((null===(t=e.error)||void 0===t?void 0:t.errors)||[]).some((e=>e.code===yt))})(t)?(Gt("oboResponse",t),function(e){var t;tt({[je.ACTION_NAME]:je.EVENT_LOGIN_OBO,[je.ERROR_CATEGORY]:(null===(t=e.error)||void 0===t?void 0:t.keyCategory)||"Unknown",[je.ERROR_CODES]:Lt(Pt(e))})}(t),void e("failed")):mo(t.data).then((()=>{s.debug("[OBO Attempt] - Success create session"),o.send({[je.INFO]:"login_obo_success"}),e("success")})).catch((t=>{yo(t,"createSession"),e("failed")}))))).catch((t=>{yo(t,"oboLogin"),vn(),e("failed")}))},results:{failed:"parseErrors"}}},{parseErrors:{stepExecution:function(e){var t,n;const o=xt("oboResponse")||{};return(null===o||void 0===o||null===(t=o.parsedErrors)||void 0===t?void 0:t.isPPU)?e("ppu"):(null===o||void 0===o||null===(n=o.parsedErrors)||void 0===n?void 0:n.isGating)?e("gating"):void e()},results:{ppu:"launchPPU",gating:"launchGating"}}},{launchPPU:{stepExecution:function(e){const t=xt("oboResponse")||{};return me.then((n=>n.call("inner","runWorkflow",{guest:t.data,name:Oo,step:"ppuSubflow",workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{mn.showLightbox(),e()}))))},results:{}}},{launchGating:{stepExecution:function(e){const t=xt("oboResponse")||{};return me.then((n=>n.call("inner","runWorkflow",{name:Io,workflowData:{parsedErrors:t.parsedErrors}}).then((()=>{mn.showLightbox(),e()}))))},results:{}}},{windowReload:{stepExecution:function(e){s.debug("[OBO Reload] - this app will be reloaded in 2 seconds...");const t=window.location.reload.bind(window.location);setTimeout(t,2e3)},results:{}}}];const bo=[{anonymize:{stepExecution:function(e){X()||Q((0,u.Vj)()),e("done")},results:{done:"checkForOBOToken"}}},{checkForOBOToken:{stepExecution:function(e){s.debug("[checkForOBOToken]: init");const t=An();if(!t)return s.debug("[checkForOBOToken]: no OBO Token"),e("notFound");s.debug("[checkForOBOToken]: OBO Token Found: ",t,t.isExpired),e("found")},results:{found:"oboSubflow",notFound:"readSession"}}},{readSession:{stepExecution:function(e){return xe().then((t=>t?(Gt("tokenData",t),fe(t)?(s.info("Starting token refresh"),Gt("originalRefreshToken",t.refresh_token),e("tokenRefresh")):void e("getGuestSubflow")):e()))},results:{getGuestSubflow:"getGuestSubflow",tokenRefresh:"tokenRefreshSubflow"}}},{getGuestSubflow:{stepExecution:function(e){new Me("getGuest",to,"readGuestFromLocalStorage",(()=>{const t=xt("guest");if(t)return me.then((e=>e.message("inner","setGuest",t))).finally(e);e()})).runWorkflow()},results:{}}},{tokenRefreshSubflow:{stepExecution:lo,results:{}}},{oboSubflow:{stepExecution:function(e){new Me("oboSubflow",Co,void 0,(()=>e("done"))).runWorkflow()},results:{done:"readSession"}}}];const Po=[{validate:{stepExecution:function(e){const t=xt("workflowOptions");let n=(0,u.U2)(t,"guestFlowEmail"),o=!1;if("string"===typeof n&&(n=n.trim().replace(/<|>/gim,""),o=p.test(n)),o)return Gt("guestFlowEmail",n),e("checkForAccount");$t("guestFlowEmail"),e("launchRegistration")},results:{checkForAccount:"checkForAccount",launchRegistration:"launchRegistration"}}},{checkForAccount:{stepExecution:function(e){const t=xt("guestFlowEmail");return t?Bt.guestFlow(t).then((t=>{const n=(0,u.U2)(t,"data.guestFlow")||"",o=n.match(h)?"launchLogin":"launchRegistration";Gt("guestFlowCode",n),e(o)})).catch((()=>e("launchRegistration"))):e("launchRegistration")},results:{launchLogin:"launchLogin",launchRegistration:"launchRegistration"}}},{launchRegistration:{stepExecution:function(e){Gt("guestFlowName","REGISTRATION_FLOW");const t=xt("workflowOptions"),n=xt("guestFlowEmail")||"",o=xt("guestFlowCode"),r={profile:{email:n}};return me.then((n=>n.call("inner","runWorkflow",{name:"REGISTRATION",workflowOptions:t,guestChanges:r,persistentTealiumData:{flow_name:"Guest Flow Registration",guest_flow:o}}).then((()=>{mn.showLightbox(),e()})).catch((t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-workflows-guestFlow-launchRegistration)",[je.STACK_TRACE]:n}),e()}))))},results:{}}},{launchLogin:{stepExecution:function(e){Gt("guestFlowName","LOGIN_FLOW");const t=xt("workflowOptions"),n=xt("guestFlowCode");return me.then((o=>o.call("inner","runWorkflow",{name:"LOGIN",workflowData:{loginValue:xt("guestFlowEmail")},workflowOptions:t,persistentTealiumData:{flow_name:"Guest Flow Login",guest_flow:n}}).then((()=>{mn.showLightbox(),e()})).catch((t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),tt({[je.ACTION_NAME]:je.LOG_PATCHBAY_ERROR,[je.INFO]:"location(outer-workflows-guestFlow-launchLogin)",[je.STACK_TRACE]:n}),e()}))))},results:{}}}];function Lo(e){const t={data:{email:null,legal:[]},error_codes:null},n=xt("workflowOptions")||{};t.data.campaignId=xt("promotionID"),Gt("workflowOptions",{...n,fullPayloadRequested:!0});new Me("getGuest",to,null,(()=>{const n=xt("guest");return n?(t.data.email=n.profile.email,Gt("responsePayload",t),e("guestIsLoggedIn")):(Gt("responsePayload",t),e("guestIsNotLoggedIn"))})).runWorkflow()}const Do="AGE_GATED",Uo="ALREADY_OPT_IN",Go="INVALID_EMAIL",xo="INVALID_LOCATION",$o="NO_DATA",Vo="NO_VALID_CAMPAIGN",Fo="SERVICE_ERROR";function Mo(e){const t=e.errors[0];if("MISSING_VALUE"===t.code){const e=t.inputName.toUpperCase();return`${t.code}_${e}`}return t.code}function jo(e){const t=xt("responsePayload");st().then((n=>{const o=(0,u.U2)(n,"compliance.ageBands.ADULT.country");if("US"!==o)return t.data={},t.error_codes=xo,Gt("responsePayload",t),e();Gt("defaultLegalCountry",o),e("getLegalData")}))}const Bo=(e,t=!1)=>({code:e.name,content:e.text,subscribed:t,preselected:e.checked});function qo(e){st().then((t=>{const n=xt("guest"),o=(0,u.U2)(n,"profile.region"),r=(0,u.U2)(n,"profile.countryCodeDetected"),s=(0,u.U2)(t,"compliance.defaultCountryCode");Gt("guestLocation",o||r||s||"US"),e("checkProfile")}))}function Wo(e){const t=xt("responsePayload"),n=xt("guest"),o=xt("workflowOptions"),r=function(e,t){if("CHILD"===(0,u.U2)(e,"profile.ageBand"))return Do;if("US"!==xt("guestLocation"))return xo;if(null!==t&&t!==(0,u.U2)(e,"profile.email"))return Go;return!1}(n,(0,u.U2)(o,"buData.email")||null)||!1;if(r)return t.error_codes=r,t.data={},Gt("responsePayload",t),e();e("hasOptedIntoAnything")}const Ko=[{runGetGuestWorkflow:{stepExecution:Lo,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:jo,results:{getLegalData:"getLegalData"}}},{getLegalData:{stepExecution:function(e){const t=xt("responsePayload");return Promise.all([st(),me.then((e=>e.call("inner","config.getL10n"))).then(u._A)]).then((([n,o])=>{const r=(0,u.U2)(n,"legal.ADULT.disclosures"),s=[];r.forEach((e=>{s.push({code:e.disclosureCode,requiresActiveConsent:e.requiresActiveConsent,accepted:!e.requiresActiveConsent,content:o[`legal.${e.disclosureCode}_create`]})})),t.data.legal=s,Gt("responsePayload",t),e("getMarketingData")}))},results:{getMarketingData:"getMarketingData"}}},{getMarketingData:{stepExecution:function(e){const t=xt("responsePayload"),n=xt("promotionID");return st().then((o=>{const r=(0,u.U2)(xt("guest"),"profile.ageBand")||"ADULT",s=(0,u.U2)(o,`newsletters.${r}.${n}`),i=new Set,a=[];s.forEach((e=>{i.has(e.name)||(i.add(e.name),a.push(Bo(e)))})),t.data.marketing=a,Gt("responsePayload",t),e()}))},results:{}}},{getGuestLegalCountry:{stepExecution:qo,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:Wo,results:{hasOptedIntoAnything:"hasOptedIntoAnything"}}},{hasOptedIntoAnything:{stepExecution:function(e){const t=xt("guest");e((0,u.U2)(t,"marketing")?"filterOptedInMarketingLists":"getMarketingData")},results:{getMarketingData:"getMarketingData",filterOptedInMarketingLists:"filterOptedInMarketingLists"}}},{filterOptedInMarketingLists:{stepExecution:function(e){st().then((t=>{const n=xt("guest"),o=(0,u.U2)(n,"marketing"),r=(0,u.U2)(n,"profile.ageBand"),s=xt("promotionID"),i=(0,u.U2)(t,`newsletters.${r}.${s}`),a=[];for(const e of i)a.push(...e.lists);const c=new Set(o.filter((e=>e.subscribed)).map((e=>e.code))),l=a.filter((e=>!c.has(e.name))),d=xt("responsePayload");l.length?d.data.marketing=l.map((e=>Bo(e))):(d.error_codes=Uo,d.data={}),Gt("responsePayload",d),e()}))},results:{}}}];const Ho=[{runGetGuestWorkflow:{stepExecution:Lo,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:jo,results:{getLegalData:"prepareRequest"}}},{getGuestLegalCountry:{stepExecution:qo,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:Wo,results:{hasOptedIntoAnything:"prepareRequest"}}},{prepareRequest:{stepExecution:function(e){const t=(0,u.U2)(xt("workflowOptions"),"buData"),n=(0,u.U2)(t,"legal"),o=(0,u.U2)(t,"marketing");if(!n||!o)return e();Gt("marketingParams",o);const r=(0,u.U2)(t,"campaignId"),s=xt("guestLocation")||xt("defaultLegalCountry");Gt("requestPayload",{profile:{email:t.email,countryCodeDetected:s,region:s},legalAssertions:n.filter((e=>e.accepted)).map((e=>e.code)),campaign:r}),e("prepareMarketingPayload")},results:{prepareMarketingPayload:"prepareMarketingPayload"}}},{prepareMarketingPayload:{stepExecution:function(e){const t=xt("requestPayload"),{campaign:n}=t,o=xt("marketingParams"),r=xt("guest"),s=r&&r.marketing;s&&o.push(...r.marketing);const i=function(e){const t=e.filter((e=>e.subscribed)),n=new Set,o=[];return t.forEach((e=>{n.has(e.code)||(o.push(e),n.add(e.code))})),o}(o);st().then((o=>{const a=(0,u.U2)(o,"newsletters.ADULT",n);let c=!1;const l=[];if(s){const e=[];a.forEach((t=>e.push(...t.lists)));const t={};e.forEach((e=>t[e.name]=e));for(const e of i){const n=t[e.code];if(!n){c=!0;break}l.push({code:n.name,subscribed:!0,textId:n.textId})}}else{const t={};a.forEach((e=>t[e.name]=e));for(const e of i){const n=t[e.code];if(!n){c=!0;break}{const e=n.lists.map((e=>({code:e.name,subscribed:!0,textId:n.textId})));l.push(...e)}}if(c)return Gt("responsePayload",{data:{},error_codes:"NO_VALID_CAMPAIGN"}),e()}t.marketing=l,Gt("requestPayload",t),e(r?"executeUpdate":"executeRequest")}))},results:{executeUpdate:"executeUpdate",executeRequest:"executeRequest"}}},{executeRequest:{stepExecution:function(e){const t=xt("requestPayload");return Bt.guestMarketingOptIn(t).then((t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?Gt("responsePayload",{data:{},error_codes:Mo(t.error)}):Gt("responsePayload",{data:"SUCCESS",error_codes:null}),e()})).catch((()=>{Gt("responsePayload",{data:{},error_codes:Fo}),e()}))},results:{}}},{executeUpdate:{stepExecution:function(e){const t=xt("requestPayload"),{marketing:n}=t,o=xt("guest"),r=(0,u.U2)(o,"profile.swid"),s=(0,u.U2)(o,"token.access_token"),i=je.SERVICE_UPDATE_GUEST,a={marketing:n};return Bt.guestUpdateBySWID({guest:a,swid:r,accessToken:s,eventName:i}).then((t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?(Gt("responsePayload",{data:{},error_codes:Mo(t.error)}),e()):(Gt("responsePayload",{data:"SUCCESS",error_codes:null}),e("reloadGuest"))})).catch((()=>{Gt("responsePayload",{data:{},error_codes:Fo}),e()}))},results:{reloadGuest:"reloadGuest"}}},{reloadGuest:{stepExecution:function(e){const t=xt("workflowOptions")||{};t.fullPayloadRequested=!0,t.forceRefresh=!0,Gt("workflowOptions",t),new Me("getGuest",to,null,(()=>e())).runWorkflow()},results:{}}}],Yo=["firstName","gender","lastName","middleName","prefix","suffix","languagePreference","pronunciationName","address.billing","address.home","address.school","address.shipping","address.work","phone.day","phone.mobile","phone.night","proposedDisplayName"],zo=["email","username","address.other","phone.fax","dateOfBirth","password","displayName","region"],Qo=["line1","line2","line3","city","stateProvince","postalCode","country","preferred"],Xo=["number","internationalPrefix","countryCode","extension","preferred"];function Zo(e,t){const n=Object.keys(e).filter((function(e){return 0===e.indexOf(`${t}.`)})).map((function(t){const n=t.split(".");return{type:n[1].toUpperCase(),field:n[2],value:e[t]}})).reduce((function(e,t){return(0,u.t8)(e,[t.type,t.field].join("."),t.value),e}),{});return Object.keys(n).map((function(e){return Object.assign(n[e],{type:e})}),[])}function Jo(e){e.forEach((e=>{Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]}))}))}function er(e,t,n){t.map((function(t){const o=(r=e,s=t.type,r.filter((e=>e.type===s)));var r,s;return o.length&&(t[n]=o[0][n]),t}))}function tr(e){let t=!1;for(const n in e)"addressGuid"!==n&&"type"!==n&&"preferred"!==n&&(t=!0);return t}function nr(e){if("string"===typeof e)return e.trim();if("object"===typeof e)for(const t in e)e[t]=nr(e[t]);return e}function or(e,t){const n={};for(const o in t)if(t.hasOwnProperty(o)){null!==e&&"object"===typeof e&&e.hasOwnProperty(o)||(n[o]=t[o]);if(null!==t[o]&&null!==e[o]&&!Array.isArray(t[o])&&!Array.isArray(e[o])&&"object"===typeof t[o]&&"object"===typeof e[o]){const r=or(e[o],t[o]);Object.keys(r).length>0&&(n[o]=r)}else(e[o]!==t[o]||Array.isArray(t[o]))&&(n[o]=t[o]);null===e[o]&&""===t[o]&&delete n[o]}return n}function rr(e,t){return t=(0,u.d9)(t),Object.keys(t||{}).forEach((function(n){null===(0,u.U2)(t,n)&&(0,u.U2)(e,n)&&(0,u.t8)(t,n,e[n])})),(0,u.t8)(e,"etag",(0,u.U2)(t,"etag")),e.profile=sr(e.profile,t.profile),e.displayName=sr(e.displayName,t.displayName),e.marketing=sr(e.marketing,t.marketing),e}function sr(e,t){if(null===t||"object"!==typeof t||Array.isArray(t))return t;for(const n in t)t.hasOwnProperty(n)&&((e=e||{})[n]=sr(e[n],t[n]));return e}const ir=[{runGetGuestWorkflow:{stepExecution:Lo,results:{guestIsLoggedIn:"parseInput",guestIsNotLoggedIn:{}}}},{parseInput:{stepExecution:function(e){const t=xt("workflowData"),n=function(e){return Object.keys(e).filter((function(t){return!("string"!==typeof e[t]||!e[t].trim())})).filter((function(e){for(let t=0;t<zo.length;t++)if(e.startsWith(zo[t]))return;return!0})).reduce((function(t,n){return t[n]=e[n].trim(),t}),{})}((0,u.U2)(t,"guestData")||{}),o=function(e){return Object.keys(e).filter((function(e){return!e.includes("address.")&&!e.includes("phone.")&&"proposedDisplayName"!==e})).reduce((function(t,n){return t.profile[n]=e[n],t}),{profile:{}})}(n);o.profile.addresses=Zo(n,"address"),o.profile.phones=Zo(n,"phone"),n.proposedDisplayName&&(o.displayName={proposedDisplayName:n.proposedDisplayName}),(0,u.t8)(t,"parsedGuest",o),Gt("workflowData",t),e("success")},results:{success:"prepareUpdate",error:"close"}}},{prepareUpdate:{stepExecution:function(e){const t=xt("workflowData"),n=(0,u.U2)(t,"parsedGuest"),o=(0,u.d9)(n),r=(0,u.U2)(t,"guest"),s=(0,u.U2)(r,"profile.addresses"),i=(0,u.U2)(r,"profile.phones"),a=(0,u.U2)(o,"profile.addresses"),c=(0,u.U2)(o,"profile.phones");Array.isArray(s)&&Array.isArray(a)&&er(s,a,"addressGuid"),Array.isArray(i)&&Array.isArray(c)&&er(i,c,"phoneGuid");const l=function(e,t){if("undefined"===typeof e||"undefined"===typeof t)return{};const n=nr((0,u.d9)({profile:or(e.profile||{},t.profile||{})||{},displayName:or(e.displayName||{},t.displayName||{})||{}}));Object.keys(n.profile).forEach((function(e){""===n.profile[e]&&(n.profile[e]=null)})),Object.keys(n.displayName).forEach((function(e){""===n.displayName[e]&&(n.displayName[e]=null)})),(0,u.U2)(n.profile,"dateLastModified")&&delete n.profile.dateLastModified;(0,u.U2)(n.profile,"segmentDeletes")&&delete n.profile.segmentDeletes;return function(e,t,n){const o=["line1","line2","line3","postalCode","stateProvince","country","city","type"],r=(0,u.d9)((0,u.U2)(t,"profile.addresses")||[]),s=[],i={};((0,u.U2)(e,"profile.addresses")||[]).forEach((function(e){i[e.addressGuid]=e})),(0,u.U2)(n,"profile.addresses")&&delete n.profile.addresses;Array.isArray(r)&&r.length&&(r.forEach((function(e){const t=e.addressGuid,n={};o.forEach((function(t){n[t]=e[t]?e[t]:null})),"undefined"!==typeof(0,u.U2)(i,[t,"addressGuid"].join("."))&&(n.addressGuid=t,a(n).forEach((function(o){i[t][o]===e[o]&&delete n[o]}))),a(n).length&&s.push(n)})),s.length&&(0,u.t8)(n,"profile.addresses",s));function a(e){return Object.keys(e).filter((function(e){return-1===["preferred","addressGuid","type"].indexOf(e)}))}}(e,t,n),function(e,t,n){if(!(0,u.U2)(n,"profile"))return;"undefined"!==typeof(0,u.U2)(n,"profile.phones")&&delete n.profile.phones;if(Array.isArray((0,u.U2)(t,"profile.phones"))){const s=[];t.profile.phones.forEach((function(t){let n,i;t.phoneGuid&&!t.number?s.push({phoneGuid:t.phoneGuid}):t.number&&t.type&&(n=r(e,t),n?(i=or(n,t),Object.keys(i).length>0&&(i.phoneGuid=t.phoneGuid,i.type=t.type,s.push(i))):s.push(o({number:t.number,type:t.type,internationalPrefix:t.internationalPrefix,countryCode:t.countryCode})))})),s.length&&(n.profile.phones=s)}function o(e){const t={};return Object.keys(e).forEach((function(n){let r;"object"===typeof e[n]?(r=o(e[n]),Object.keys(r).length>0&&(t[n]=r)):null!=e[n]&&(t[n]=e[n])})),t}function r(e,t){let n;const o=(0,u.U2)(e,"profile.phones");return t.phoneGuid&&o&&(n=o.filter((function(e){return e.phoneGuid===t.phoneGuid}))[0]),n}}(e,t,n),function(e,t,n){const o=(0,u.U2)(e,"marketing");let r=(0,u.U2)(t,"marketing");const s={};if((o||[]).forEach((function(e){s[e.code]=e})),Array.isArray(r)&&r.length&&(r=r.filter((function(e){return e.subscribed!==(0,u.U2)(s,[e.code,"subscribed"].join("."))})),r.length))return n.marketing=r,n.marketing}(e,t,n),function(e,t,n){const o=e.legalAssertions||[],r=[];(t.legalAssertions||[]).forEach((function(e){-1===o.indexOf(e)&&r.push(e)})),r.length>0&&(n.legalAssertions=r)}(e,t,n),Object.keys(n).forEach((function(e){"object"!==typeof n[e]||n[e]&&0!==Object.keys(n[e]).length||delete n[e]})),n}(r,o);if(Array.isArray((0,u.U2)(l,"profile.addresses"))){Jo(l.profile.addresses);const e=l.profile.addresses.filter(tr);e.length>0?l.profile.addresses=e:delete l.profile.addresses}Array.isArray((0,u.U2)(l,"profile.phones"))&&Jo(l.profile.phones),(0,u.t8)(t,"modifiedGuest",l),Gt("workflowData",t),e("success")},results:{success:"execute"}}},{execute:{stepExecution:function(e){const t=xt("workflowData"),n=(0,u.U2)(t,"guest"),o=(0,u.U2)(n,"etag"),r={...(0,u.U2)(t,"modifiedGuest"),etag:o},s=(0,u.U2)(n,"profile.swid"),i=(0,u.U2)(n,"token.access_token");return Bt.guestUpdateBySWID({guest:r,swid:s,accessToken:i,etag:o,eventName:je.API_SET_PPC}).then((t=>{const o=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==o||Gt("workflowData",{...xt("workflowData"),guest:rr(n,t.data)}),Gt("workflowErrors",(0,u.U2)(t,"error.errors")),e()}),(t=>{Gt("workflowErrors",(0,u.U2)(t,"error.errors")),e()}))},results:{}}}];function ar(e,t){return(e=e||[]).reduce(((e,n)=>("undefined"===typeof e[n[t]]&&(e[n[t]]=n),e)),{})}function cr(e){if((e=e||{})&&"EDITABLE"===e.editable){const t=e.type||{};return Object.keys(t).reduce(((e,n)=>{const o=t[n]||{};return e[n]=Object.keys(o).reduce(((e,t)=>("EDITABLE"===o[t].editable&&"type"!==t&&(e[t]=null),e)),{}),e}),{})}return null}function ur(e){const t=e.existingProfile[e.type]||e.template[e.type]||e.template.DEFAULT||null,n=e.config[e.type]||e.config.DEFAULT||null;return t&&n&&Object.keys(t).forEach((o=>{if(e.allowedFields.indexOf(o)>-1){const r=e.fieldName.split(".");r.push(o);const s=r.join(".");e.editableProfile.data[s]=t[o]||null,e.editableProfile.required[s]=(n[o]||{}).required||!1}})),e.editableProfile}const lr=[{runGetGuestWorkflow:{stepExecution:Lo,results:{guestIsLoggedIn:"getEditableAndRequiredFields",guestIsNotLoggedIn:{}}}},{getEditableAndRequiredFields:{stepExecution:function(e){const t=xt("guest");let n={data:{},required:{}};try{st().then((o=>{const r=Yo,s=`compliance.ageBands.${t.profile.ageBand}.UPDATE`,i=(0,u.U2)(o,s),a=ar(t.profile.addresses,"type"),c=ar(t.profile.phones,"type"),l=cr((0,u.U2)(o,`${s}.addresses`)),d=cr((0,u.U2)(o,`${s}.phones`)),p=(0,u.U2)(o,"displayName"),f=(0,u.U2)(p,"enabled");for(const e of r){const o=(e.split(".")[1]||"").toUpperCase();e.includes("address")&&i.addresses?n=ur({existingProfile:a,template:l,config:i.addresses.type,allowedFields:Qo,fieldName:e,editableProfile:n,type:o}):e.includes("phone")&&i.phones?n=ur({existingProfile:c,template:d,config:i.phones.type,allowedFields:Xo,fieldName:e,editableProfile:n,type:o}):e.toLowerCase().includes("displayname")&&f?n.data[e]=(0,u.U2)(t,`displayName.${e}`):i[e]&&(n.data[e]=(0,u.U2)(t,`profile.${e}`),n.required[e]=(0,u.U2)(i,e).required||!1)}return Gt("editableFields",n),Promise.resolve(e())}))}catch(e){Gt("editableFields",{error_codes:wt,data:{}})}},results:{}}}],dr=1e3;function pr(e,t){const n=this;this.start=e,this.end=t,this.getPercentElapsed=function(e){if(!(e instanceof Date))return null;const t=n.end.getTime()-n.start.getTime();return(e.getTime()-n.start.getTime())/t},this.getSecondsRemaining=function(e){if(!(e instanceof Date))return null;return(n.end.getTime()-e.getTime())/dr},this.getDateAtPercent=function(e){const t=n.end.getTime()-n.start.getTime();return new Date(n.start.getTime()+e*t)},this.getDateNearestToMultipleOfSeconds=function(e){if(e<=0)return null;const t=(n.end.getTime()-n.start.getTime())/dr,o=Math.ceil(t/e)*e;return new Date(n.start.getTime()+o*dr)}}let fr={};function hr(e){"undefined"===typeof e?fr={}:fr[e]=0}function gr(e){return fr[e]||0}const Er={VALID:1,REFRESH_WINDOW:2,EXPIRED:3};function _r(e){const t=this;this.data=e||{},this.getNextRefreshAttempt=function(e){s.log("Token#getNextRefreshAttempt");const d=new Date(t.data.created),p=new Date(t.data.expires);if(!(0,u.qb)(d)||!(0,u.qb)(p))return void s.error("Invalid created or expires date in token object");const f=new pr(d,p),h=f.getPercentElapsed(e),g=f.getSecondsRemaining(e),E=new pr(e,f.end);let _,m;if(h>1){const t=gr(Er.EXPIRED),n=new pr(f.end,e);m=Er.EXPIRED,s.debug(`Token currently expired. Retries already attempted within this interval: ${t}`),t<c?(s.debug("token should be refreshed immedietly"),_=e):(s.debug(`Too many attempts made within this interval. Get time nearest to interval of ${l} (round up)`),hr(),_=n.getDateNearestToMultipleOfSeconds(l))}else if(h>=o&&h<1||g<=r&&t.data.ttl>=a)m=Er.REFRESH_WINDOW,0===gr(Er.REFRESH_WINDOW)?(s.debug("Token is active, we are within the token refresh window and a refresh attempt has not yet been made. Refresh immedietly."),_=e):(s.debug("Token is active, we are within the token refresh window, and an attempt has already been made."),_=E.getDateAtPercent(i));else{s.debug("Valid token"),m=Er.VALID;const e=f.getDateAtPercent(o).getTime(),i=t.data.ttl<=a?e:f.end.getTime()-r*n;_=new Date(Math.min(e,i))}return{date:_,state:m}},this.isValid=function(){return"string"===typeof t.data.access_token&&"string"===typeof t.data.swid&&"number"===typeof t.data.ttl},this.isExpired=function(){const e=new Date(t.data.expires).getTime();return!t.isValid()||Number.isNaN(e)||e<new Date(Date.now()).getTime()};const n=1e3,o=.9,r=300,i=.5,a=480,c=3,l=300}let mr;function yr(){return s.log("TrustState#watch"),ho().then((e=>{if(Rr(),(0,u.U2)(e,"state")===po)return s.info("In low trust"),Ir(),void Eo();!function(e=Ge){mr=setTimeout((()=>{Ir(),Eo()}),e)}((0,u.U2)(e,"timeLeft"))})).catch((()=>{Ir(),Rr()}))}function Rr(){clearTimeout(mr),mr=void 0}function Ir(){rt(Xn)}_r.TOKEN_LIFECYCLE_STATE=Er;const Tr="EMAIL_VERIFICATION_CALLBACK",wr="LICENSE_PLATE_CALLBACK",Or="REAUTH_CALLBACK",Ar="REDEEM_SESSION_TRANSFER_CALLBACK";const vr={INITIALIZATION:bo,GET_GUEST:to,GUEST_FLOW:Po,GET_INLINE_NEWSLETTERS:Ko,SET_INLINE_NEWSLETTERS:Ho,GET_EDITABLE_AND_REQUIRED_FIELDS:lr,SESSION_STATE_TASKS:[{checkState:{stepExecution:function(e){const t=()=>{if(!0===xt("wasLoggedIn"))return e("syncLoggedOut");e()};return xe().then((n=>{if(!n)return t();Gt("loggedIn",!0);const o=new _r(n).getNextRefreshAttempt(new Date(Date.now()));if(Gt("nextRefreshAttempt",o),!1===xt("wasLoggedIn"))return e("syncLoggedIn");let r=xt("originalRefreshToken");if(r||(Gt("originalRefreshToken",n.refresh_token),r=n.refresh_token),r!==n.refresh_token||new Date(Date.now())>=(o.date||new Date(Date.now())))return e("tokenRefresh");e()})).catch(t)},results:{syncLoggedIn:"syncLoggedIn",syncLoggedOut:"syncLoggedOut",tokenRefresh:"tokenRefreshSubflow"}}},{tokenRefreshSubflow:{stepExecution:lo,results:{done:"incrementOrResetRefreshCounter"}}},{incrementOrResetRefreshCounter:{stepExecution:function(e){if(xt("tokenRefreshed"))hr(),$t("tokenRefreshed");else{const e=xt("nextRefreshAttempt")||{};t=e.state,fr[t]=(fr[t]||0)+1,fr[t]}var t;e()},results:{}}},{syncLoggedIn:{stepExecution:function(e){return Promise.all([Ln(),me]).then((([t,n])=>n.call("inner","setGuest",t).then((()=>{n.call("inner","reloadConfigFromBundlerIfChanged");const o=(0,u.U2)(t,"profile.ageBand")===kt;Q((0,u.U2)(t,"profile.swid"),o),rt(zn,t),yr(),Gt("loggedIn",!0),e()})))).catch(e)},results:{}}},{syncLoggedOut:{stepExecution:function(e){const t=X();return me.then((n=>n.call("inner","guest.logout").then((()=>{Rr(),t&&t.startsWith("{")&&Q((0,u.Vj)()),Jn(Fn),Vt(),Gt("loggedIn",!1),e()})).catch(e)))},results:{}}}],SET_PPC:ir,TOKEN_REFRESH:uo,REDEEM_SESSION_TRANSFER:[{redeemSessionTransfer:{stepExecution:function(e){const t=xt("workflowData"),n=(0,u.U2)(t,"sessionTransferKey")||"";return Bt.authenticateViaSessionTransferKey({sessionTransferKey:n}).then((t=>{t&&Gt("redeemResponse",{...t});if(((0,u.U2)(t,"error.errors")||[]).length)return e("parseErrors");e("createSession")})).catch(e)},results:{createSession:"createSession",parseErrors:"parseErrors"}}},{parseErrors:{stepExecution:function(e){const t=xt("redeemResponse")||{},n=t.parsedErrors||{};return n.isInvalidSessionTransferKeyError?e():n.isPPU&&200===t.status||200===t.status||n.isAdvisoryError?e("createSession"):n.isPPU&&400===t.status?e("ppu"):n.isGating?e("gatingSubflow"):void e()},results:{ppu:"ppuSubflow",createSession:"createSession",gatingSubflow:"gatingSubflow"}}},{ppuSubflow:{stepExecution:function(e){const t=xt("redeemResponse")||{};return A(Ar,(()=>{v(Ar),e()})),me.then((e=>{e.call("inner","runWorkflow",{apiCallback:{name:Ar},name:Oo,step:"ppuSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{mn.showLightbox()}))}))},results:{}}},{createSession:{stepExecution:function(e){const t=xt("redeemResponse").data;if(t)return mo(t).then((()=>{Gt("redeemSuccess",!0),e()})).catch((t=>{const n=(0,u.U2)(t,"message")||"";s.error(`Error in session-transfer create session call: ${n}`),e("error")}))},results:{error:"parseErrors"}}},{gatingSubflow:{stepExecution:function(e){const t=xt("redeemResponse")||{};return A(Ar,(()=>{v(Ar),e()})),me.then((e=>{e.call("inner","runWorkflow",{apiCallback:{name:Ar},name:Oo,step:"gatingSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then((()=>{mn.showLightbox()}))}))},results:{}}}]};function Sr({name:e,step:t=null,workflowOptions:n=null,onComplete:o=null,persistWorkflowOptions:r=!1}){n&&Gt("workflowOptions",n);new Me(e,vr[e],t,(()=>{r||$t("workflowOptions"),o&&o()})).runWorkflow()}const Nr={LOCAL:"https://web.archive.org/web/20230104160422/https://qa.registerdisney.go.com/jgc/v8",DEV:"https://web.archive.org/web/20230104160422/https://qa.registerdisney.go.com/jgc/v8",QA:"https://web.archive.org/web/20230104160422/https://qa.registerdisney.go.com/jgc/v8",STAGE:"https://web.archive.org/web/20230104160422/https://stg.registerdisney.go.com/jgc/v8",VALID:"https://web.archive.org/web/20230104160422/https://val.registerdisney.go.com/jgc/v8",PROD:"https://web.archive.org/web/20230104160422/https://registerdisney.go.com/jgc/v8"};let kr;function Cr(){Gt("sessionTimerPaused",!0),clearTimeout(kr)}function br(e){Gt("sessionTimerPaused",!1),Gt("loggedIn",e),Pr()}function Pr(){clearTimeout(kr),Gt("wasLoggedIn",xt("loggedIn")||!1),Sr({name:"SESSION_STATE_TASKS",onComplete:()=>{kr=setTimeout(Pr,Ue)},persistWorkflowOptions:!0})}var Lr=n(486),Dr=n.n(Lr);let Ur,Gr,xr;function $r(e=""){s.debug(`api/init: innerVersion "${e}"`),s.debug(`api/init: window.ONEID_WEB_SDK_VERSION "${window.ONEID_WEB_SDK_VERSION}"`),e!==window.ONEID_WEB_SDK_VERSION&&tt({[je.ACTION_NAME]:je.LOG_VERSION_MISMATCH,[je.INFO]:`outer(${window.ONEID_WEB_SDK_VERSION}),inner(${e})`}),xr=!0,Gr()}function Vr(){return xr}function Fr(){if(xr){if(rt(Hn,Ht),window.ONEID_WEB_SDK_MIGRATION){const e=Dr().defer();return e.reject(Ht),e.promise}return Promise.reject(Ht)}Xe({conversationId:(0,u.Vj)()});const e=Je(je.API_INIT),t=wn(9e4),n=function(){const e=new Promise((e=>{const t=mn.createInner();t.onload=()=>{e(t)}})),t=new Promise((e=>{const t=mn.createResponder();t.onload=()=>{e(t)}}));return Promise.all([e,t])}().then(Mr).then(jr),o=Promise.race([n,t]).then((()=>new Promise((n=>{((0,u.U2)($(),"debug")||{}).tealiumDebug&&me.then((e=>e.message("inner","turnOnDebugTealiumTracking")));const o=Ne()||"PROD",r=$()||{},{clientId:i}=r,a=r.langPref;var c;c={clientId:`${i}-${o}`,endpoint:Nr[o],language:a},jt={...jt,...c},Sr({name:"INITIALIZATION",onComplete:function(){t.cancel(),s.debug("OneID initialization complete"),e.send();const o=xt("guest"),r={loggedIn:!!(o||{}).token,guest:o||null};var i;rt(Yn,r),Vt(),i=r.loggedIn,s.log("SessionTimer#startTimer"),Gt("loggedIn",i),Pr(),r.loggedIn&&yr(),n(r)}.bind(this)})})))).catch((({errorCodes:t,errorCategory:n})=>(e.send({[je.ERROR_CATEGORY]:n||fn,[je.ERROR_CODES]:t||un}),rt(Hn,`${un}: ${t}`),Promise.reject(`${un}: ${t}`))));if(window.ONEID_WEB_SDK_MIGRATION){const e=Dr().defer();return o.then((t=>e.resolve(t))).catch((t=>e.reject(t))),e.promise}return o}function Mr([e,t]=frames){return new Promise(((n,o)=>{const r={frames:{outer:{window,origin:window.origin||window.location&&window.location.origin,channels:["inner","responder"]},inner:{window:e.contentWindow,origin:new URL(e.src).origin,channels:["outer","responder"]},responder:{window:t.contentWindow,origin:new URL(t.src).origin,channels:["inner","outer"]}}};Promise.all([he(r),me]).then((()=>{s.debug("Cross frame communication initialized"),n()})).catch((()=>o({errorCodes:zt})))}))}function jr(){return Ur}Ur=new Promise((e=>Gr=e)),xr=!1;const Br={doNotDisturb:ss({preConditions:[Xr],method:function([e]){if("boolean"!==typeof e)return Promise.reject({errorCodes:Zt});return ao(e),Promise.resolve()},actionName:je.API_SET_DO_NOT_DISTURB,logInfoKey:"flag"}),forceTokenRefresh:ss({preConditions:[Xr,zr],method:function([e]){$t("tokenRefreshResponse"),Xe(e);const t=Rn(),n=new Promise((e=>{Sr({name:"TOKEN_REFRESH",step:"forceRefresh",onComplete:()=>{const t=xt("tokenRefreshResponse"),n=(0,u.U2)(t,"data.token"),o=(0,u.U2)(t,"error.keyCategory")||"",r=[];((0,u.U2)(t,"error.errors")||[]).forEach((e=>{r.includes(e.code)||r.push(e.code)})),$t("tokenRefreshResponse"),e({errorCategory:o,errorCodes:r,newTokens:n})}})}));return Promise.race([n,t]).then((({errorCategory:e,errorCodes:n,newTokens:o})=>(t.cancel(),o?Promise.resolve(o):e||n.length?Promise.reject({errorCategory:e,errorCodes:n.join(",")}):(tt({[je.ACTION_NAME]:je.LOG_APPLICATION_ERROR,[je.ERROR_CATEGORY]:fn,[je.INFO]:"api(forceTokenRefresh),data(missing_tokens,no_errors)"}),Promise.reject({errorCategory:fn,errorCodes:hn})))))},actionName:je.API_FORCE_TOKEN_REFRESH}),getEditableProfileFields:ss({preConditions:[Xr,zr],method:function([e]){Xe(e);const t=Rn(),n=Tn().then(Ln).then((t=>t.profile&&0===Object.keys(t.profile).length?Promise.reject({errorCodes:rn}):new Promise((n=>{Sr({name:"GET_EDITABLE_AND_REQUIRED_FIELDS",workflowOptions:On(e,t),onComplete:n})})))).then((()=>{const e=xt("editableFields");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()}));return Promise.race([n,t]).then((()=>{t.cancel();const e=xt("editableFields");return Promise.resolve(e)}))},actionName:je.API_GET_PPC}),getGuest:ss({preConditions:[Xr,zr],method:function(e){const[t=!1,n={}]=e,o=!0===t;Xe(n);const r=Rn(),s=Tn().then((()=>new Promise(((e,t)=>{const r={forceRefresh:(0,u.U2)(n,"forceRefresh")||!1,fullPayloadRequested:!!o};Sr({name:"GET_GUEST",workflowOptions:On(n,r),onComplete:()=>{const n=xt("getGuestResponse");if($t("getGuestResponse"),n){const o=(0,u.U2)(n,"error.keyCategory")||"FAILURE_BY_DESIGN";let s=[];return(0,u.U2)(n,"error.errors")&&(0,u.U2)(n,"error.errors").forEach((function(e){-1===s.indexOf(e.code)&&s.push(e.code)})),s=s.length?s.join(","):"UNABLE_TO_RETRIEVE_GUEST_DATA",r.localCopyReturned=!1,xt("logoutType")?t({errorCodes:s,errorCategory:o,[je.INFO]:r}):(0,u.U2)(n,"data.profile")?e(xt("guest")||null):t({errorCodes:s,errorCategory:o,[je.INFO]:r})}e(xt("guest")||null)}})}))));return Promise.race([s,r]).then((e=>(r.cancel(),Promise.resolve(e))))},actionName:je.API_GET_GUEST_DATA,logInfoKey:"fullPayload"}),getGuestNewsletters:ss({preConditions:[Xr,zr],method:function([e]){Xe(e);const t=Rn(),n=Ln().then((e=>(0,u.U2)(e,"marketing")||null));return Promise.race([n,t]).then((e=>(t.cancel(),Promise.resolve(e))))},actionName:je.API_GET_GUEST_NEWSLETTERS}),getInlineNewsletters:ss({preConditions:[Xr],method:function(e){const[t,n]=e;Xe(n);const o=Rn(),r=st().then((e=>e?In(e,t)?Promise.resolve():Promise.reject({errorCodes:cn}):Promise.reject({errorCodes:an}))).then((()=>new Promise((e=>{Gt("promotionID",t),Sr({name:"GET_INLINE_NEWSLETTERS",workflowOptions:On(n),onComplete:e})})))).then((()=>{const e=xt("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()})).finally((()=>{$t("promotionID")}));return Promise.race([r,o]).then((()=>{o.cancel();const e=xt("responsePayload");return Promise.resolve(e)}))},actionName:je.API_GET_INLINE_NEWSLETTERS,logInfoKey:"promotionId"}),getTrustStateStatus:ss({preConditions:[Xr,zr],method:function([e]){Xe(e);const t=Rn();let n;const o=ho().then((({state:e})=>n=e));return Promise.race([o,t]).then((()=>(t.cancel(),Promise.resolve(n))))},actionName:je.API_GET_TRUST_STATE_STATUS}),init:Fr,getConfig:function(){return qr},getLicensePlateDataBag:ss({preConditions:[Xr],method:function([e={},t]){Xe(t);const{pairingCode:n=""}=e;if(!n||0===n.length)return Promise.reject({errorCodes:en});return Gt("workflowOptions",On(t)),gn(n)},actionName:je.API_GET_LICENSE_PLATE_DATA_BAG}),getLoggedInStatus:ss({preConditions:[()=>Ur],method:Zr,actionName:je.API_GET_LOGGED_IN_STATUS}),launchEmailVerification:ss({preConditions:[Xr,zr],method:function([e]){return Xe(e),new Promise(((t,n)=>{const o="EMAIL_ALREADY_VERIFIED";Tn().then(Ln).then((t=>{if(t.profile.emailVerified)throw new Error(o);return me.then((n=>n.call("inner","runWorkflow",{apiCallback:{name:Tr},guest:t,name:Ro,workflowOptions:On(e)})))})).then((()=>{A(Tr,(({errorCategory:e,errorCodes:o,wasSuccess:r})=>{v(Tr),r?t():n({errorCategory:e,errorCodes:o})})),mn.showLightbox()})).catch((e=>{v(Tr),e.message!==o?n(new Error(hn)):t()}))}))},actionName:je.API_LAUNCH_EMAILVERIFICATION,newRelicFlowName:(0,u.hK)(Ro)}),launchGuestFlow:ss({preConditions:[Xr,Qr],method:function([e,t]){Xe(t);const n=Rn(),o=new Promise((n=>{Sr({name:"GUEST_FLOW",workflowOptions:On(t,{guestFlowEmail:e}),onComplete:n})}));return Promise.race([o,n]).then((()=>{const e=`SUCCESS_LAUNCH_${xt("guestFlowName")}_${xt("guestFlowEmail")?"WITH":"WITH_OUT"}_EMAIL`;return n.cancel(),$t("guestFlowCode"),$t("guestFlowName"),$t("guestFlowEmail"),Promise.resolve(e)}))},actionName:je.API_LAUNCH_GUESTFLOW}),launchIdentityFlow:ss({preConditions:[Xr,Qr],method:function([e,t]){Xe(t);const n=Rn(),o=Tn().then((()=>{const n=On(t),o={name:To,workflowOptions:n,workflowData:{isIdentityFlow:!0}};return e&&(o.workflowData.loginValue=e,o.workflowData.skipPrompt=!0),me.then((e=>e.call("inner","runWorkflow",o)))}));return Promise.race([o,n]).then((()=>(n.cancel(),mn.showLightbox(),Promise.resolve())))},actionName:je.API_LAUNCH_IDENTITYFLOW,newRelicFlowName:(0,u.hK)(To)}),launchLicensePlate:ss({preConditions:[Xr],method:function([e={}]){Xe(e);const{pairingCode:t="",authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r=!0,showSuccessScreen:s}=e;if(!t||0===t.length)return Promise.reject({errorCodes:en});return new Promise(((i,a)=>{Cr(),Tn().then(Ln).then((i=>me.then((a=>a.call("inner","runWorkflow",{apiCallback:{name:wr},guest:i,name:wo,workflowData:{authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r,pairingCode:t,showSuccessScreen:s},workflowOptions:On(e)}))))).then((()=>{A(wr,(({errorCodes:e=wt,wasSuccess:t=!1})=>{if(v(wr),Zr().then((e=>br(e))),t)return i();a({errorCategory:St,errorCodes:e})})),mn.showLightbox()})).catch((()=>{Zr().then((e=>br(e))),a(new Error(hn))}))}))},actionName:je.API_LAUNCH_LICENSE_PLATE,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(wo)}),launchLogin:ss({preConditions:[Xr,Qr],method:function([e]){Xe(e);const t=Rn(),n=Tn().then((()=>{const t=On(e),n={name:Oo,workflowOptions:t},o=(0,u.U2)(e,"optionalConfigs.email");return o&&(n.workflowData={loginValue:o}),me.then((e=>e.call("inner","runWorkflow",n)))}));return Promise.race([n,t]).then((()=>(t.cancel(),mn.showLightbox(),Promise.resolve())))},actionName:je.API_LAUNCH_LOGIN,newRelicFlowName:(0,u.hK)(Oo)}),launchNewsletters:ss({preConditions:[Xr],method:function(e){const[t,n]=e;Xe(n);const o=Rn();let r;const s=Ln().then((e=>(r=e,st()))).then((e=>e?In(e,t)?Promise.resolve(t):Promise.reject({errorCodes:Zt}):Promise.reject({errorCodes:an}))).then((e=>me.then((t=>{const o=On(n,{promotionId:e});t.call("inner","runWorkflow",{guest:r,name:Ao,workflowOptions:o})}))));return Promise.race([s,o]).then((()=>(o.cancel(),mn.showLightbox(),Promise.resolve())))},actionName:je.API_LAUNCH_NEWSLETTERS,logInfoKey:"promotionId",newRelicFlowName:(0,u.hK)(Ao)}),launchProfile:ss({preConditions:[Xr,zr],method:function([e]){Xe(e);const t=Rn(),n=On(e),o=Tn().then(Ln).then((e=>me.then((t=>t.call("inner","runWorkflow",{guest:e,name:No,workflowOptions:n})))));return Promise.race([o,t]).then((()=>(t.cancel(),mn.showLightbox(),Promise.resolve())))},actionName:je.API_LAUNCH_PROFILE,newRelicFlowName:(0,u.hK)(No)}),launchReauth:ss({preConditions:[Xr,zr],method:function([e]){return Xe(e),new Promise(((t,n)=>{Tn().then(Ln).then((t=>me.then((n=>n.call("inner","runWorkflow",{apiCallback:{name:Or},guest:t,name:vo,workflowOptions:On(e)}))))).then((()=>{A(Or,(({errorCodes:e=wt,wasSuccess:o=!1})=>{if(v(Or),o)return $t("tokenData"),Ln().then((e=>t(e)));n({errorCategory:St,errorCodes:e})})),mn.showLightbox()})).catch((()=>n(new Error(hn))))}))},actionName:je.API_LAUNCH_REAUTH,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(vo)}),launchRegistration:ss({preConditions:[Xr,Qr],method:os,actionName:je.API_LAUNCH_REGISTRATION,newRelicFlowName:(0,u.hK)(So)}),logout:ss({preConditions:[Xr,Zr],method:function(){const{clientId:e}=$(),t=Ne(),n=Rn();Rr(),Cr();const o=Ln().then((n=>{Vt();const o=(0,u.U2)(n,"profile.swid"),r=(0,u.U2)(n,"token");return Pn(),o&&r?(Mt().then((e=>{const{s2CookieName:t,s2Domain:n}=e,o=I.getCookieDomain();y(t,n,"/"),o&&y(t,o,"/")})),Kn(o,r).then((()=>me.then((n=>(n.message("inner","guest.logout"),Q((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`))))))):(tt({[je.ACTION_NAME]:je.LOG_MISSING_GUEST_DATA_ON_LOGOUT,[je.INFO]:`swid(${o?"present":"missing"}),tokens(${r?"present":"missing"})`}),me.then((n=>(n.message("inner","guest.logout"),Q((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`)))))}));return Promise.race([o,n]).then((()=>(br(!1),n.cancel(),Jn($n),Promise.resolve())))},actionName:je.API_LOGOUT}),on:A,off:v,setEditableProfileFields:ss({preConditions:[Xr,zr],method:function(e){const[t,n]=e;if(Xe(n),0===e.length||t&&0===Object.keys(t).length)return Promise.reject({errorCodes:on});const o=/^phone\.mobile/;if(Object.keys(t).find((e=>o.test(e))))return Promise.reject({errorCodes:ln});const r=Rn(),s=Tn().then(Ln).then((e=>e.profile&&0===Object.keys(e.profile).length?Promise.reject({errorCodes:rn}):(Gt("workflowData",{guestData:t,guest:e}),new Promise((e=>{Sr({name:"SET_PPC",onComplete:e})}))))).then((()=>{const e=xt("workflowErrors")||[];return e.length?Promise.reject({errorCodes:e[0].code}):Promise.resolve()}));return Promise.race([s,r]).then((()=>{r.cancel();const{guest:e}=xt("workflowData");return Gn({guest:e,token:e.token},!0),{data:e}})).finally((()=>{$t("workflowErrors")}))},actionName:je.API_SET_PPC}),setInlineNewsletters:ss({preConditions:[Xr],method:function(e){const[t,n]=e;if(Xe(n),!e||!t)return Promise.reject({errorCodes:on});const o=Rn(),r=st().then((e=>e?In(e,t.campaignId)?new Promise((e=>{Sr({name:"SET_INLINE_NEWSLETTERS",workflowOptions:On(n,{buData:t}),onComplete:e})})):Promise.reject({errorCodes:Vo}):Promise.reject({errorCodes:an}))).then((()=>{const e=xt("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve(e)}));return Promise.race([r,o]).then((()=>(o.cancel(),Promise.resolve())))},actionName:je.API_SET_INLINE_NEWSLETTERS}),redeemSessionTransferKey:ss({preConditions:[Xr,Qr],method:function([e,t]){if(Xe(t),!e)return Promise.reject({errorCodes:Zt});return new Promise(((n,o)=>{Tn().then((()=>{Gt("workflowData",{sessionTransferKey:e});Sr({name:"REDEEM_SESSION_TRANSFER",workflowOptions:On(t),onComplete:()=>{const e=xt("redeemSuccess")||!1,t=xt("redeemResponse");if(!(0,u.U2)(t,"data.profile")){const e=(0,u.U2)(t,"error.keyCategory")||fn;let n=[];return(0,u.U2)(t,"error.errors")&&(0,u.U2)(t,"error.errors").forEach((function(e){n.includes(e.code)||n.push(e.code)})),n=n.length?n.join(","):wt,o({errorCategory:e,errorCodes:n})}if(e)return n({data:t.data});o({errorCategory:fn,errorCodes:wt})}})})).catch((()=>{o(new Error(hn))}))}))},actionName:je.API_REDEEM_SESSION_TRANSFER,newRelicFlowName:(0,u.hK)(ko)}),setLogLevel:function(t,n){if("string"!==typeof t||!e[t.toUpperCase()])return void s.warn(Zt);const o=e[t.toUpperCase()];i(o),me.then((e=>e.broadcast("config.setLogLevel",o))),n&&o!==e.OFF?R(_,t,null,"/"):n&&o!==e.OFF||y(_,null,"/")}};let qr;const Wr={get:es},Kr={get:(Hr=es,Yr=Qt,"function"===typeof Hr?function(...e){return s.warn(Yr),Hr.apply(this,e)}:Hr)};var Hr,Yr;function zr(){return new Promise(((e,t)=>{Zr().then((n=>{if(n)return e();t({errorCategory:fn,errorCodes:pn})}))}))}function Qr(){return new Promise(((e,t)=>{Zr().then((n=>{if(!n)return e();t({errorCategory:fn,errorCodes:dn})}))}))}function Xr(){return new Promise(((e,t)=>{if(Vr())return e();t({errorCategory:fn,errorCodes:un})}))}function Zr(){return xe().then((e=>!!e&&!fe(e))).catch((()=>!1))}function Jr(e){return"string"!==typeof e||!e.length}function es(e){s.debug("JS SDK get() was called with the following configuration:",e);const t=!!$(),n=(0,u.d9)(e),o=[];if(n&&t)throw new Error(Yt);if(!t){if(!n||!Object.keys(n).length)throw new Error(nn);if(!n.clientId||"string"!==typeof n.clientId)throw new Error(tn);if(!n.responderPage)throw new Error(sn);let e="";try{e=new URL(n.responderPage)}catch(e){throw new Error(`${Zt}: responderPage`)}const t=(0,u.KT)(window.location.hostname),c=(0,u.KT)(e.hostname);t!==c&&(s.warn("responder page domain does not match the top window domain. responder domain:",c),o.push("responderPage")),n.hasOwnProperty("langPref")&&(Jr(a=n.langPref)||!f.test(a))&&(s.warn("invalid config.langPref passed to get(config) - it is being ignored."),o.push("langPref"),delete n.langPref),n.hasOwnProperty("cssOverride")&&("string"!==typeof(i=n.cssOverride)||!i.startsWith("http")&&0!==i.length)&&(s.warn("invalid config.cssOverride passed to get(config) - it is being ignored."),o.push("cssOverride"),delete n.cssOverride),n.hasOwnProperty("experience")&&(Jr(r=n.experience)||!/^[A-Z0-9.\-_]+.EXP$/.test(r))&&(s.warn("invalid config.experience passed to get(config) - it is being ignored."),o.push("experience"),delete n.experience),g.test(n.clientId)&&(s.warn("passing environment as part of the Client ID is deprecated - it is being ignored."),o.push("clientId"),n.clientId=n.clientId.replace(g,"")),function(e){G=(0,u._A)((0,u.d9)({...x,...e}))}(n),qr=(0,u._A)((0,u.d9)(n)),function(e){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"experience");t&&!nt(t)&&(s.warn("optionalConfigs.reporting does not pass validation, values will be ignored"),t=null),n&&!ot(n)&&(s.warn("experience does not pass validation, values will be ignored"),n=null),(t||n)&&(He={reporting:t,...n&&{experience:n}})}(qr),n.initialize&&Fr(),o.length&&tt({[je.ACTION_NAME]:je.LOG_INVALID_OID_CONFIG,[je.INFO]:o.join(",")})}var r,i,a;window.ONEID_WEB_SDK_MIGRATION&&(Br.launchSocialRegistration=ss({preConditions:[Xr,Qr],method:os,actionName:je.API_LAUNCH_SOCIAL_REGISTRATION}),Br.getInlineNewsletters=ts,Br.setInlineNewsletters=ns);const c=(0,u.d9)(Br);return A(Hn,(e=>s.error(e))),c}function ts(e,t){const n=Je(je.API_GET_INLINE_NEWSLETTERS),o=`promotionId(${e})`;if(Xe(t),!Vr())return n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:un,[je.INFO]:o}),rt(Hn,un),Promise.reject({data:{},error_codes:un});const r=is(n,o,Xt),s=st().then((t=>t?In(t,e)?Promise.resolve():(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:cn,[je.INFO]:o}),rt(Hn,cn),Promise.reject({data:{},error_codes:Vo})):(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:an,[je.INFO]:o}),rt(Hn,an),Promise.reject({data:{},error_codes:an})))).then((()=>new Promise((n=>{Sr({name:"GET_INLINE_NEWSLETTERS",workflowOptions:On(t,{promotionId:e}),onComplete:n})})))).then((()=>{const e=xt("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:e.error_codes,[je.INFO]:o}),rt(Hn,e.error_codes),e.data={},Promise.reject(e)):Promise.resolve()}));return Promise.race([s,r]).then((()=>{r.cancel(),n.send({[je.INFO]:o});const e=xt("responsePayload");return Promise.resolve(e)}))}function ns(e,t){const n=Je(je.API_SET_INLINE_NEWSLETTERS);if(Xe(t),!Vr())return n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:un}),rt(Hn,un),Promise.reject({data:{},error_codes:un});if(!e)return n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:on}),rt(Hn,on),Promise.reject({data:{},error_codes:$o});const o=is(n,void 0,{data:{},error_codes:Xt}),r=st().then((t=>t?In(t,e.campaignId)?Promise.resolve():(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:Vo}),Promise.reject({data:{},error_codes:Vo})):(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:an}),rt(Hn,an),Promise.reject({data:{},error_codes:an})))).then((()=>new Promise((n=>{Sr({name:"SET_INLINE_NEWSLETTERS",workflowOptions:On(t,{buData:e}),onComplete:n})})))).then((()=>{const e=xt("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:e.error_codes}),rt(Hn,e.error_codes),Promise.reject(e)):Promise.resolve(e)}));return Promise.race([r,o]).then((()=>{o.cancel();const e=xt("responsePayload");return Promise.resolve(e)}))}function os(e){const[t]=e;Xe(t);const n=Rn(),o=On(t),r={name:So,workflowOptions:o},s=(0,u.U2)(t,"optionalConfigs.providedProfile");s&&(r.guestChanges={profile:s});const i=Tn().then((()=>me.then((e=>{e.call("inner","runWorkflow",r)}))));return Promise.race([i,n]).then((()=>(n.cancel(),mn.showLightbox(),Promise.resolve())))}function rs(e){return(0,e[0])().then((()=>{if(e.shift(),e.length)return rs(e)}))}function ss({preConditions:e=[()=>Promise.resolve()],method:t,actionName:n,newRelicFlowName:o,logInfoKey:r="",sendAfterPreconditions:s=!1}){return(...i)=>{const a=Je(n),c={};o&&(c[je.FLOW]=o),r&&(c[je.INFO]=`${r}(${i[0]})`);const l=new Promise(((n,o)=>{rs((0,u.d9)(e)).then((()=>{s&&a.send(c),t(i).then((e=>{s||a.send(c),n(e)})).catch((({errorCategory:e,errorCodes:t})=>{s||a.send({[je.ERROR_CATEGORY]:e||fn,[je.ERROR_CODES]:t,...c}),rt(Hn,t),o(t)}))})).catch((({errorCategory:e,errorCodes:t})=>{a.send({[je.ERROR_CATEGORY]:e,[je.ERROR_CODES]:t,...c}),rt(Hn,t),o(t)}))}));if(window.ONEID_WEB_SDK_MIGRATION){const e=Dr().defer();return l.then((t=>e.resolve(t))).catch((t=>e.reject(t))),e.promise}return l}}function is(e,t,n){let o;const r=new Promise(((r,s)=>{o=setTimeout((()=>{const o={[je.ERROR_CATEGORY]:fn,[je.ERROR_CODES]:Xt};t&&(o[je.INFO]=t),e.send(o),s(n)}),Ce)}));return r.cancel=()=>(clearTimeout(o),this),r}function as(e){if(!e)return null;const t=localStorage.getItem(e);try{const n=JSON.parse(t);if(!n._expiry)return n;const o=new Date(n._expiry);if(delete n._expiry,o>new Date)return n;localStorage.removeItem(e)}catch(e){return t}}function cs({key:e,value:t,expires:n}){const o=JSON.stringify({...t,_expiry:n},function(){const e=new Map;return(t,n)=>n?"object"!==typeof n?n:e.has(n)?void 0:(e.set(n,!0),n):n}());localStorage.setItem(e,o)}function us(){Gt("loggedIn",!0),yr()}function ls({key:e,value:t,expires:n,secure:o=!1}){R(e,t,I.getCookieDomain(),"/",n,o)}window.ONEID_WEB_SDK_VERSION="4.2.70",window.ONEID_WEB_SDK_MIGRATION=!1,i(e[m(_)]||e.INFO),s.debug("MOUI (outer) initializing..."),me.then((e=>{e.addHandler("ui.hideLightbox",mn.hideLightbox),e.addHandler("ui.showLightbox",mn.showLightbox),e.addHandler("init.setInitialized",$r),e.addHandler("get.localStorage",as),e.addHandler("set.localStorage",cs),e.addHandler("get.cookie",m),e.addHandler("set.cookie",ls),e.addHandler("newRelic.send",(e=>{tt({...e,...qe})})),e.addHandler("api.callback",(e=>{const{name:t,...n}=e;S(t,n)})),e.addHandler("api.emitEvent",(({eventName:e,eventPayload:t,additionalInfo:n})=>rt(e,t,n))),e.addHandler("guest.write",(e=>Gn(e,!0))),e.addHandler("guest.read",Ln),e.addHandler("session.loggedIn",us),e.addHandler("set.s2cookie",Ft)})),window.OneID||(window.OneID=Wr),window.DisneyID||(window.DisneyID=Kr),function(e="outer"){const t="outer"===e?(document.querySelector('script[src*="/OneID.js"]')||document.querySelector('script[src*="/OneIDMigrate.js"]')||document.querySelector('script[src*="/DisneyID.js"]')||{}).src:window.location.href,n=!!document.querySelector('script[src*="/DisneyID.js"]'),{href:o,host:r}=new URL(t);Se=n?"outer"===e?o.replace(/^(.*)\/v2\/outer\/DisneyID\.js(?:.+)?/,"$1/v4"):o.split("/bundle")[0]:"outer"===e?o.replace(/^(.*)\/OneID(?:Migrate)?\.js/,"$1"):o.split("/bundle")[0],Re.test(r.toLowerCase())?ve=Oe:Ie.test(r.toLowerCase())?ve=we:Te.test(r.toLowerCase())&&(ve=Ae)}()})()})();

}
/*
     FILE ARCHIVED ON 16:04:22 Jan 04, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:28:00 Jul 21, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 1097.739
  exclusion.robots: 0.198
  exclusion.robots.policy: 0.177
  cdx.remote: 0.131
  esindex: 0.018
  LoadShardBlock: 300.326 (4)
  PetaboxLoader3.datanode: 70.473 (5)
  PetaboxLoader3.resolve: 401.465 (3)
  load_resource: 188.611
*/